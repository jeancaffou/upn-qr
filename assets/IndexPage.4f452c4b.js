import{c as q,w as ie,o as ft,a as Ue,d as ot,g as Me,B as nr,r as oe,C as or,D as Ot,E as ir,F as ar,b as Ce,G as lr,H as sr,i as ur,h as U,I as Te,T as fr,J as cr,K as dr,L as yt,e as Se,f as hr,j as gr,_ as $t,q as Nt,M as mr,N as vr,s as pr,t as br,O as De,u as se,x as yr}from"./index.d477045a.js";import{Q as wt,a as wr}from"./QSpinner.e23a5275.js";import{h as Fe,c as qt}from"./render.617ebaa4.js";const Cr={dark:{type:Boolean,default:null}};function xr(t,e){return q(()=>t.dark===null?e.dark.isActive:t.dark)}function kr({validate:t,resetValidation:e,requiresQForm:r}){const n=ot(nr,!1);if(n!==!1){const{props:o,proxy:i}=Me();Object.assign(i,{validate:t,resetValidation:e}),ie(()=>o.disable,a=>{a===!0?(typeof e=="function"&&e(),n.unbindComponent(i)):n.bindComponent(i)}),ft(()=>{o.disable!==!0&&n.bindComponent(i)}),Ue(()=>{o.disable!==!0&&n.unbindComponent(i)})}else r===!0&&console.error("Parent QForm not found on useFormChild()!")}const Ct=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,xt=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,kt=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Le=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Ve=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,We={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>Ct.test(t),hexaColor:t=>xt.test(t),hexOrHexaColor:t=>kt.test(t),rgbColor:t=>Le.test(t),rgbaColor:t=>Ve.test(t),rgbOrRgbaColor:t=>Le.test(t)||Ve.test(t),hexOrRgbColor:t=>Ct.test(t)||Le.test(t),hexaOrRgbaColor:t=>xt.test(t)||Ve.test(t),anyColor:t=>kt.test(t)||Le.test(t)||Ve.test(t)},Ar=[!0,!1,"ondemand"],Sr={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:t=>Ar.includes(t)}};function Br(t,e){const{props:r,proxy:n}=Me(),o=oe(!1),i=oe(null),a=oe(null);kr({validate:E,resetValidation:B});let l=0,s;const c=q(()=>r.rules!==void 0&&r.rules!==null&&r.rules.length>0),g=q(()=>r.disable!==!0&&c.value===!0),h=q(()=>r.error===!0||o.value===!0),P=q(()=>typeof r.errorMessage=="string"&&r.errorMessage.length>0?r.errorMessage:i.value);ie(()=>r.modelValue,()=>{_()}),ie(()=>r.reactiveRules,y=>{y===!0?s===void 0&&(s=ie(()=>r.rules,()=>{_(!0)})):s!==void 0&&(s(),s=void 0)},{immediate:!0}),ie(t,y=>{y===!0?a.value===null&&(a.value=!1):a.value===!1&&(a.value=!0,g.value===!0&&r.lazyRules!=="ondemand"&&e.value===!1&&R())});function B(){l++,e.value=!1,a.value=null,o.value=!1,i.value=null,R.cancel()}function E(y=r.modelValue){if(g.value!==!0)return!0;const C=++l,M=e.value!==!0?()=>{a.value=!0}:()=>{},v=(f,d)=>{f===!0&&M(),o.value=f,i.value=d||null,e.value=!1},A=[];for(let f=0;f<r.rules.length;f++){const d=r.rules[f];let m;if(typeof d=="function"?m=d(y,We):typeof d=="string"&&We[d]!==void 0&&(m=We[d](y)),m===!1||typeof m=="string")return v(!0,m),!1;m!==!0&&m!==void 0&&A.push(m)}return A.length===0?(v(!1),!0):(e.value=!0,Promise.all(A).then(f=>{if(f===void 0||Array.isArray(f)===!1||f.length===0)return C===l&&v(!1),!0;const d=f.find(m=>m===!1||typeof m=="string");return C===l&&v(d!==void 0,d),d===void 0},f=>(C===l&&(console.error(f),v(!0)),!1)))}function _(y){g.value===!0&&r.lazyRules!=="ondemand"&&(a.value===!0||r.lazyRules!==!0&&y!==!0)&&R()}const R=or(E,0);return Ue(()=>{s!==void 0&&s(),R.cancel()}),Object.assign(n,{resetValidation:B,validate:E}),Ot(n,"hasError",()=>h.value),{isDirtyModel:a,hasRules:c,hasError:h,errorMessage:P,validate:E,resetValidation:B}}const At=/^on[A-Z]/;function Pr(t,e){const r={listeners:oe({}),attributes:oe({})};function n(){const o={},i={};for(const a in t)a!=="class"&&a!=="style"&&At.test(a)===!1&&(o[a]=t[a]);for(const a in e.props)At.test(a)===!0&&(i[a]=e.props[a]);r.attributes.value=o,r.listeners.value=i}return ir(n),n(),r}let Ye,Oe=0;const te=new Array(256);for(let t=0;t<256;t++)te[t]=(t+256).toString(16).substring(1);const Mr=(()=>{const t=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const r=new Uint8Array(e);return t.getRandomValues(r),r}}return e=>{const r=[];for(let n=e;n>0;n--)r.push(Math.floor(Math.random()*256));return r}})(),St=4096;function Er(){(Ye===void 0||Oe+16>St)&&(Oe=0,Ye=Mr(St));const t=Array.prototype.slice.call(Ye,Oe,Oe+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,te[t[0]]+te[t[1]]+te[t[2]]+te[t[3]]+"-"+te[t[4]]+te[t[5]]+"-"+te[t[6]]+te[t[7]]+"-"+te[t[8]]+te[t[9]]+"-"+te[t[10]]+te[t[11]]+te[t[12]]+te[t[13]]+te[t[14]]+te[t[15]]}let it=[],Tr=[];function jt(t){Tr.length===0?t():it.push(t)}function Dr(t){it=it.filter(e=>e!==t)}function at(t){return t===void 0?`f_${Er()}`:t}function lt(t){return t!=null&&(""+t).length>0}const Ir={...Cr,...Sr,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},Fr=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function _r(){const{props:t,attrs:e,proxy:r,vnode:n}=Me();return{isDark:xr(t,r.$q),editable:q(()=>t.disable!==!0&&t.readonly!==!0),innerLoading:oe(!1),focused:oe(!1),hasPopupOpen:!1,splitAttrs:Pr(e,n),targetUid:oe(at(t.for)),rootRef:oe(null),targetRef:oe(null),controlRef:oe(null)}}function Rr(t){const{props:e,emit:r,slots:n,attrs:o,proxy:i}=Me(),{$q:a}=i;let l=null;t.hasValue===void 0&&(t.hasValue=q(()=>lt(e.modelValue))),t.emitValue===void 0&&(t.emitValue=p=>{r("update:modelValue",p)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:w,onFocusout:x}),Object.assign(t,{clearValue:u,onControlFocusin:w,onControlFocusout:x,focus:d}),t.computedCounter===void 0&&(t.computedCounter=q(()=>{if(e.counter!==!1){const p=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,T=e.maxlength!==void 0?e.maxlength:e.maxValues;return p+(T!==void 0?" / "+T:"")}}));const{isDirtyModel:s,hasRules:c,hasError:g,errorMessage:h,resetValidation:P}=Br(t.focused,t.innerLoading),B=t.floatingLabel!==void 0?q(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):q(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),E=q(()=>e.bottomSlots===!0||e.hint!==void 0||c.value===!0||e.counter===!0||e.error!==null),_=q(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),R=q(()=>`q-field row no-wrap items-start q-field--${_.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(B.value===!0?" q-field--float":"")+(C.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(g.value===!0?" q-field--error":"")+(g.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&E.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),y=q(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(g.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length>0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),C=q(()=>e.labelSlot===!0||e.label!==void 0),M=q(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&g.value!==!0?` text-${e.labelColor}`:"")),v=q(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:B.value,modelValue:e.modelValue,emitValue:t.emitValue})),A=q(()=>{const p={for:t.targetUid.value};return e.disable===!0?p["aria-disabled"]="true":e.readonly===!0&&(p["aria-readonly"]="true"),p});ie(()=>e.for,p=>{t.targetUid.value=at(p)});function f(){const p=document.activeElement;let T=t.targetRef!==void 0&&t.targetRef.value;T&&(p===null||p.id!==t.targetUid.value)&&(T.hasAttribute("tabindex")===!0||(T=T.querySelector("[tabindex]")),T&&T!==p&&T.focus({preventScroll:!0}))}function d(){jt(f)}function m(){Dr(f);const p=document.activeElement;p!==null&&t.rootRef.value.contains(p)&&p.blur()}function w(p){l!==null&&(clearTimeout(l),l=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,r("focus",p))}function x(p,T){l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,!(document.hasFocus()===!0&&(t.hasPopupOpen===!0||t.controlRef===void 0||t.controlRef.value===null||t.controlRef.value.contains(document.activeElement)!==!1))&&(t.focused.value===!0&&(t.focused.value=!1,r("blur",p)),T!==void 0&&T())})}function u(p){ar(p),a.platform.is.mobile!==!0?(t.targetRef!==void 0&&t.targetRef.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),r("update:modelValue",null),r("clear",e.modelValue),Ce(()=>{P(),a.platform.is.mobile!==!0&&(s.value=!1)})}function D(){const p=[];return n.prepend!==void 0&&p.push(U("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:Te},n.prepend())),p.push(U("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},b())),g.value===!0&&e.noErrorIcon===!1&&p.push(k("error",[U(wt,{name:a.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?p.push(k("inner-loading-append",n.loading!==void 0?n.loading():[U(wr,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&p.push(k("inner-clearable-append",[U(wt,{class:"q-field__focusable-action",tag:"button",name:e.clearIcon||a.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:u})])),n.append!==void 0&&p.push(U("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:Te},n.append())),t.getInnerAppend!==void 0&&p.push(k("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&p.push(t.getControlChild()),p}function b(){const p=[];return e.prefix!==void 0&&e.prefix!==null&&p.push(U("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&p.push(t.getShadowControl()),t.getControl!==void 0?p.push(t.getControl()):n.rawControl!==void 0?p.push(n.rawControl()):n.control!==void 0&&p.push(U("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},n.control(v.value))),C.value===!0&&p.push(U("div",{class:M.value},Fe(n.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&p.push(U("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),p.concat(Fe(n.default))}function I(){let p,T;g.value===!0?h.value!==null?(p=[U("div",{role:"alert"},h.value)],T=`q--slot-error-${h.value}`):(p=Fe(n.error),T="q--slot-error"):(e.hideHint!==!0||t.focused.value===!0)&&(e.hint!==void 0?(p=[U("div",e.hint)],T=`q--slot-hint-${e.hint}`):(p=Fe(n.hint),T="q--slot-hint"));const K=e.counter===!0||n.counter!==void 0;if(e.hideBottomSpace===!0&&K===!1&&p===void 0)return;const O=U("div",{key:T,class:"q-field__messages col"},p);return U("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:Te},[e.hideBottomSpace===!0?O:U(fr,{name:"q-transition--field-message"},()=>O),K===!0?U("div",{class:"q-field__counter"},n.counter!==void 0?n.counter():t.computedCounter.value):null])}function k(p,T){return T===null?null:U("div",{key:p,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},T)}let X=!1;return lr(()=>{X=!0}),sr(()=>{X===!0&&e.autofocus===!0&&i.focus()}),ft(()=>{ur.value===!0&&e.for===void 0&&(t.targetUid.value=at()),e.autofocus===!0&&i.focus()}),Ue(()=>{l!==null&&clearTimeout(l)}),Object.assign(i,{focus:d,blur:m}),function(){const T=t.getControl===void 0&&n.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...A.value}:A.value;return U("label",{ref:t.rootRef,class:[R.value,o.class],style:o.style,...T},[n.before!==void 0?U("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:Te},n.before()):null,U("div",{class:"q-field__inner relative-position col self-stretch"},[U("div",{ref:t.controlRef,class:y.value,tabindex:-1,...t.controlEvents},D()),E.value===!0?I():null]),n.after!==void 0?U("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:Te},n.after()):null])}}const Bt={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ze={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},zt=Object.keys(ze);zt.forEach(t=>{ze[t].regex=new RegExp(ze[t].pattern)});const Lr=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+zt.join("")+"])|(.)","g"),Pt=/[.*+?^${}()|[\]\\]/g,Y=String.fromCharCode(1),Vr={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Or(t,e,r,n){let o,i,a,l;const s=oe(null),c=oe(h());function g(){return t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)}ie(()=>t.type+t.autogrow,B),ie(()=>t.mask,f=>{if(f!==void 0)E(c.value,!0);else{const d=v(c.value);B(),t.modelValue!==d&&e("update:modelValue",d)}}),ie(()=>t.fillMask+t.reverseFillMask,()=>{s.value===!0&&E(c.value,!0)}),ie(()=>t.unmaskedValue,()=>{s.value===!0&&E(c.value)});function h(){if(B(),s.value===!0){const f=C(v(t.modelValue));return t.fillMask!==!1?A(f):f}return t.modelValue}function P(f){if(f<o.length)return o.slice(-f);let d="",m=o;const w=m.indexOf(Y);if(w>-1){for(let x=f-m.length;x>0;x--)d+=Y;m=m.slice(0,w)+d+m.slice(w)}return m}function B(){if(s.value=t.mask!==void 0&&t.mask.length>0&&g(),s.value===!1){l=void 0,o="",i="";return}const f=Bt[t.mask]===void 0?t.mask:Bt[t.mask],d=typeof t.fillMask=="string"&&t.fillMask.length>0?t.fillMask.slice(0,1):"_",m=d.replace(Pt,"\\$&"),w=[],x=[],u=[];let D=t.reverseFillMask===!0,b="",I="";f.replace(Lr,(T,K,O,S,J)=>{if(S!==void 0){const N=ze[S];u.push(N),I=N.negate,D===!0&&(x.push("(?:"+I+"+)?("+N.pattern+"+)?(?:"+I+"+)?("+N.pattern+"+)?"),D=!1),x.push("(?:"+I+"+)?("+N.pattern+")?")}else if(O!==void 0)b="\\"+(O==="\\"?"":O),u.push(O),w.push("([^"+b+"]+)?"+b+"?");else{const N=K!==void 0?K:J;b=N==="\\"?"\\\\\\\\":N.replace(Pt,"\\\\$&"),u.push(N),w.push("([^"+b+"]+)?"+b+"?")}});const k=new RegExp("^"+w.join("")+"("+(b===""?".":"[^"+b+"]")+"+)?"+(b===""?"":"["+b+"]*")+"$"),X=x.length-1,p=x.map((T,K)=>K===0&&t.reverseFillMask===!0?new RegExp("^"+m+"*"+T):K===X?new RegExp("^"+T+"("+(I===""?".":I)+"+)?"+(t.reverseFillMask===!0?"$":m+"*")):new RegExp("^"+T));a=u,l=T=>{const K=k.exec(t.reverseFillMask===!0?T:T.slice(0,u.length+1));K!==null&&(T=K.slice(1).join(""));const O=[],S=p.length;for(let J=0,N=T;J<S;J++){const be=p[J].exec(N);if(be===null)break;N=N.slice(be.shift().length),O.push(...be)}return O.length>0?O.join(""):T},o=u.map(T=>typeof T=="string"?T:Y).join(""),i=o.split(Y).join(d)}function E(f,d,m){const w=n.value,x=w.selectionEnd,u=w.value.length-x,D=v(f);d===!0&&B();const b=C(D),I=t.fillMask!==!1?A(b):b,k=c.value!==I;w.value!==I&&(w.value=I),k===!0&&(c.value=I),document.activeElement===w&&Ce(()=>{if(I===i){const p=t.reverseFillMask===!0?i.length:0;w.setSelectionRange(p,p,"forward");return}if(m==="insertFromPaste"&&t.reverseFillMask!==!0){const p=x-1;R.right(w,p,p);return}if(["deleteContentBackward","deleteContentForward"].indexOf(m)>-1){const p=t.reverseFillMask===!0?x===0?I.length>b.length?1:0:Math.max(0,I.length-(I===i?0:Math.min(b.length,u)+1))+1:x;w.setSelectionRange(p,p,"forward");return}if(t.reverseFillMask===!0)if(k===!0){const p=Math.max(0,I.length-(I===i?0:Math.min(b.length,u+1)));p===1&&x===1?w.setSelectionRange(p,p,"forward"):R.rightReverse(w,p,p)}else{const p=I.length-u;w.setSelectionRange(p,p,"backward")}else if(k===!0){const p=Math.max(0,o.indexOf(Y),Math.min(b.length,x)-1);R.right(w,p,p)}else{const p=x-1;R.right(w,p,p)}});const X=t.unmaskedValue===!0?v(I):I;String(t.modelValue)!==X&&r(X,!0)}function _(f,d,m){const w=C(v(f.value));d=Math.max(0,o.indexOf(Y),Math.min(w.length,d)),f.setSelectionRange(d,m,"forward")}const R={left(f,d,m,w){const x=o.slice(d-1).indexOf(Y)===-1;let u=Math.max(0,d-1);for(;u>=0;u--)if(o[u]===Y){d=u,x===!0&&d++;break}if(u<0&&o[d]!==void 0&&o[d]!==Y)return R.right(f,0,0);d>=0&&f.setSelectionRange(d,w===!0?m:d,"backward")},right(f,d,m,w){const x=f.value.length;let u=Math.min(x,m+1);for(;u<=x;u++)if(o[u]===Y){m=u;break}else o[u-1]===Y&&(m=u);if(u>x&&o[m-1]!==void 0&&o[m-1]!==Y)return R.left(f,x,x);f.setSelectionRange(w?d:m,m,"forward")},leftReverse(f,d,m,w){const x=P(f.value.length);let u=Math.max(0,d-1);for(;u>=0;u--)if(x[u-1]===Y){d=u;break}else if(x[u]===Y&&(d=u,u===0))break;if(u<0&&x[d]!==void 0&&x[d]!==Y)return R.rightReverse(f,0,0);d>=0&&f.setSelectionRange(d,w===!0?m:d,"backward")},rightReverse(f,d,m,w){const x=f.value.length,u=P(x),D=u.slice(0,m+1).indexOf(Y)===-1;let b=Math.min(x,m+1);for(;b<=x;b++)if(u[b-1]===Y){m=b,m>0&&D===!0&&m--;break}if(b>x&&u[m-1]!==void 0&&u[m-1]!==Y)return R.leftReverse(f,x,x);f.setSelectionRange(w===!0?d:m,m,"forward")}};function y(f){if(e("keydown",f),cr(f)===!0)return;const d=n.value,m=d.selectionStart,w=d.selectionEnd;if(f.keyCode===37||f.keyCode===39){const x=R[(f.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];f.preventDefault(),x(d,m,w,f.shiftKey)}else f.keyCode===8&&t.reverseFillMask!==!0&&m===w?R.left(d,m,w,!0):f.keyCode===46&&t.reverseFillMask===!0&&m===w&&R.rightReverse(d,m,w,!0)}function C(f){if(f==null||f==="")return"";if(t.reverseFillMask===!0)return M(f);const d=a;let m=0,w="";for(let x=0;x<d.length;x++){const u=f[m],D=d[x];if(typeof D=="string")w+=D,u===D&&m++;else if(u!==void 0&&D.regex.test(u))w+=D.transform!==void 0?D.transform(u):u,m++;else return w}return w}function M(f){const d=a,m=o.indexOf(Y);let w=f.length-1,x="";for(let u=d.length-1;u>=0&&w>-1;u--){const D=d[u];let b=f[w];if(typeof D=="string")x=D+x,b===D&&w--;else if(b!==void 0&&D.regex.test(b))do x=(D.transform!==void 0?D.transform(b):b)+x,w--,b=f[w];while(m===u&&b!==void 0&&D.regex.test(b));else return x}return x}function v(f){return typeof f!="string"||l===void 0?typeof f=="number"?l(""+f):f:l(f)}function A(f){return i.length-f.length<=0?f:t.reverseFillMask===!0&&f.length>0?i.slice(0,-f.length)+f:f+i.slice(f.length)}return{innerValue:c,hasMask:s,moveCursorForPaste:_,updateMaskValue:E,onMaskedKeydown:y}}const $r={name:String};function Nr(t){return q(()=>t.name||t.for)}function qr(t,e){function r(){const n=t.modelValue;try{const o="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(n)===n&&("length"in n?Array.from(n):[n]).forEach(i=>{o.items.add(i)}),{files:o.files}}catch{return{files:void 0}}}return e===!0?q(()=>{if(t.type==="file")return r()}):q(r)}const jr=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,zr=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Ur=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Hr=/[a-z0-9_ -]$/i;function Gr(t){return function(r){if(r.type==="compositionend"||r.type==="change"){if(r.target.qComposing!==!0)return;r.target.qComposing=!1,t(r)}else r.type==="compositionupdate"&&r.target.qComposing!==!0&&typeof r.data=="string"&&(dr.is.firefox===!0?Hr.test(r.data)===!1:jr.test(r.data)===!0||zr.test(r.data)===!0||Ur.test(r.data)===!0)===!0&&(r.target.qComposing=!0)}}var ce=qt({name:"QInput",inheritAttrs:!1,props:{...Ir,...Vr,...$r,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Fr,"paste","change","keydown","animationend"],setup(t,{emit:e,attrs:r}){const{proxy:n}=Me(),{$q:o}=n,i={};let a=NaN,l,s,c=null,g;const h=oe(null),P=Nr(t),{innerValue:B,hasMask:E,moveCursorForPaste:_,updateMaskValue:R,onMaskedKeydown:y}=Or(t,e,k,h),C=qr(t,!0),M=q(()=>lt(B.value)),v=Gr(b),A=_r(),f=q(()=>t.type==="textarea"||t.autogrow===!0),d=q(()=>f.value===!0||["text","search","url","tel","password"].includes(t.type)),m=q(()=>{const S={...A.splitAttrs.listeners.value,onInput:b,onPaste:D,onChange:p,onBlur:T,onFocus:yt};return S.onCompositionstart=S.onCompositionupdate=S.onCompositionend=v,E.value===!0&&(S.onKeydown=y),t.autogrow===!0&&(S.onAnimationend=I),S}),w=q(()=>{const S={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:P.value,...A.splitAttrs.attributes.value,id:A.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return f.value===!1&&(S.type=t.type),t.autogrow===!0&&(S.rows=1),S});ie(()=>t.type,()=>{h.value&&(h.value.value=t.modelValue)}),ie(()=>t.modelValue,S=>{if(E.value===!0){if(s===!0&&(s=!1,String(S)===a))return;R(S)}else B.value!==S&&(B.value=S,t.type==="number"&&i.hasOwnProperty("value")===!0&&(l===!0?l=!1:delete i.value));t.autogrow===!0&&Ce(X)}),ie(()=>t.autogrow,S=>{S===!0?Ce(X):h.value!==null&&r.rows>0&&(h.value.style.height="auto")}),ie(()=>t.dense,()=>{t.autogrow===!0&&Ce(X)});function x(){jt(()=>{const S=document.activeElement;h.value!==null&&h.value!==S&&(S===null||S.id!==A.targetUid.value)&&h.value.focus({preventScroll:!0})})}function u(){h.value!==null&&h.value.select()}function D(S){if(E.value===!0&&t.reverseFillMask!==!0){const J=S.target;_(J,J.selectionStart,J.selectionEnd)}e("paste",S)}function b(S){if(!S||!S.target)return;if(t.type==="file"){e("update:modelValue",S.target.files);return}const J=S.target.value;if(S.target.qComposing===!0){i.value=J;return}if(E.value===!0)R(J,!1,S.inputType);else if(k(J),d.value===!0&&S.target===document.activeElement){const{selectionStart:N,selectionEnd:be}=S.target;N!==void 0&&be!==void 0&&Ce(()=>{S.target===document.activeElement&&J.indexOf(S.target.value)===0&&S.target.setSelectionRange(N,be)})}t.autogrow===!0&&X()}function I(S){e("animationend",S),X()}function k(S,J){g=()=>{c=null,t.type!=="number"&&i.hasOwnProperty("value")===!0&&delete i.value,t.modelValue!==S&&a!==S&&(a=S,J===!0&&(s=!0),e("update:modelValue",S),Ce(()=>{a===S&&(a=NaN)})),g=void 0},t.type==="number"&&(l=!0,i.value=S),t.debounce!==void 0?(c!==null&&clearTimeout(c),i.value=S,c=setTimeout(g,t.debounce)):g()}function X(){requestAnimationFrame(()=>{const S=h.value;if(S!==null){const J=S.parentNode.style,{overflow:N}=S.style;o.platform.is.firefox!==!0&&(S.style.overflow="hidden"),J.marginBottom=S.scrollHeight-1+"px",S.style.height="1px",S.style.height=S.scrollHeight+"px",S.style.overflow=N,J.marginBottom=""}})}function p(S){v(S),c!==null&&(clearTimeout(c),c=null),g!==void 0&&g(),e("change",S.target.value)}function T(S){S!==void 0&&yt(S),c!==null&&(clearTimeout(c),c=null),g!==void 0&&g(),l=!1,s=!1,delete i.value,t.type!=="file"&&setTimeout(()=>{h.value!==null&&(h.value.value=B.value!==void 0?B.value:"")})}function K(){return i.hasOwnProperty("value")===!0?i.value:B.value!==void 0?B.value:""}Ue(()=>{T()}),ft(()=>{t.autogrow===!0&&X()}),Object.assign(A,{innerValue:B,fieldClass:q(()=>`q-${f.value===!0?"textarea":"input"}`+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:q(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length>0),inputRef:h,emitValue:k,hasValue:M,floatingLabel:q(()=>M.value===!0||lt(t.displayValue)),getControl:()=>U(f.value===!0?"textarea":"input",{ref:h,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...w.value,...m.value,...t.type!=="file"?{value:K()}:C.value}),getShadowControl:()=>U("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(f.value===!0?"":" text-no-wrap")},[U("span",{class:"invisible"},K()),U("span",t.shadowText)])});const O=Rr(A);return Object.assign(n,{focus:x,select:u,getNativeElement:()=>h.value}),Ot(n,"nativeEl",()=>h.value),O}}),Kr=qt({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:e}){const{proxy:{$q:r}}=Me(),n=ot(hr,Se);if(n===Se)return console.error("QPage needs to be a deep child of QLayout"),Se;if(ot(gr,Se)===Se)return console.error("QPage needs to be child of QPageContainer"),Se;const i=q(()=>{const l=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof t.styleFn=="function"){const s=n.isContainer.value===!0?n.containerHeight.value:r.screen.height;return t.styleFn(l,s)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-l+"px":r.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":r.screen.height-l+"px"}}),a=q(()=>`q-page${t.padding===!0?" q-layout-padding":""}`);return()=>U("main",{class:a.value,style:i.value},Fe(e.default))}});function Qe(t){return t===""?t:t==="true"||t=="1"}function Zr(t,e){return new Promise((r,n)=>{var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var i=new FileReader;i.onloadend=function(){r(i.result)},i.readAsArrayBuffer(o.response)},o.open("GET",t),o.send()})}function de(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Mt(t,e){for(var r="",n=0,o=-1,i=0,a,l=0;l<=t.length;++l){if(l<t.length)a=t.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(o===l-1||i===1))if(o!==l-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var s=r.lastIndexOf("/");if(s!==r.length-1){s===-1?(r="",n=0):(r=r.slice(0,s),n=r.length-1-r.lastIndexOf("/")),o=l,i=0;continue}}else if(r.length===2||r.length===1){r="",n=0,o=l,i=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(o+1,l):r=t.slice(o+1,l),n=l-o-1;o=l,i=0}else a===46&&i!==-1?++i:i=-1}return r}function Xr(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var ke={resolve:function(){for(var e="",r=!1,n,o=arguments.length-1;o>=-1&&!r;o--){var i;o>=0?i=arguments[o]:(n===void 0&&(n=process.cwd()),i=n),de(i),i.length!==0&&(e=i+"/"+e,r=i.charCodeAt(0)===47)}return e=Mt(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(de(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Mt(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return de(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];de(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":ke.normalize(e)},relative:function(e,r){if(de(e),de(r),e===r||(e=ke.resolve(e),r=ke.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var o=e.length,i=o-n,a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var l=r.length,s=l-a,c=i<s?i:s,g=-1,h=0;h<=c;++h){if(h===c){if(s>c){if(r.charCodeAt(a+h)===47)return r.slice(a+h+1);if(h===0)return r.slice(a+h)}else i>c&&(e.charCodeAt(n+h)===47?g=h:h===0&&(g=0));break}var P=e.charCodeAt(n+h),B=r.charCodeAt(a+h);if(P!==B)break;P===47&&(g=h)}var E="";for(h=n+g+1;h<=o;++h)(h===o||e.charCodeAt(h)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+r.slice(a+g):(a+=g,r.charCodeAt(a)===47&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(de(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,o=-1,i=!0,a=e.length-1;a>=1;--a)if(r=e.charCodeAt(a),r===47){if(!i){o=a;break}}else i=!1;return o===-1?n?"/":".":n&&o===1?"//":e.slice(0,o)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');de(e);var n=0,o=-1,i=!0,a;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var l=r.length-1,s=-1;for(a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(c===47){if(!i){n=a+1;break}}else s===-1&&(i=!1,s=a+1),l>=0&&(c===r.charCodeAt(l)?--l===-1&&(o=a):(l=-1,o=s))}return n===o?o=s:o===-1&&(o=e.length),e.slice(n,o)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!i){n=a+1;break}}else o===-1&&(i=!1,o=a+1);return o===-1?"":e.slice(n,o)}},extname:function(e){de(e);for(var r=-1,n=0,o=-1,i=!0,a=0,l=e.length-1;l>=0;--l){var s=e.charCodeAt(l);if(s===47){if(!i){n=l+1;break}continue}o===-1&&(i=!1,o=l+1),s===46?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||o===-1||a===0||a===1&&r===o-1&&r===n+1?"":e.slice(r,o)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Xr("/",e)},parse:function(e){de(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),o=n===47,i;o?(r.root="/",i=1):i=0;for(var a=-1,l=0,s=-1,c=!0,g=e.length-1,h=0;g>=i;--g){if(n=e.charCodeAt(g),n===47){if(!c){l=g+1;break}continue}s===-1&&(c=!1,s=g+1),n===46?a===-1?a=g:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||s===-1||h===0||h===1&&a===s-1&&a===l+1?s!==-1&&(l===0&&o?r.base=r.name=e.slice(1,s):r.base=r.name=e.slice(l,s)):(l===0&&o?(r.name=e.slice(1,a),r.base=e.slice(1,s)):(r.name=e.slice(l,a),r.base=e.slice(l,s)),r.ext=e.slice(a,s)),l>0?r.dir=e.slice(0,l-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};ke.posix=ke;const Jr=ke.extname,Ut=ke.basename;class Wr{constructor(){let e=(()=>typeof global=="undefined")(),r="image/png",n="image/jpeg",o="image/jpeg",i="image/webp",a="application/pdf",l="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:e?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:e?{png:r,jpg:n,jpeg:o,webp:i}:{png:r,jpg:n,jpeg:o,pdf:a,svg:l},mimes:e?{[r]:"png",[n]:"jpg",[i]:"webp"}:{[r]:"png",[n]:"jpg",[a]:"pdf",[l]:"svg"}})}toMime(e){return this.formats[(e||"").replace(/^\./,"").toLowerCase()]}fromMime(e){return this.mimes[e]}}function Yr(t,{filename:e="",extension:r="",format:_,page:o,quality:i,matte:a,density:l,outline:s,archive:B}={}){var{fromMime:g,toMime:h,expected:P}=new Wr,B=B||"canvas",E=_||r.replace(/@\d+x$/i,"")||Jr(e),_=g(h(E)||E),R=h(_),y=t.length;if(!E)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!_)throw new Error(`Unsupported file format "${E}" (expected ${P})`);if(!y)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let C,M,v=e.replace(/{(\d*)}/g,(f,d)=>(M=!0,d=parseInt(d,10),C=isFinite(d)?d:isFinite(C)?C:-1,"{}")),A=o>0?o-1:o<0?y+o:void 0;if(isFinite(A)&&A<0||A>=y)throw new RangeError(y==1?`Canvas only has a \u2018page 1\u2019 (${A} is out of bounds)`:`Canvas has pages 1\u2013${y} (${A} is out of bounds)`);if(t=isFinite(A)?[t[A]]:M||_=="pdf"?t:t.slice(-1),i===void 0)i=.92;else if(typeof i!="number"||!isFinite(i)||i<0||i>1)throw new TypeError("The quality option must be an number in the 0.0\u20131.0 range");if(l===void 0){let f=(r||Ut(e,E)).match(/@(\d+)x$/i);l=f?parseInt(f[1],10):1}else if(typeof l!="number"||!Number.isInteger(l)||l<1)throw new TypeError("The density option must be a non-negative integer");return s===void 0?s=!0:_=="svg"&&(s=!!s),{filename:e,pattern:v,format:_,mime:R,pages:t,padding:C,quality:i,matte:a,density:l,outline:s,archive:B}}class He{static for(e){return new He().append(e).get()}constructor(){this.crc=-1}get(){return~this.crc}append(e){for(var r=this.crc|0,n=this.table,o=0,i=e.length|0;o<i;o++)r=r>>>8^n[(r^e[o])&255];return this.crc=r,this}}He.prototype.table=(()=>{var t,e,r,n=[];for(t=0;t<256;t++){for(r=t,e=0;e<8;e++)r=r&1?r>>>1^3988292384:r>>>1;n[t]=r}return n})();function et(t){let e=new Uint8Array(t),r=new DataView(e.buffer),n={array:e,view:r,size:t,set8(o,i){return r.setUint8(o,i),n},set16(o,i){return r.setUint16(o,i,!0),n},set32(o,i){return r.setUint32(o,i,!0),n},bytes(o,i){return e.set(i,o),n}};return n}class Ge{constructor(e){let r=new Date;Object.assign(this,{directory:e,offset:0,files:[],time:(r.getHours()<<6|r.getMinutes())<<5|r.getSeconds()/2,date:(r.getFullYear()-1980<<4|r.getMonth()+1)<<5|r.getDate()}),this.add(e)}async add(e,r){let n=!r,o=Ge.encoder.encode(`${this.directory}/${n?"":e}`),i=new Uint8Array(n?0:await r.arrayBuffer()),a=30+o.length,l=a+i.length,s=16,{offset:c}=this,g=et(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,He.for(i)).set32(14,i.length).set32(18,i.length).set16(22,o.length);c+=a;let h=et(a+i.length+s).set32(0,67324752).bytes(4,g.array).bytes(30,o).bytes(a,i);c+=i.length,h.set32(l,134695760).bytes(l+4,g.array.slice(10,22)),c+=s,this.files.push({offset:c,folder:n,name:o,header:g,payload:h}),this.offset=c}toBuffer(){let e=this.files.reduce((h,{name:P})=>46+P.length+h,0),r=et(e+22),n=0;for(var{offset:o,name:i,header:a,folder:l}of this.files)r.set32(n,33639248).set16(n+4,20).bytes(n+6,a.array).set8(n+38,l?16:0).set32(n+42,o).bytes(n+46,i),n+=46+i.length;r.set32(n,101010256).set16(n+8,this.files.length).set16(n+10,this.files.length).set32(n+12,e).set32(n+16,this.offset);let s=new Uint8Array(this.offset+r.size),c=0;for(var{payload:g}of this.files)s.set(g.array,c),c+=g.size;return s.set(r.array,c),s}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}Ge.encoder=new TextEncoder;const ct=(t,e,r,n)=>{if(n){let{width:o,height:i}=t,a=Object.assign(document.createElement("canvas"),{width:o,height:i}),l=a.getContext("2d");l.fillStyle=n,l.fillRect(0,0,o,i),l.drawImage(t,0,0),t=a}return new Promise((o,i)=>t.toBlob(o,e,r))},Qr=(...t)=>ct(...t).then(e=>e.arrayBuffer()),en=async(t,e,r,n,o)=>{Ht(o,await ct(t,e,r,n))},tn=async(t,e,r,n,o,i,a)=>{let l=g=>i.replace("{}",String(g+1).padStart(a,"0")),s=Ut(o,".zip")||"archive",c=new Ge(s);await Promise.all(t.map(async(g,h)=>{let P=l(h);await c.add(P,await ct(g,e,r,n))})),Ht(`${s}.zip`,c.blob)},Ht=(t,e)=>{const r=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=r,n.setAttribute("download",t),typeof n.download=="undefined"&&n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>window.URL.revokeObjectURL(r),100)},rn=(t,e,r)=>t.map(n=>{if(e==1&&!r)return n.canvas;let o=document.createElement("canvas"),i=o.getContext("2d"),a=n.canvas?n.canvas:n;return o.width=a.width*e,o.height=a.height*e,r&&(i.fillStyle=r,i.fillRect(0,0,o.width,o.height)),i.scale(e,e),i.drawImage(a,0,0),o}),nn={asBuffer:Qr,asDownload:en,asZipDownload:tn,atScale:rn,options:Yr},{asBuffer:tt,asDownload:on,asZipDownload:an,atScale:rt,options:nt}=nn,Et=Symbol.for("toDataURL"),ln=t=>new Promise((e,r)=>Object.assign(new Gt,{crossOrigin:"Anonymous",onload:e,onerror:r,src:t}));class sn{constructor(e,r){let n=document.createElement("canvas"),o=[];Object.defineProperty(n,"async",{value:!0,writable:!1,enumerable:!0});for(var[i,a]of Object.entries({png:()=>tt(n,"image/png"),jpg:()=>tt(n,"image/jpeg"),pages:()=>o.concat(n).map(l=>l.getContext("2d"))}))Object.defineProperty(n,i,{get:a});return Object.assign(n,{width:e,height:r,newPage(...l){var{width:c,height:g}=n,s=Object.assign(document.createElement("canvas"),{width:c,height:g});s.getContext("2d").drawImage(n,0,0),o.push(s);var[c,g]=l.length?l:[c,g];return Object.assign(n,{width:c,height:g}).getContext("2d")},saveAs(l,s){s=typeof s=="number"?{quality:s}:s;let c=nt(this.pages,{filename:l,...s}),{pattern:g,padding:h,mime:P,quality:B,matte:E,density:_,archive:R}=c,y=rt(c.pages,_);return h==null?on(y[0],P,B,E,l):an(y,P,B,E,R,g,h)},toBuffer(l="png",s={}){s=typeof s=="number"?{quality:s}:s;let c=nt(this.pages,{extension:l,...s}),{mime:g,quality:h,matte:P,pages:B,density:E}=c,_=rt(B,E,P)[0];return tt(_,g,h,P)},[Et]:n.toDataURL.bind(n),toDataURL(l="png",s={}){s=typeof s=="number"?{quality:s}:s;let c=nt(this.pages,{extension:l,...s}),{mime:g,quality:h,matte:P,pages:B,density:E}=c,_=rt(B,E,P)[0],R=_[_===n?Et:"toDataURL"](g,h);return Promise.resolve(R)}})}}const{CanvasRenderingContext2D:un,CanvasGradient:fn,CanvasPattern:cn,Image:Gt,ImageData:dn,Path2D:hn,DOMMatrix:gn,DOMRect:mn,DOMPoint:vn}=window,pn={Canvas:sn,loadImage:ln,CanvasRenderingContext2D:un,CanvasGradient:fn,CanvasPattern:cn,Image:Gt,ImageData:dn,Path2D:hn,DOMMatrix:gn,DOMRect:mn,DOMPoint:vn},_e=(t,e,r={},n=r)=>{if(Array.isArray(e))e.forEach(o=>_e(t,o,r,n));else if(typeof e=="function")e(t,r,n,_e);else{const o=Object.keys(e)[0];Array.isArray(e[o])?(n[o]={},_e(t,e[o],r,n[o])):n[o]=e[o](t,r,n,_e)}return r},Ae=(t,e)=>(r,n,o,i)=>{e(r,n,o)&&i(r,t,n,o)},bn=(t,e)=>(r,n,o,i)=>{const a=[];let l=r.pos;for(;e(r,n,o);){const s={};if(i(r,t,n,s),r.pos===l)break;l=r.pos,a.push(s)}return a},yn=t=>({data:t,pos:0}),ue=()=>t=>t.data[t.pos++],Kt=(t=0)=>e=>e.data[e.pos+t],ge=t=>e=>e.data.subarray(e.pos,e.pos+=t),Ke=t=>e=>e.data.subarray(e.pos,e.pos+t),st=t=>e=>Array.from(ge(t)(e)).map(r=>String.fromCharCode(r)).join(""),xe=t=>e=>{const r=ge(2)(e);return t?(r[1]<<8)+r[0]:(r[0]<<8)+r[1]},Zt=(t,e)=>(r,n,o)=>{const i=typeof e=="function"?e(r,n,o):e,a=ge(t),l=new Array(i);for(var s=0;s<i;s++)l[s]=a(r);return l},wn=(t,e,r)=>{for(var n=0,o=0;o<r;o++)n+=t[e+o]&&2**(r-o-1);return n},dt=t=>e=>{const r=ue()(e),n=new Array(8);for(var o=0;o<8;o++)n[7-o]=!!(r&1<<o);return Object.keys(t).reduce((i,a)=>{const l=t[a];return l.length?i[a]=wn(n,l.index,l.length):i[a]=n[l.index],i},{})};var Ze={blocks:t=>{const r=[],n=t.data.length;for(var o=0,i=ue()(t);i!==0&&i;i=ue()(t)){if(t.pos+i>=n){const c=n-t.pos;r.push(ge(c)(t)),o+=c;break}r.push(ge(i)(t)),o+=i}const a=new Uint8Array(o);for(var l=0,s=0;s<r.length;s++)a.set(r[s],l),l+=r[s].length;return a}};const Cn=Ae({gce:[{codes:ge(2)},{byteSize:ue()},{extras:dt({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:xe(!0)},{transparentColorIndex:ue()},{terminator:ue()}]},t=>{var e=Ke(2)(t);return e[0]===33&&e[1]===249}),xn=Ae({image:[{code:ue()},{descriptor:[{left:xe(!0)},{top:xe(!0)},{width:xe(!0)},{height:xe(!0)},{lct:dt({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},Ae({lct:Zt(3,(t,e,r)=>Math.pow(2,r.descriptor.lct.size+1))},(t,e,r)=>r.descriptor.lct.exists),{data:[{minCodeSize:ue()},Ze]}]},t=>Kt()(t)===44),kn=Ae({text:[{codes:ge(2)},{blockSize:ue()},{preData:(t,e,r)=>ge(r.text.blockSize)(t)},Ze]},t=>{var e=Ke(2)(t);return e[0]===33&&e[1]===1}),An=Ae({application:[{codes:ge(2)},{blockSize:ue()},{id:(t,e,r)=>st(r.blockSize)(t)},Ze]},t=>{var e=Ke(2)(t);return e[0]===33&&e[1]===255}),Sn=Ae({comment:[{codes:ge(2)},Ze]},t=>{var e=Ke(2)(t);return e[0]===33&&e[1]===254}),Bn=[{header:[{signature:st(3)},{version:st(3)}]},{lsd:[{width:xe(!0)},{height:xe(!0)},{gct:dt({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:ue()},{pixelAspectRatio:ue()}]},Ae({gct:Zt(3,(t,e)=>Math.pow(2,e.lsd.gct.size+1))},(t,e)=>e.lsd.gct.exists),{frames:bn([Cn,An,Sn,xn,kn],t=>{var e=Kt()(t);return e===33||e===44})}],Pn=(t,e)=>{const r=new Array(t.length),n=t.length/e,o=function(g,h){const P=t.slice(h*e,(h+1)*e);r.splice.apply(r,[g*e,e].concat(P))},i=[0,4,2,1],a=[8,8,4,2];for(var l=0,s=0;s<4;s++)for(var c=i[s];c<n;c+=a[s])o(c,l),l++;return r},Mn=(t,e,r)=>{const i=r;var a,l,s,c,g,h,P,A,B,E,v,_,f,d,w,m;const R=new Array(r),y=new Array(4096),C=new Array(4096),M=new Array(4096+1);for(_=t,l=1<<_,g=l+1,a=l+2,P=-1,c=_+1,s=(1<<c)-1,B=0;B<l;B++)y[B]=0,C[B]=B;var v,A,f,d,m,w;for(v=A=f=d=m=w=0,E=0;E<i;){if(d===0){if(A<c){v+=e[w]<<A,A+=8,w++;continue}if(B=v&s,v>>=c,A-=c,B>a||B==g)break;if(B==l){c=_+1,s=(1<<c)-1,a=l+2,P=-1;continue}if(P==-1){M[d++]=C[B],P=B,f=B;continue}for(h=B,B==a&&(M[d++]=f,B=P);B>l;)M[d++]=C[B],B=y[B];f=C[B]&255,M[d++]=f,a<4096&&(y[a]=P,C[a]=f,a++,(a&s)===0&&a<4096&&(c++,s+=a)),P=h}d--,R[m++]=M[d],E++}for(E=m;E<i;E++)R[E]=0;return R},En=t=>{const e=new Uint8Array(t);return _e(yn(e),Bn)},Tn=t=>{const e=t.pixels.length,r=new Uint8ClampedArray(e*4);for(var n=0;n<e;n++){const o=n*4,i=t.pixels[n],a=t.colorTable[i];r[o]=a[0],r[o+1]=a[1],r[o+2]=a[2],r[o+3]=i!==t.transparentIndex?255:0}return r},Dn=(t,e,r)=>{if(!t.image){console.warn("gif frame does not have associated image.");return}const{image:n}=t,o=n.descriptor.width*n.descriptor.height;var i=Mn(n.data.minCodeSize,n.data.blocks,o);n.descriptor.lct.interlaced&&(i=Pn(i,n.descriptor.width));const a={pixels:i,dims:{top:t.image.descriptor.top,left:t.image.descriptor.left,width:t.image.descriptor.width,height:t.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?a.colorTable=n.lct:a.colorTable=e,t.gce&&(a.delay=(t.gce.delay||10)*10,a.disposalType=t.gce.extras.disposal,t.gce.extras.transparentColorGiven&&(a.transparentIndex=t.gce.transparentColorIndex)),r&&(a.patch=Tn(a)),a},In=(t,e)=>t.frames.filter(r=>r.image).map(r=>Dn(r,t.gct,e));function Fn(t,e,r){const n=Xt(e),o=t-1;let i=0;switch(r){case ne.L:i=he[o][0];break;case ne.M:i=he[o][1];break;case ne.Q:i=he[o][2];break;case ne.H:i=he[o][3];break}return n<=i}function _n(t,e){for(var r=1,n=Xt(t),o=0,i=he.length;o<i;o++){var a=0;switch(e){case ne.L:a=he[o][0];break;case ne.M:a=he[o][1];break;case ne.Q:a=he[o][2];break;case ne.H:a=he[o][3];break}if(n<=a)break;r++}if(r>he.length)throw new Error("Too long data");return r}function Xt(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=Number(t)?3:0)}class Rn{constructor(e){this.mode=le.MODE_8BIT_BYTE,this.parsedData=[],this.data=e;const r=[];for(let n=0,o=this.data.length;n<o;n++){const i=[],a=this.data.charCodeAt(n);a>65536?(i[0]=240|(a&1835008)>>>18,i[1]=128|(a&258048)>>>12,i[2]=128|(a&4032)>>>6,i[3]=128|a&63):a>2048?(i[0]=224|(a&61440)>>>12,i[1]=128|(a&4032)>>>6,i[2]=128|a&63):a>128?(i[0]=192|(a&1984)>>>6,i[1]=128|a&63):i[0]=a,r.push(i)}this.parsedData=Array.prototype.concat.apply([],r),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(e){for(let r=0,n=this.parsedData.length;r<n;r++)e.put(this.parsedData[r],8)}}class we{constructor(e=-1,r=ne.L){this.moduleCount=0,this.dataList=[],this.typeNumber=e,this.errorCorrectLevel=r,this.moduleCount=0,this.dataList=[]}addData(e){if(this.typeNumber<=0)this.typeNumber=_n(e,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!Fn(this.typeNumber,e,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const r=new Rn(e);this.dataList.push(r),this.dataCache=void 0}isDark(e,r){if(e<0||this.moduleCount<=e||r<0||this.moduleCount<=r)throw new Error(`${e},${r}`);return this.modules[e][r]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(e,r){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(let o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,r),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=we.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)}setupPositionProbePattern(e,r){for(let n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(let o=-1;o<=7;o++)r+o<=-1||this.moduleCount<=r+o||(0<=n&&n<=6&&(o==0||o==6)||0<=o&&o<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=o&&o<=4?this.modules[e+n][r+o]=!0:this.modules[e+n][r+o]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(ve).includes(this.maskPattern))return this.maskPattern;let e=0,r=0;for(let n=0;n<8;n++){this.makeImpl(!0,n);const o=z.getLostPoint(this);(n==0||e>o)&&(e=o,r=n)}return r}setupTimingPattern(){for(let e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(let e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)}setupPositionAdjustPattern(){const e=z.getPatternPosition(this.typeNumber);for(let r=0;r<e.length;r++)for(let n=0;n<e.length;n++){const o=e[r],i=e[n];if(this.modules[o][i]==null)for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)a==-2||a==2||l==-2||l==2||a==0&&l==0?this.modules[o+a][i+l]=!0:this.modules[o+a][i+l]=!1}}setupTypeNumber(e){const r=z.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var o=!e&&(r>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(var n=0;n<18;n++){var o=!e&&(r>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}}setupTypeInfo(e,r){const n=this.errorCorrectLevel<<3|r,o=z.getBCHTypeInfo(n);for(var i=0;i<15;i++){var a=!e&&(o>>i&1)==1;i<6?this.modules[i][8]=a:i<8?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(var i=0;i<15;i++){var a=!e&&(o>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=a:i<9?this.modules[8][15-i-1+1]=a:this.modules[8][15-i-1]=a}this.modules[this.moduleCount-8][8]=!e}mapData(e,r){let n=-1,o=this.moduleCount-1,i=7,a=0;for(let l=this.moduleCount-1;l>0;l-=2)for(l==6&&l--;;){for(let s=0;s<2;s++)if(this.modules[o][l-s]==null){let c=!1;a<e.length&&(c=(e[a]>>>i&1)==1),z.getMask(r,o,l-s)&&(c=!c),this.modules[o][l-s]=c,i--,i==-1&&(a++,i=7)}if(o+=n,o<0||this.moduleCount<=o){o-=n,n=-n;break}}}static createData(e,r,n){const o=pe.getRSBlocks(e,r),i=new Ln;for(var a=0;a<n.length;a++){const s=n[a];i.put(s.mode,4),i.put(s.getLength(),z.getLengthInBits(s.mode,e)),s.write(i)}let l=0;for(var a=0;a<o.length;a++)l+=o[a].dataCount;if(i.getLengthInBits()>l*8)throw new Error(`code length overflow. (${i.getLengthInBits()}>${l*8})`);for(i.getLengthInBits()+4<=l*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=l*8||(i.put(we.PAD0,8),i.getLengthInBits()>=l*8));)i.put(we.PAD1,8);return we.createBytes(i,o)}static createBytes(e,r){let n=0,o=0,i=0;const a=new Array(r.length),l=new Array(r.length);for(var s=0;s<r.length;s++){const B=r[s].dataCount,E=r[s].totalCount-B;o=Math.max(o,B),i=Math.max(i,E),a[s]=new Array(B);for(var c=0;c<a[s].length;c++)a[s][c]=255&e.buffer[c+n];n+=B;const _=z.getErrorCorrectPolynomial(E),y=new Pe(a[s],_.getLength()-1).mod(_);l[s]=new Array(_.getLength()-1);for(var c=0;c<l[s].length;c++){const M=c+y.getLength()-l[s].length;l[s][c]=M>=0?y.get(M):0}}let g=0;for(var c=0;c<r.length;c++)g+=r[c].totalCount;const h=new Array(g);let P=0;for(var c=0;c<o;c++)for(var s=0;s<r.length;s++)c<a[s].length&&(h[P++]=a[s][c]);for(var c=0;c<i;c++)for(var s=0;s<r.length;s++)c<l[s].length&&(h[P++]=l[s][c]);return h}}we.PAD0=236;we.PAD1=17;const ne={L:1,M:0,Q:3,H:2},le={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},ve={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class z{static getBCHTypeInfo(e){let r=e<<10;for(;z.getBCHDigit(r)-z.getBCHDigit(z.G15)>=0;)r^=z.G15<<z.getBCHDigit(r)-z.getBCHDigit(z.G15);return(e<<10|r)^z.G15_MASK}static getBCHTypeNumber(e){let r=e<<12;for(;z.getBCHDigit(r)-z.getBCHDigit(z.G18)>=0;)r^=z.G18<<z.getBCHDigit(r)-z.getBCHDigit(z.G18);return e<<12|r}static getBCHDigit(e){let r=0;for(;e!=0;)r++,e>>>=1;return r}static getPatternPosition(e){return z.PATTERN_POSITION_TABLE[e-1]}static getMask(e,r,n){switch(e){case ve.PATTERN000:return(r+n)%2==0;case ve.PATTERN001:return r%2==0;case ve.PATTERN010:return n%3==0;case ve.PATTERN011:return(r+n)%3==0;case ve.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case ve.PATTERN101:return r*n%2+r*n%3==0;case ve.PATTERN110:return(r*n%2+r*n%3)%2==0;case ve.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw new Error(`bad maskPattern:${e}`)}}static getErrorCorrectPolynomial(e){let r=new Pe([1],0);for(let n=0;n<e;n++)r=r.multiply(new Pe([1,W.gexp(n)],0));return r}static getLengthInBits(e,r){if(1<=r&&r<10)switch(e){case le.MODE_NUMBER:return 10;case le.MODE_ALPHA_NUM:return 9;case le.MODE_8BIT_BYTE:return 8;case le.MODE_KANJI:return 8;default:throw new Error(`mode:${e}`)}else if(r<27)switch(e){case le.MODE_NUMBER:return 12;case le.MODE_ALPHA_NUM:return 11;case le.MODE_8BIT_BYTE:return 16;case le.MODE_KANJI:return 10;default:throw new Error(`mode:${e}`)}else if(r<41)switch(e){case le.MODE_NUMBER:return 14;case le.MODE_ALPHA_NUM:return 13;case le.MODE_8BIT_BYTE:return 16;case le.MODE_KANJI:return 12;default:throw new Error(`mode:${e}`)}else throw new Error(`type:${r}`)}static getLostPoint(e){const r=e.getModuleCount();let n=0;for(var o=0;o<r;o++)for(var i=0;i<r;i++){let s=0;const c=e.isDark(o,i);for(let g=-1;g<=1;g++)if(!(o+g<0||r<=o+g))for(let h=-1;h<=1;h++)i+h<0||r<=i+h||g==0&&h==0||c==e.isDark(o+g,i+h)&&s++;s>5&&(n+=3+s-5)}for(var o=0;o<r-1;o++)for(var i=0;i<r-1;i++){let g=0;e.isDark(o,i)&&g++,e.isDark(o+1,i)&&g++,e.isDark(o,i+1)&&g++,e.isDark(o+1,i+1)&&g++,(g==0||g==4)&&(n+=3)}for(var o=0;o<r;o++)for(var i=0;i<r-6;i++)e.isDark(o,i)&&!e.isDark(o,i+1)&&e.isDark(o,i+2)&&e.isDark(o,i+3)&&e.isDark(o,i+4)&&!e.isDark(o,i+5)&&e.isDark(o,i+6)&&(n+=40);for(var i=0;i<r;i++)for(var o=0;o<r-6;o++)e.isDark(o,i)&&!e.isDark(o+1,i)&&e.isDark(o+2,i)&&e.isDark(o+3,i)&&e.isDark(o+4,i)&&!e.isDark(o+5,i)&&e.isDark(o+6,i)&&(n+=40);let a=0;for(var i=0;i<r;i++)for(var o=0;o<r;o++)e.isDark(o,i)&&a++;return n+=Math.abs(100*a/r/r-50)/5*10,n}}z.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];z.G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;z.G18=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;z.G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1;class W{static glog(e){if(e<1)throw new Error(`glog(${e})`);return W.LOG_TABLE[e]}static gexp(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return W.EXP_TABLE[e]}}W.EXP_TABLE=new Array(256);W.LOG_TABLE=new Array(256);W._constructor=function(){for(var t=0;t<8;t++)W.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)W.EXP_TABLE[t]=W.EXP_TABLE[t-4]^W.EXP_TABLE[t-5]^W.EXP_TABLE[t-6]^W.EXP_TABLE[t-8];for(var t=0;t<255;t++)W.LOG_TABLE[W.EXP_TABLE[t]]=t}();class Pe{constructor(e,r){if(e.length==null)throw new Error(`${e.length}/${r}`);let n=0;for(;n<e.length&&e[n]==0;)n++;this.num=new Array(e.length-n+r);for(let o=0;o<e.length-n;o++)this.num[o]=e[o+n]}get(e){return this.num[e]}getLength(){return this.num.length}multiply(e){const r=new Array(this.getLength()+e.getLength()-1);for(let n=0;n<this.getLength();n++)for(let o=0;o<e.getLength();o++)r[n+o]^=W.gexp(W.glog(this.get(n))+W.glog(e.get(o)));return new Pe(r,0)}mod(e){if(this.getLength()-e.getLength()<0)return this;const r=W.glog(this.get(0))-W.glog(e.get(0)),n=new Array(this.getLength());for(var o=0;o<this.getLength();o++)n[o]=this.get(o);for(var o=0;o<e.getLength();o++)n[o]^=W.gexp(W.glog(e.get(o))+r);return new Pe(n,0).mod(e)}}class pe{constructor(e,r){this.totalCount=e,this.dataCount=r}static getRSBlocks(e,r){const n=pe.getRsBlockTable(e,r);if(n==null)throw new Error(`bad rs block @ typeNumber:${e}/errorCorrectLevel:${r}`);const o=n.length/3,i=[];for(let a=0;a<o;a++){const l=n[a*3+0],s=n[a*3+1],c=n[a*3+2];for(let g=0;g<l;g++)i.push(new pe(s,c))}return i}static getRsBlockTable(e,r){switch(r){case ne.L:return pe.RS_BLOCK_TABLE[(e-1)*4+0];case ne.M:return pe.RS_BLOCK_TABLE[(e-1)*4+1];case ne.Q:return pe.RS_BLOCK_TABLE[(e-1)*4+2];case ne.H:return pe.RS_BLOCK_TABLE[(e-1)*4+3];default:return}}}pe.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class Ln{constructor(){this.buffer=[],this.length=0}get(e){const r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)==1}put(e,r){for(let n=0;n<r;n++)this.putBit((e>>>r-n-1&1)==1)}getLengthInBits(){return this.length}putBit(e){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}}const he=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var Vn=100,ee=256,Tt=ee-1,ye=4,Jt=16,ht=1<<Jt,Wt=10,gt=10,On=ht>>gt,$n=ht<<Wt-gt,Nn=ee>>3,ut=6,qn=1<<ut,jn=Nn*qn,zn=30,Yt=10,$e=1<<Yt,Qt=8,Dt=1<<Qt,Un=Yt+Qt,Be=1<<Un,It=499,Ft=491,_t=487,er=503,Hn=3*er;function Gn(t,e){var r,n,o,i,a;function l(){r=[],n=new Int32Array(256),o=new Int32Array(ee),i=new Int32Array(ee),a=new Int32Array(ee>>3);var y,C;for(y=0;y<ee;y++)C=(y<<ye+8)/ee,r[y]=new Float64Array([C,C,C,0]),i[y]=ht/ee,o[y]=0}function s(){for(var y=0;y<ee;y++)r[y][0]>>=ye,r[y][1]>>=ye,r[y][2]>>=ye,r[y][3]=y}function c(y,C,M,v,A){r[C][0]-=y*(r[C][0]-M)/$e,r[C][1]-=y*(r[C][1]-v)/$e,r[C][2]-=y*(r[C][2]-A)/$e}function g(y,C,M,v,A){for(var f=Math.abs(C-y),d=Math.min(C+y,ee),m=C+1,w=C-1,x=1,u,D;m<d||w>f;)D=a[x++],m<d&&(u=r[m++],u[0]-=D*(u[0]-M)/Be,u[1]-=D*(u[1]-v)/Be,u[2]-=D*(u[2]-A)/Be),w>f&&(u=r[w--],u[0]-=D*(u[0]-M)/Be,u[1]-=D*(u[1]-v)/Be,u[2]-=D*(u[2]-A)/Be)}function h(y,C,M){var v=2147483647,A=v,f=-1,d=f,m,w,x,u,D;for(m=0;m<ee;m++)w=r[m],x=Math.abs(w[0]-y)+Math.abs(w[1]-C)+Math.abs(w[2]-M),x<v&&(v=x,f=m),u=x-(o[m]>>Jt-ye),u<A&&(A=u,d=m),D=i[m]>>gt,i[m]-=D,o[m]+=D<<Wt;return i[f]+=On,o[f]-=$n,d}function P(){var y,C,M,v,A,f,d=0,m=0;for(y=0;y<ee;y++){for(M=r[y],A=y,f=M[1],C=y+1;C<ee;C++)v=r[C],v[1]<f&&(A=C,f=v[1]);if(v=r[A],y!=A&&(C=v[0],v[0]=M[0],M[0]=C,C=v[1],v[1]=M[1],M[1]=C,C=v[2],v[2]=M[2],M[2]=C,C=v[3],v[3]=M[3],M[3]=C),f!=d){for(n[d]=m+y>>1,C=d+1;C<f;C++)n[C]=y;d=f,m=y}}for(n[d]=m+Tt>>1,C=d+1;C<256;C++)n[C]=Tt}function B(y,C,M){for(var v,A,f,d=1e3,m=-1,w=n[C],x=w-1;w<ee||x>=0;)w<ee&&(A=r[w],f=A[1]-C,f>=d?w=ee:(w++,f<0&&(f=-f),v=A[0]-y,v<0&&(v=-v),f+=v,f<d&&(v=A[2]-M,v<0&&(v=-v),f+=v,f<d&&(d=f,m=A[3])))),x>=0&&(A=r[x],f=C-A[1],f>=d?x=-1:(x--,f<0&&(f=-f),v=A[0]-y,v<0&&(v=-v),f+=v,f<d&&(v=A[2]-M,v<0&&(v=-v),f+=v,f<d&&(d=f,m=A[3]))));return m}function E(){var y,C=t.length,M=30+(e-1)/3,v=C/(3*e),A=~~(v/Vn),f=$e,d=jn,m=d>>ut;for(m<=1&&(m=0),y=0;y<m;y++)a[y]=f*((m*m-y*y)*Dt/(m*m));var w;C<Hn?(e=1,w=3):C%It!==0?w=3*It:C%Ft!==0?w=3*Ft:C%_t!==0?w=3*_t:w=3*er;var x,u,D,b,I=0;for(y=0;y<v;)if(x=(t[I]&255)<<ye,u=(t[I+1]&255)<<ye,D=(t[I+2]&255)<<ye,b=h(x,u,D),c(f,b,x,u,D),m!==0&&g(m,b,x,u,D),I+=w,I>=C&&(I-=C),y++,A===0&&(A=1),y%A===0)for(f-=f/M,d-=d/zn,m=d>>ut,m<=1&&(m=0),b=0;b<m;b++)a[b]=f*((m*m-b*b)*Dt/(m*m))}function _(){l(),E(),s(),P()}this.buildColormap=_;function R(){for(var y=[],C=[],M=0;M<ee;M++)C[r[M][3]]=M;for(var v=0,A=0;A<ee;A++){var f=C[A];y[v++]=r[f][0],y[v++]=r[f][1],y[v++]=r[f][2]}return y}this.getColormap=R,this.lookupRGB=B}var Rt=-1,Ne=12,Ie=5003,Kn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function Zn(t,e,r,n){var o=Math.max(2,n),i=new Uint8Array(256),a=new Int32Array(Ie),l=new Int32Array(Ie),s,c=0,g,h=0,P,B=!1,E,_,R,y,C,M;function v(b,I){i[g++]=b,g>=254&&w(I)}function A(b){f(Ie),h=_+2,B=!0,D(_,b)}function f(b){for(var I=0;I<b;++I)a[I]=-1}function d(b,I){var k,X,p,T,K,O,S;for(E=b,B=!1,M=E,P=x(M),_=1<<b-1,R=_+1,h=_+2,g=0,T=u(),S=0,k=Ie;k<65536;k*=2)++S;S=8-S,O=Ie,f(O),D(_,I);e:for(;(X=u())!=Rt;){if(k=(X<<Ne)+T,p=X<<S^T,a[p]===k){T=l[p];continue}else if(a[p]>=0){K=O-p,p===0&&(K=1);do if((p-=K)<0&&(p+=O),a[p]===k){T=l[p];continue e}while(a[p]>=0)}D(T,I),T=X,h<1<<Ne?(l[p]=h++,a[p]=k):A(I)}D(T,I),D(R,I)}function m(b){b.writeByte(o),y=t*e,C=0,d(o+1,b),b.writeByte(0)}function w(b){g>0&&(b.writeByte(g),b.writeBytes(i,0,g),g=0)}function x(b){return(1<<b)-1}function u(){if(y===0)return Rt;--y;var b=r[C++];return b&255}function D(b,I){for(s&=Kn[c],c>0?s|=b<<c:s=b,c+=M;c>=8;)v(s&255,I),s>>=8,c-=8;if((h>P||B)&&(B?(P=x(M=E),B=!1):(++M,M==Ne?P=1<<Ne:P=x(M))),b==R){for(;c>0;)v(s&255,I),s>>=8,c-=8;w(I)}}this.encode=m}function ae(){this.page=-1,this.pages=[],this.newPage()}ae.pageSize=4096;ae.charMap={};for(var qe=0;qe<256;qe++)ae.charMap[qe]=String.fromCharCode(qe);ae.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ae.pageSize),this.cursor=0};ae.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var r=0;r<ae.pageSize;r++)t+=ae.charMap[this.pages[e][r]];return t};ae.prototype.toFlattenUint8Array=function(){const t=[];for(var e=0;e<this.pages.length;e++)if(e===this.pages.length-1){const n=Uint8Array.from(this.pages[e].slice(0,this.cursor));t.push(n)}else t.push(this.pages[e]);const r=new Uint8Array(t.reduce((n,o)=>n+o.length,0));return t.reduce((n,o)=>(r.set(o,n),n+o.length),0),r};ae.prototype.writeByte=function(t){this.cursor>=ae.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t};ae.prototype.writeUTFBytes=function(t){for(var e=t.length,r=0;r<e;r++)this.writeByte(t.charCodeAt(r))};ae.prototype.writeBytes=function(t,e,r){for(var n=r||t.length,o=e||0;o<n;o++)this.writeByte(t[o])};function H(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new ae}H.prototype.setDelay=function(t){this.delay=Math.round(t/10)};H.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)};H.prototype.setDispose=function(t){t>=0&&(this.dispose=t)};H.prototype.setRepeat=function(t){this.repeat=t};H.prototype.setTransparent=function(t){this.transparent=t};H.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};H.prototype.finish=function(){this.out.writeByte(59)};H.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t};H.prototype.setDither=function(t){t===!0&&(t="FloydSteinberg"),this.dither=t};H.prototype.setGlobalPalette=function(t){this.globalPalette=t};H.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};H.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};H.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new Gn(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};H.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var r=0,n=0;n<e;n++){var o=this.findClosestRGB(this.pixels[r++]&255,this.pixels[r++]&255,this.pixels[r++]&255);this.usedEntry[o]=!0,this.indexedPixels[n]=o}};H.prototype.ditherPixels=function(t,e){var r={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!t||!r[t])throw"Unknown dithering kernel: "+t;var n=r[t],o=0,i=this.height,a=this.width,l=this.pixels,s=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<i;c++){e&&(s=s*-1);for(var g=s==1?0:a-1,h=s==1?a:0;g!==h;g+=s){o=c*a+g;var P=o*3,B=l[P],E=l[P+1],_=l[P+2];P=this.findClosestRGB(B,E,_),this.usedEntry[P]=!0,this.indexedPixels[o]=P,P*=3;for(var R=this.colorTab[P],y=this.colorTab[P+1],C=this.colorTab[P+2],M=B-R,v=E-y,A=_-C,f=s==1?0:n.length-1,d=s==1?n.length:0;f!==d;f+=s){var m=n[f][1],w=n[f][2];if(m+g>=0&&m+g<a&&w+c>=0&&w+c<i){var x=n[f][0];P=o+m+w*a,P*=3,l[P]=Math.max(0,Math.min(255,l[P]+M*x)),l[P+1]=Math.max(0,Math.min(255,l[P+1]+v*x)),l[P+2]=Math.max(0,Math.min(255,l[P+2]+A*x))}}}}};H.prototype.findClosest=function(t,e){return this.findClosestRGB((t&16711680)>>16,(t&65280)>>8,t&255,e)};H.prototype.findClosestRGB=function(t,e,r,n){if(this.colorTab===null)return-1;if(this.neuQuant&&!n)return this.neuQuant.lookupRGB(t,e,r);for(var o=0,i=256*256*256,a=this.colorTab.length,l=0,s=0;l<a;s++){var c=t-(this.colorTab[l++]&255),g=e-(this.colorTab[l++]&255),h=r-(this.colorTab[l++]&255),P=c*c+g*g+h*h;(!n||this.usedEntry[s])&&P<i&&(i=P,o=s)}return o};H.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var r=this.image,n=0,o=0,i=0;i<e;i++)for(var a=0;a<t;a++)this.pixels[o++]=r[n++],this.pixels[o++]=r[n++],this.pixels[o++]=r[n++],n++};H.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var t,e;this.transparent===null?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=this.dispose&7),e<<=2,this.out.writeByte(0|e|0|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};H.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};H.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};H.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};H.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=3*256-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)};H.prototype.writeShort=function(t){this.out.writeByte(t&255),this.out.writeByte(t>>8&255)};H.prototype.writePixels=function(){var t=new Zn(this.width,this.height,this.indexedPixels,this.colorDepth);t.encode(this.out)};H.prototype.stream=function(){return this.out};var Xn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(g){try{c(n.next(g))}catch(h){a(h)}}function s(g){try{c(n.throw(g))}catch(h){a(h)}}function c(g){g.done?i(g.value):o(g.value).then(l,s)}c((n=n.apply(t,e||[])).next())})};const{Canvas:me}=pn,je=.4;function Lt(t){if(!t)return;function e(r){r.onload=null,r.onerror=null}return new Promise(function(r,n){if(t.slice(0,4)=="data"){let i=new Image;i.onload=function(){r(i),e(i)},i.onerror=function(){n("Image load error"),e(i)},i.src=t;return}let o=new Image;o.setAttribute("crossOrigin","Anonymous"),o.onload=function(){r(o)},o.onerror=function(){n("Image load error")},o.src=t})}class j{constructor(e){const r=Object.assign({},e);if(Object.keys(j.defaultOptions).forEach(n=>{n in r||Object.defineProperty(r,n,{value:j.defaultOptions[n],enumerable:!0,writable:!0})}),r.components?typeof r.components=="object"&&Object.keys(j.defaultComponentOptions).forEach(n=>{n in r.components?Object.defineProperty(r.components,n,{value:Object.assign(Object.assign({},j.defaultComponentOptions[n]),r.components[n]),enumerable:!0,writable:!0}):Object.defineProperty(r.components,n,{value:j.defaultComponentOptions[n],enumerable:!0,writable:!0})}):r.components=j.defaultComponentOptions,r.dotScale!==null&&r.dotScale!==void 0){if(r.dotScale<=0||r.dotScale>1)throw new Error("dotScale should be in range (0, 1].");r.components.data.scale=r.dotScale,r.components.timing.scale=r.dotScale,r.components.alignment.scale=r.dotScale}this.options=r,this.canvas=new me(e.size,e.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new we(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(e=>this._draw().then(e))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(e,r,n,o,i,a){e.beginPath(),e.moveTo(r,n),e.arcTo(r+o,n,r+o,n+i,a),e.arcTo(r+o,n+i,r,n+i,a),e.arcTo(r,n+i,r,n,a),e.arcTo(r,n,r+o,n,a),e.closePath()}static _getAverageRGB(e){const n={r:0,g:0,b:0};let o,i,a=-4;const l={r:0,g:0,b:0};let s=0;i=e.naturalHeight||e.height,o=e.naturalWidth||e.width;const g=new me(o,i).getContext("2d");if(!g)return n;g.drawImage(e,0,0);let h;try{h=g.getImageData(0,0,o,i)}catch{return n}for(;(a+=5*4)<h.data.length;)h.data[a]>200||h.data[a+1]>200||h.data[a+2]>200||(++s,l.r+=h.data[a],l.g+=h.data[a+1],l.b+=h.data[a+2]);return l.r=~~(l.r/s),l.g=~~(l.g/s),l.b=~~(l.b/s),l}static _drawDot(e,r,n,o,i=0,a=1){e.fillRect((r+i)*o,(n+i)*o,a*o,a*o)}static _drawAlignProtector(e,r,n,o){e.clearRect((r-2)*o,(n-2)*o,5*o,5*o),e.fillRect((r-2)*o,(n-2)*o,5*o,5*o)}static _drawAlign(e,r,n,o,i=0,a=1,l,s){const c=e.fillStyle;e.fillStyle=l,new Array(4).fill(0).map((g,h)=>{j._drawDot(e,r-2+h,n-2,o,i,a),j._drawDot(e,r+2,n-2+h,o,i,a),j._drawDot(e,r+2-h,n+2,o,i,a),j._drawDot(e,r-2,n+2-h,o,i,a)}),j._drawDot(e,r,n,o,i,a),s||(e.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((g,h)=>{j._drawDot(e,r-1+h,n-1,o,i,a),j._drawDot(e,r+1,n-1+h,o,i,a),j._drawDot(e,r+1-h,n+1,o,i,a),j._drawDot(e,r-1,n+1-h,o,i,a)})),e.fillStyle=c}_draw(){var e,r,n,o,i,a,l,s,c,g,h,P,B,E,_,R,y,C,M;return Xn(this,void 0,void 0,function*(){const v=(e=this.qrCode)===null||e===void 0?void 0:e.moduleCount,A=this.options.size;let f=this.options.margin;(f<0||f*2>=A)&&(f=0);const d=Math.ceil(f),m=A-2*f,w=this.options.whiteMargin,x=this.options.backgroundDimming,u=Math.ceil(m/v),D=u*v,b=D+2*d,I=new me(b,b),k=I.getContext("2d");this._clear(),k.save(),k.translate(d,d);const X=new me(b,b),p=X.getContext("2d");let T=null,K=[];if(this.options.gifBackground){const F=En(this.options.gifBackground);if(T=F,K=In(F,!0),this.options.autoColor){let L=0,V=0,$=0,Q=0;for(let G=0;G<K[0].colorTable.length;G++){const Z=K[0].colorTable[G];Z[0]>200||Z[1]>200||Z[2]>200||Z[0]===0&&Z[1]===0&&Z[2]===0||(Q++,L+=Z[0],V+=Z[1],$+=Z[2])}L=~~(L/Q),V=~~(V/Q),$=~~($/Q),this.options.colorDark=`rgb(${L},${V},${$})`}}else if(this.options.backgroundImage){const F=yield Lt(this.options.backgroundImage);if(this.options.autoColor){const L=j._getAverageRGB(F);this.options.colorDark=`rgb(${L.r},${L.g},${L.b})`}p.drawImage(F,0,0,F.width,F.height,0,0,b,b),p.rect(0,0,b,b),p.fillStyle=x,p.fill()}else p.rect(0,0,b,b),p.fillStyle=this.options.colorLight,p.fill();const O=z.getPatternPosition(this.qrCode.typeNumber),S=((n=(r=this.options.components)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.scale)||je,J=(1-S)*.5;for(let F=0;F<v;F++)for(let L=0;L<v;L++){const V=this.qrCode.isDark(F,L),$=L<8&&(F<8||F>=v-8)||L>=v-8&&F<8,Q=F==6&&L>=8&&L<=v-8||L==6&&F>=8&&F<=v-8;let G=$||Q;for(let re=1;re<O.length-1;re++)G=G||F>=O[re]-2&&F<=O[re]+2&&L>=O[re]-2&&L<=O[re]+2;const Z=L*u+(G?0:J*u),fe=F*u+(G?0:J*u);if(k.strokeStyle=V?this.options.colorDark:this.options.colorLight,k.lineWidth=.5,k.fillStyle=V?this.options.colorDark:this.options.colorLight,O.length===0)G||k.fillRect(Z,fe,(G?1:S)*u,(G?1:S)*u);else{const re=L<v-4&&L>=v-4-5&&F<v-4&&F>=v-4-5;!G&&!re&&k.fillRect(Z,fe,(G?1:S)*u,(G?1:S)*u)}}const N=O[O.length-1],be=this.options.colorLight;if(k.fillStyle=be,k.fillRect(0,0,8*u,8*u),k.fillRect(0,(v-8)*u,8*u,8*u),k.fillRect((v-8)*u,0,8*u,8*u),!((i=(o=this.options.components)===null||o===void 0?void 0:o.timing)===null||i===void 0)&&i.protectors&&(k.fillRect(8*u,6*u,(v-8-8)*u,u),k.fillRect(6*u,8*u,u,(v-8-8)*u)),!((l=(a=this.options.components)===null||a===void 0?void 0:a.cornerAlignment)===null||l===void 0)&&l.protectors&&j._drawAlignProtector(k,N,N,u),!((c=(s=this.options.components)===null||s===void 0?void 0:s.alignment)===null||c===void 0)&&c.protectors)for(let F=0;F<O.length;F++)for(let L=0;L<O.length;L++){const V=O[L],$=O[F];if(!(V===6&&($===6||$===N))){if($===6&&(V===6||V===N))continue;if(V===N&&$===N)continue;j._drawAlignProtector(k,V,$,u)}}k.fillStyle=this.options.colorDark,k.fillRect(0,0,7*u,u),k.fillRect((v-7)*u,0,7*u,u),k.fillRect(0,6*u,7*u,u),k.fillRect((v-7)*u,6*u,7*u,u),k.fillRect(0,(v-7)*u,7*u,u),k.fillRect(0,(v-7+6)*u,7*u,u),k.fillRect(0,0,u,7*u),k.fillRect(6*u,0,u,7*u),k.fillRect((v-7)*u,0,u,7*u),k.fillRect((v-7+6)*u,0,u,7*u),k.fillRect(0,(v-7)*u,u,7*u),k.fillRect(6*u,(v-7)*u,u,7*u),k.fillRect(2*u,2*u,3*u,3*u),k.fillRect((v-7+2)*u,2*u,3*u,3*u),k.fillRect(2*u,(v-7+2)*u,3*u,3*u);const Xe=((h=(g=this.options.components)===null||g===void 0?void 0:g.timing)===null||h===void 0?void 0:h.scale)||je,mt=(1-Xe)*.5;for(let F=0;F<v-8;F+=2)j._drawDot(k,8+F,6,u,mt,Xe),j._drawDot(k,6,8+F,u,mt,Xe);const vt=((B=(P=this.options.components)===null||P===void 0?void 0:P.cornerAlignment)===null||B===void 0?void 0:B.scale)||je,tr=(1-vt)*.5;j._drawAlign(k,N,N,u,tr,vt,this.options.colorDark,((_=(E=this.options.components)===null||E===void 0?void 0:E.cornerAlignment)===null||_===void 0?void 0:_.protectors)||!1);const pt=((y=(R=this.options.components)===null||R===void 0?void 0:R.alignment)===null||y===void 0?void 0:y.scale)||je,rr=(1-pt)*.5;for(let F=0;F<O.length;F++)for(let L=0;L<O.length;L++){const V=O[L],$=O[F];if(!(V===6&&($===6||$===N))){if($===6&&(V===6||V===N))continue;if(V===N&&$===N)continue;j._drawAlign(k,V,$,u,rr,pt,this.options.colorDark,((M=(C=this.options.components)===null||C===void 0?void 0:C.alignment)===null||M===void 0?void 0:M.protectors)||!1)}}if(w&&(k.fillStyle=this.options.backgroundColor,k.fillRect(-d,-d,b,d),k.fillRect(-d,D,b,d),k.fillRect(D,-d,d,b),k.fillRect(-d,-d,d,b)),this.options.logoImage){const F=yield Lt(this.options.logoImage);let L=this.options.logoScale,V=this.options.logoMargin,$=this.options.logoCornerRadius;(L<=0||L>=1)&&(L=.2),V<0&&(V=0),$<0&&($=0);const Q=D*L,G=.5*(b-Q),Z=G;k.restore(),k.fillStyle=this.options.logoBackgroundColor,k.save(),j._prepareRoundedCornerClip(k,G-V,Z-V,Q+2*V,Q+2*V,$+V),k.clip();const fe=k.globalCompositeOperation;k.globalCompositeOperation="destination-out",k.fill(),k.globalCompositeOperation=fe,k.restore(),k.save(),j._prepareRoundedCornerClip(k,G,Z,Q,Q,$),k.clip(),k.drawImage(F,G,Z,Q,Q),k.restore(),k.save(),k.translate(d,d)}if(T){let F,L,V,$,Q,G;if(K.forEach(function(Z){F||(F=new H(A,A),F.setDelay(Z.delay),F.setRepeat(0));const{width:fe,height:re}=Z.dims;L||(L=new me(fe,re),V=L.getContext("2d"),V.rect(0,0,L.width,L.height),V.fillStyle="#ffffff",V.fill()),(!$||!G||fe!==$.width||re!==$.height)&&($=new me(fe,re),Q=$.getContext("2d"),G=Q.createImageData(fe,re)),G.data.set(Z.patch),Q.putImageData(G,0,0),V.drawImage($.getContext("2d").canvas,Z.dims.left,Z.dims.top);const Re=new me(b,b),Ee=Re.getContext("2d");Ee.drawImage(L.getContext("2d").canvas,0,0,b,b),Ee.rect(0,0,b,b),Ee.fillStyle=x,Ee.fill(),Ee.drawImage(I.getContext("2d").canvas,0,0,b,b);const Je=new me(A,A),bt=Je.getContext("2d");bt.drawImage(Re.getContext("2d").canvas,0,0,A,A),F.addFrame(bt.getImageData(0,0,Je.width,Je.height).data)}),!F)throw new Error("No frames.");if(F.finish(),Vt(this.canvas)){const fe=F.stream().toFlattenUint8Array().reduce((re,Re)=>re+String.fromCharCode(Re),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(fe)}`)}return Promise.resolve(Buffer.from(F.stream().toFlattenUint8Array()))}else{p.drawImage(I.getContext("2d").canvas,0,0,b,b),k.drawImage(X.getContext("2d").canvas,-d,-d,b,b);const F=new me(A,A);F.getContext("2d").drawImage(I.getContext("2d").canvas,0,0,A,A),this.canvas=F;const V=this.options.gifBackground?"gif":"png";return Vt(this.canvas)?Promise.resolve(this.canvas.toDataURL(V)):Promise.resolve(this.canvas.toBuffer(V))}})}}j.CorrectLevel=ne;j.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};j.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:ne.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:j.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function Vt(t){try{return t instanceof HTMLElement}catch{return typeof t=="object"&&t.nodeType===1&&typeof t.style=="object"&&typeof t.ownerDocument=="object"}}const Jn={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const r=await Zr(this.gifBgSrc),n=this.logoSrc;this.render(void 0,n,r);return}const t=this.bgSrc,e=this.logoSrc;this.render(t,e)},async render(t,e,r){const n=this;new j({gifBackground:r,text:n.text,size:n.size,margin:n.margin,colorDark:n.colorDark,colorLight:n.colorLight,backgroundColor:n.backgroundColor,backgroundImage:t,backgroundDimming:n.backgroundDimming,logoImage:e,logoScale:n.logoScale,logoBackgroundColor:n.logoBackgroundColor,correctLevel:n.correctLevel,logoMargin:n.logoMargin,logoCornerRadius:n.logoCornerRadius,whiteMargin:Qe(n.whiteMargin),dotScale:n.dotScale,autoColor:Qe(n.autoColor),binarize:Qe(n.binarize),binarizeThreshold:n.binarizeThreshold,components:n.components}).draw().then(o=>{this.imgUrl=o,n.callback&&n.callback(o,n.qid)})}}},Wn=["src"];function Yn(t,e,r,n,o,i){return r.bindElement?(Nt(),mr("img",{key:0,style:{display:"inline-block"},src:o.imgUrl},null,8,Wn)):vr("",!0)}var Qn=$t(Jn,[["render",Yn]]);const eo={components:{vueQr:Qn},data:()=>({prejemnik:null,name:null,naslov:null,prnaslov:null,posta:null,prposta:null,trr:null,ref:null,znesek:0,koda:"GDSV",namen:null}),computed:{qr(){const t=["UPNQR","","","","",(this.name||"").trim(),(this.naslov||"").trim(),(this.posta||"").trim(),String(Math.floor(this.znesek*100)).padStart(11,"0"),"","",(this.koda||"").trim(),(this.namen||"").trim(),"",(this.trr||"").trim(),(this.ref||"").trim(),(this.prejemnik||"").trim(),(this.prnaslov||"").trim(),(this.prposta||"").trim()];return t.push(String(19+t.reduce((e,r)=>e+r.length,0)).padStart(3,"0"),""),t.join(`
`)}}},to={class:"q-pa-sm"},ro={class:"row q-col-gutter-sm full-width"},no={class:"col-lg-4 col-xs-12"},oo={class:"col-lg-4 col-xs-12"},io={class:"col-lg-4 col-xs-12"};function ao(t,e,r,n,o,i){const a=yr("vue-qr");return Nt(),pr(Kr,{class:"flex flex-center"},{default:br(()=>[De("div",to,[De("div",ro,[De("div",no,[se(ce,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=l=>t.name=l),label:"Ime pla\u010Dnika",filled:""},null,8,["modelValue"]),se(ce,{modelValue:t.naslov,"onUpdate:modelValue":e[1]||(e[1]=l=>t.naslov=l),label:"Naslov pla\u010Dnika",filled:""},null,8,["modelValue"]),se(ce,{modelValue:t.posta,"onUpdate:modelValue":e[2]||(e[2]=l=>t.posta=l),label:"Po\u0161ta in kraj",filled:""},null,8,["modelValue"])]),De("div",oo,[se(ce,{modelValue:t.prejemnik,"onUpdate:modelValue":e[3]||(e[3]=l=>t.prejemnik=l),label:"Ime prejemnika",filled:""},null,8,["modelValue"]),se(ce,{modelValue:t.prnaslov,"onUpdate:modelValue":e[4]||(e[4]=l=>t.prnaslov=l),label:"Naslov prejemnika",filled:""},null,8,["modelValue"]),se(ce,{modelValue:t.prposta,"onUpdate:modelValue":e[5]||(e[5]=l=>t.prposta=l),label:"Po\u0161ta in kraj prejemnika",filled:""},null,8,["modelValue"])]),De("div",io,[se(ce,{modelValue:t.koda,"onUpdate:modelValue":e[6]||(e[6]=l=>t.koda=l),label:"Koda",filled:""},null,8,["modelValue"]),se(ce,{modelValue:t.namen,"onUpdate:modelValue":e[7]||(e[7]=l=>t.namen=l),label:"Namen",filled:""},null,8,["modelValue"]),se(ce,{modelValue:t.znesek,"onUpdate:modelValue":e[8]||(e[8]=l=>t.znesek=l),label:"Znesek",filled:""},null,8,["modelValue"]),se(ce,{modelValue:t.trr,"onUpdate:modelValue":e[9]||(e[9]=l=>t.trr=l),label:"TRR",filled:""},null,8,["modelValue"]),se(ce,{modelValue:t.ref,"onUpdate:modelValue":e[10]||(e[10]=l=>t.ref=l),label:"Referenca",filled:""},null,8,["modelValue"])])]),se(a,{text:i.qr,size:250},null,8,["text"])])]),_:1})}var fo=$t(eo,[["render",ao]]);export{fo as default};
