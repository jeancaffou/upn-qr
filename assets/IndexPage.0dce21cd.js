import{c as q,w as ne,o as Tt,a as _e,d as bn,g as Me,B as _r,r as ee,C as qr,D as Ut,E as Ir,F as An,b as Ee,G as Pn,H as Fr,i as Lr,h as I,I as nt,T as je,J as Rr,K as Re,L as Un,P as Lo,M as Or,N as Vr,O as Kn,Q as Zn,m as Hr,R as $r,l as Ie,S as Nr,U as Bn,V as jr,W as Wn,X as Yr,Y as zr,e as ht,f as Ur,j as Kr,_ as Ro,q as wn,Z as Zr,$ as Oo,s as Gn,t as Ct,a0 as Fe,u as ye,a1 as Wr,x as Gr}from"./index.8aec4da8.js";import{Q as xn,a as Xr,b as Be,v as Vo,c as Jr,g as Ht}from"./QBtn.beefb1fd.js";import{h as We,c as bt,e as Ho,f as Qr}from"./dom.7a2f5958.js";import{b as ea,a as ta,h as na,c as oa,g as ra}from"./scroll.f3ea415b.js";const _n={dark:{type:Boolean,default:null}};function qn(e,t){return q(()=>e.dark===null?t.dark.isActive:e.dark)}function aa({validate:e,resetValidation:t,requiresQForm:n}){const o=bn(_r,!1);if(o!==!1){const{props:r,proxy:a}=Me();Object.assign(a,{validate:e,resetValidation:t}),ne(()=>r.disable,l=>{l===!0?(typeof t=="function"&&t(),o.unbindComponent(a)):o.bindComponent(a)}),Tt(()=>{r.disable!==!0&&o.bindComponent(a)}),_e(()=>{r.disable!==!0&&o.unbindComponent(a)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Xn=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,Jn=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Qn=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Pt=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Bt=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,an={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>Xn.test(e),hexaColor:e=>Jn.test(e),hexOrHexaColor:e=>Qn.test(e),rgbColor:e=>Pt.test(e),rgbaColor:e=>Bt.test(e),rgbOrRgbaColor:e=>Pt.test(e)||Bt.test(e),hexOrRgbColor:e=>Xn.test(e)||Pt.test(e),hexaOrRgbaColor:e=>Jn.test(e)||Bt.test(e),anyColor:e=>Qn.test(e)||Pt.test(e)||Bt.test(e)},la=[!0,!1,"ondemand"],ia={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:e=>la.includes(e)}};function sa(e,t){const{props:n,proxy:o}=Me(),r=ee(!1),a=ee(null),l=ee(null);aa({validate:T,resetValidation:y});let i=0,s;const d=q(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length>0),c=q(()=>n.disable!==!0&&d.value===!0),f=q(()=>n.error===!0||r.value===!0),S=q(()=>typeof n.errorMessage=="string"&&n.errorMessage.length>0?n.errorMessage:a.value);ne(()=>n.modelValue,()=>{F()}),ne(()=>n.reactiveRules,M=>{M===!0?s===void 0&&(s=ne(()=>n.rules,()=>{F(!0)})):s!==void 0&&(s(),s=void 0)},{immediate:!0}),ne(e,M=>{M===!0?l.value===null&&(l.value=!1):l.value===!1&&(l.value=!0,c.value===!0&&n.lazyRules!=="ondemand"&&t.value===!1&&L())});function y(){i++,t.value=!1,l.value=null,r.value=!1,a.value=null,L.cancel()}function T(M=n.modelValue){if(c.value!==!0)return!0;const C=++i,_=t.value!==!0?()=>{l.value=!0}:()=>{},m=(g,p)=>{g===!0&&_(),r.value=g,a.value=p||null,t.value=!1},E=[];for(let g=0;g<n.rules.length;g++){const p=n.rules[g];let b;if(typeof p=="function"?b=p(M,an):typeof p=="string"&&an[p]!==void 0&&(b=an[p](M)),b===!1||typeof b=="string")return m(!0,b),!1;b!==!0&&b!==void 0&&E.push(b)}return E.length===0?(m(!1),!0):(t.value=!0,Promise.all(E).then(g=>{if(g===void 0||Array.isArray(g)===!1||g.length===0)return C===i&&m(!1),!0;const p=g.find(b=>b===!1||typeof b=="string");return C===i&&m(p!==void 0,p),p===void 0},g=>(C===i&&(console.error(g),m(!0)),!1)))}function F(M){c.value===!0&&n.lazyRules!=="ondemand"&&(l.value===!0||n.lazyRules!==!0&&M!==!0)&&L()}const L=qr(T,0);return _e(()=>{s!==void 0&&s(),L.cancel()}),Object.assign(o,{resetValidation:y,validate:T}),Ut(o,"hasError",()=>f.value),{isDirtyModel:l,hasRules:d,hasError:f,errorMessage:S,validate:T,resetValidation:y}}const eo=/^on[A-Z]/;function ua(e,t){const n={listeners:ee({}),attributes:ee({})};function o(){const r={},a={};for(const l in e)l!=="class"&&l!=="style"&&eo.test(l)===!1&&(r[l]=e[l]);for(const l in t.props)eo.test(l)===!0&&(a[l]=t.props[l]);n.attributes.value=r,n.listeners.value=a}return Ir(o),o(),n}let ln,_t=0;const be=new Array(256);for(let e=0;e<256;e++)be[e]=(e+256).toString(16).substring(1);const ca=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let o=t;o>0;o--)n.push(Math.floor(Math.random()*256));return n}})(),to=4096;function da(){(ln===void 0||_t+16>to)&&(_t=0,ln=ca(to));const e=Array.prototype.slice.call(ln,_t,_t+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,be[e[0]]+be[e[1]]+be[e[2]]+be[e[3]]+"-"+be[e[4]]+be[e[5]]+"-"+be[e[6]]+be[e[7]]+"-"+be[e[8]]+be[e[9]]+"-"+be[e[10]]+be[e[11]]+be[e[12]]+be[e[13]]+be[e[14]]+be[e[15]]}let ot=[],Et=[];function $o(e){Et=Et.filter(t=>t!==e)}function fa(e){$o(e),Et.push(e)}function no(e){$o(e),Et.length===0&&ot.length>0&&(ot[ot.length-1](),ot=[])}function Kt(e){Et.length===0?e():ot.push(e)}function ha(e){ot=ot.filter(t=>t!==e)}function Cn(e){return e===void 0?`f_${da()}`:e}function kn(e){return e!=null&&(""+e).length>0}const va={..._n,...ia,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},ga=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function ma(){const{props:e,attrs:t,proxy:n,vnode:o}=Me();return{isDark:qn(e,n.$q),editable:q(()=>e.disable!==!0&&e.readonly!==!0),innerLoading:ee(!1),focused:ee(!1),hasPopupOpen:!1,splitAttrs:ua(t,o),targetUid:ee(Cn(e.for)),rootRef:ee(null),targetRef:ee(null),controlRef:ee(null)}}function pa(e){const{props:t,emit:n,slots:o,attrs:r,proxy:a}=Me(),{$q:l}=a;let i=null;e.hasValue===void 0&&(e.hasValue=q(()=>kn(t.modelValue))),e.emitValue===void 0&&(e.emitValue=x=>{n("update:modelValue",x)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:D,onFocusout:A}),Object.assign(e,{clearValue:h,onControlFocusin:D,onControlFocusout:A,focus:p}),e.computedCounter===void 0&&(e.computedCounter=q(()=>{if(t.counter!==!1){const x=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,R=t.maxlength!==void 0?t.maxlength:t.maxValues;return x+(R!==void 0?" / "+R:"")}}));const{isDirtyModel:s,hasRules:d,hasError:c,errorMessage:f,resetValidation:S}=sa(e.focused,e.innerLoading),y=e.floatingLabel!==void 0?q(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):q(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),T=q(()=>t.bottomSlots===!0||t.hint!==void 0||d.value===!0||t.counter===!0||t.error!==null),F=q(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),L=q(()=>`q-field row no-wrap items-start q-field--${F.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(y.value===!0?" q-field--float":"")+(C.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&T.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),M=q(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(c.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length>0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),C=q(()=>t.labelSlot===!0||t.label!==void 0),_=q(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&c.value!==!0?` text-${t.labelColor}`:"")),m=q(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:y.value,modelValue:t.modelValue,emitValue:e.emitValue})),E=q(()=>{const x={for:e.targetUid.value};return t.disable===!0?x["aria-disabled"]="true":t.readonly===!0&&(x["aria-readonly"]="true"),x});ne(()=>t.for,x=>{e.targetUid.value=Cn(x)});function g(){const x=document.activeElement;let R=e.targetRef!==void 0&&e.targetRef.value;R&&(x===null||x.id!==e.targetUid.value)&&(R.hasAttribute("tabindex")===!0||(R=R.querySelector("[tabindex]")),R&&R!==x&&R.focus({preventScroll:!0}))}function p(){Kt(g)}function b(){ha(g);const x=document.activeElement;x!==null&&e.rootRef.value.contains(x)&&x.blur()}function D(x){i!==null&&(clearTimeout(i),i=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",x))}function A(x,R){i!==null&&clearTimeout(i),i=setTimeout(()=>{i=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,n("blur",x)),R!==void 0&&R())})}function h(x){An(x),l.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),n("clear",t.modelValue),Ee(()=>{S(),l.platform.is.mobile!==!0&&(s.value=!1)})}function j(){const x=[];return o.prepend!==void 0&&x.push(I("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:nt},o.prepend())),x.push(I("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},k())),c.value===!0&&t.noErrorIcon===!1&&x.push(P("error",[I(xn,{name:l.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?x.push(P("inner-loading-append",o.loading!==void 0?o.loading():[I(Xr,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&x.push(P("inner-clearable-append",[I(xn,{class:"q-field__focusable-action",tag:"button",name:t.clearIcon||l.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:h})])),o.append!==void 0&&x.push(I("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:nt},o.append())),e.getInnerAppend!==void 0&&x.push(P("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&x.push(e.getControlChild()),x}function k(){const x=[];return t.prefix!==void 0&&t.prefix!==null&&x.push(I("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&x.push(e.getShadowControl()),e.getControl!==void 0?x.push(e.getControl()):o.rawControl!==void 0?x.push(o.rawControl()):o.control!==void 0&&x.push(I("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},o.control(m.value))),C.value===!0&&x.push(I("div",{class:_.value},We(o.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&x.push(I("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),x.concat(We(o.default))}function H(){let x,R;c.value===!0?f.value!==null?(x=[I("div",{role:"alert"},f.value)],R=`q--slot-error-${f.value}`):(x=We(o.error),R="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(x=[I("div",t.hint)],R=`q--slot-hint-${t.hint}`):(x=We(o.hint),R="q--slot-hint"));const Q=t.counter===!0||o.counter!==void 0;if(t.hideBottomSpace===!0&&Q===!1&&x===void 0)return;const U=I("div",{key:R,class:"q-field__messages col"},x);return I("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:nt},[t.hideBottomSpace===!0?U:I(je,{name:"q-transition--field-message"},()=>U),Q===!0?I("div",{class:"q-field__counter"},o.counter!==void 0?o.counter():e.computedCounter.value):null])}function P(x,R){return R===null?null:I("div",{key:x,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},R)}let te=!1;return Pn(()=>{te=!0}),Fr(()=>{te===!0&&t.autofocus===!0&&a.focus()}),Tt(()=>{Lr.value===!0&&t.for===void 0&&(e.targetUid.value=Cn()),t.autofocus===!0&&a.focus()}),_e(()=>{i!==null&&clearTimeout(i)}),Object.assign(a,{focus:p,blur:b}),function(){const R=e.getControl===void 0&&o.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...E.value}:E.value;return I("label",{ref:e.rootRef,class:[L.value,r.class],style:r.style,...R},[o.before!==void 0?I("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:nt},o.before()):null,I("div",{class:"q-field__inner relative-position col self-stretch"},[I("div",{ref:e.controlRef,class:M.value,tabindex:-1,...e.controlEvents},j()),T.value===!0?H():null]),o.after!==void 0?I("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:nt},o.after()):null])}}const oo={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Nt={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},No=Object.keys(Nt);No.forEach(e=>{Nt[e].regex=new RegExp(Nt[e].pattern)});const ya=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+No.join("")+"])|(.)","g"),ro=/[.*+?^${}()|[\]\\]/g,ge=String.fromCharCode(1),ba={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function wa(e,t,n,o){let r,a,l,i;const s=ee(null),d=ee(f());function c(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}ne(()=>e.type+e.autogrow,y),ne(()=>e.mask,g=>{if(g!==void 0)T(d.value,!0);else{const p=m(d.value);y(),e.modelValue!==p&&t("update:modelValue",p)}}),ne(()=>e.fillMask+e.reverseFillMask,()=>{s.value===!0&&T(d.value,!0)}),ne(()=>e.unmaskedValue,()=>{s.value===!0&&T(d.value)});function f(){if(y(),s.value===!0){const g=C(m(e.modelValue));return e.fillMask!==!1?E(g):g}return e.modelValue}function S(g){if(g<r.length)return r.slice(-g);let p="",b=r;const D=b.indexOf(ge);if(D>-1){for(let A=g-b.length;A>0;A--)p+=ge;b=b.slice(0,D)+p+b.slice(D)}return b}function y(){if(s.value=e.mask!==void 0&&e.mask.length>0&&c(),s.value===!1){i=void 0,r="",a="";return}const g=oo[e.mask]===void 0?e.mask:oo[e.mask],p=typeof e.fillMask=="string"&&e.fillMask.length>0?e.fillMask.slice(0,1):"_",b=p.replace(ro,"\\$&"),D=[],A=[],h=[];let j=e.reverseFillMask===!0,k="",H="";g.replace(ya,(R,Q,U,B,oe)=>{if(B!==void 0){const Z=Nt[B];h.push(Z),H=Z.negate,j===!0&&(A.push("(?:"+H+"+)?("+Z.pattern+"+)?(?:"+H+"+)?("+Z.pattern+"+)?"),j=!1),A.push("(?:"+H+"+)?("+Z.pattern+")?")}else if(U!==void 0)k="\\"+(U==="\\"?"":U),h.push(U),D.push("([^"+k+"]+)?"+k+"?");else{const Z=Q!==void 0?Q:oe;k=Z==="\\"?"\\\\\\\\":Z.replace(ro,"\\\\$&"),h.push(Z),D.push("([^"+k+"]+)?"+k+"?")}});const P=new RegExp("^"+D.join("")+"("+(k===""?".":"[^"+k+"]")+"+)?"+(k===""?"":"["+k+"]*")+"$"),te=A.length-1,x=A.map((R,Q)=>Q===0&&e.reverseFillMask===!0?new RegExp("^"+b+"*"+R):Q===te?new RegExp("^"+R+"("+(H===""?".":H)+"+)?"+(e.reverseFillMask===!0?"$":b+"*")):new RegExp("^"+R));l=h,i=R=>{const Q=P.exec(e.reverseFillMask===!0?R:R.slice(0,h.length+1));Q!==null&&(R=Q.slice(1).join(""));const U=[],B=x.length;for(let oe=0,Z=R;oe<B;oe++){const Ce=x[oe].exec(Z);if(Ce===null)break;Z=Z.slice(Ce.shift().length),U.push(...Ce)}return U.length>0?U.join(""):R},r=h.map(R=>typeof R=="string"?R:ge).join(""),a=r.split(ge).join(p)}function T(g,p,b){const D=o.value,A=D.selectionEnd,h=D.value.length-A,j=m(g);p===!0&&y();const k=C(j),H=e.fillMask!==!1?E(k):k,P=d.value!==H;D.value!==H&&(D.value=H),P===!0&&(d.value=H),document.activeElement===D&&Ee(()=>{if(H===a){const x=e.reverseFillMask===!0?a.length:0;D.setSelectionRange(x,x,"forward");return}if(b==="insertFromPaste"&&e.reverseFillMask!==!0){const x=A-1;L.right(D,x,x);return}if(["deleteContentBackward","deleteContentForward"].indexOf(b)>-1){const x=e.reverseFillMask===!0?A===0?H.length>k.length?1:0:Math.max(0,H.length-(H===a?0:Math.min(k.length,h)+1))+1:A;D.setSelectionRange(x,x,"forward");return}if(e.reverseFillMask===!0)if(P===!0){const x=Math.max(0,H.length-(H===a?0:Math.min(k.length,h+1)));x===1&&A===1?D.setSelectionRange(x,x,"forward"):L.rightReverse(D,x,x)}else{const x=H.length-h;D.setSelectionRange(x,x,"backward")}else if(P===!0){const x=Math.max(0,r.indexOf(ge),Math.min(k.length,A)-1);L.right(D,x,x)}else{const x=A-1;L.right(D,x,x)}});const te=e.unmaskedValue===!0?m(H):H;String(e.modelValue)!==te&&n(te,!0)}function F(g,p,b){const D=C(m(g.value));p=Math.max(0,r.indexOf(ge),Math.min(D.length,p)),g.setSelectionRange(p,b,"forward")}const L={left(g,p,b,D){const A=r.slice(p-1).indexOf(ge)===-1;let h=Math.max(0,p-1);for(;h>=0;h--)if(r[h]===ge){p=h,A===!0&&p++;break}if(h<0&&r[p]!==void 0&&r[p]!==ge)return L.right(g,0,0);p>=0&&g.setSelectionRange(p,D===!0?b:p,"backward")},right(g,p,b,D){const A=g.value.length;let h=Math.min(A,b+1);for(;h<=A;h++)if(r[h]===ge){b=h;break}else r[h-1]===ge&&(b=h);if(h>A&&r[b-1]!==void 0&&r[b-1]!==ge)return L.left(g,A,A);g.setSelectionRange(D?p:b,b,"forward")},leftReverse(g,p,b,D){const A=S(g.value.length);let h=Math.max(0,p-1);for(;h>=0;h--)if(A[h-1]===ge){p=h;break}else if(A[h]===ge&&(p=h,h===0))break;if(h<0&&A[p]!==void 0&&A[p]!==ge)return L.rightReverse(g,0,0);p>=0&&g.setSelectionRange(p,D===!0?b:p,"backward")},rightReverse(g,p,b,D){const A=g.value.length,h=S(A),j=h.slice(0,b+1).indexOf(ge)===-1;let k=Math.min(A,b+1);for(;k<=A;k++)if(h[k-1]===ge){b=k,b>0&&j===!0&&b--;break}if(k>A&&h[b-1]!==void 0&&h[b-1]!==ge)return L.leftReverse(g,A,A);g.setSelectionRange(D===!0?p:b,b,"forward")}};function M(g){if(t("keydown",g),Rr(g)===!0)return;const p=o.value,b=p.selectionStart,D=p.selectionEnd;if(g.keyCode===37||g.keyCode===39){const A=L[(g.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];g.preventDefault(),A(p,b,D,g.shiftKey)}else g.keyCode===8&&e.reverseFillMask!==!0&&b===D?L.left(p,b,D,!0):g.keyCode===46&&e.reverseFillMask===!0&&b===D&&L.rightReverse(p,b,D,!0)}function C(g){if(g==null||g==="")return"";if(e.reverseFillMask===!0)return _(g);const p=l;let b=0,D="";for(let A=0;A<p.length;A++){const h=g[b],j=p[A];if(typeof j=="string")D+=j,h===j&&b++;else if(h!==void 0&&j.regex.test(h))D+=j.transform!==void 0?j.transform(h):h,b++;else return D}return D}function _(g){const p=l,b=r.indexOf(ge);let D=g.length-1,A="";for(let h=p.length-1;h>=0&&D>-1;h--){const j=p[h];let k=g[D];if(typeof j=="string")A=j+A,k===j&&D--;else if(k!==void 0&&j.regex.test(k))do A=(j.transform!==void 0?j.transform(k):k)+A,D--,k=g[D];while(b===h&&k!==void 0&&j.regex.test(k));else return A}return A}function m(g){return typeof g!="string"||i===void 0?typeof g=="number"?i(""+g):g:i(g)}function E(g){return a.length-g.length<=0?g:e.reverseFillMask===!0&&g.length>0?a.slice(0,-g.length)+g:g+a.slice(g.length)}return{innerValue:d,hasMask:s,moveCursorForPaste:F,updateMaskValue:T,onMaskedKeydown:M}}const jo={name:String};function xa(e){return q(()=>({type:"hidden",name:e.name,value:e.modelValue}))}function Ca(e={}){return(t,n,o)=>{t[n](I("input",{class:"hidden"+(o||""),...e.value}))}}function ka(e){return q(()=>e.name||e.for)}function Ma(e,t){function n(){const o=e.modelValue;try{const r="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(o)===o&&("length"in o?Array.from(o):[o]).forEach(a=>{r.items.add(a)}),{files:r.files}}catch{return{files:void 0}}}return t===!0?q(()=>{if(e.type==="file")return n()}):q(n)}const Sa=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Da=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Ea=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Ta=/[a-z0-9_ -]$/i;function Aa(e){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,e(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(Re.is.firefox===!0?Ta.test(n.data)===!1:Sa.test(n.data)===!0||Da.test(n.data)===!0||Ea.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}var Ae=bt({name:"QInput",inheritAttrs:!1,props:{...va,...ba,...jo,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ga,"paste","change","keydown","animationend"],setup(e,{emit:t,attrs:n}){const{proxy:o}=Me(),{$q:r}=o,a={};let l=NaN,i,s,d=null,c;const f=ee(null),S=ka(e),{innerValue:y,hasMask:T,moveCursorForPaste:F,updateMaskValue:L,onMaskedKeydown:M}=wa(e,t,P,f),C=Ma(e,!0),_=q(()=>kn(y.value)),m=Aa(k),E=ma(),g=q(()=>e.type==="textarea"||e.autogrow===!0),p=q(()=>g.value===!0||["text","search","url","tel","password"].includes(e.type)),b=q(()=>{const B={...E.splitAttrs.listeners.value,onInput:k,onPaste:j,onChange:x,onBlur:R,onFocus:Un};return B.onCompositionstart=B.onCompositionupdate=B.onCompositionend=m,T.value===!0&&(B.onKeydown=M),e.autogrow===!0&&(B.onAnimationend=H),B}),D=q(()=>{const B={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:S.value,...E.splitAttrs.attributes.value,id:E.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return g.value===!1&&(B.type=e.type),e.autogrow===!0&&(B.rows=1),B});ne(()=>e.type,()=>{f.value&&(f.value.value=e.modelValue)}),ne(()=>e.modelValue,B=>{if(T.value===!0){if(s===!0&&(s=!1,String(B)===l))return;L(B)}else y.value!==B&&(y.value=B,e.type==="number"&&a.hasOwnProperty("value")===!0&&(i===!0?i=!1:delete a.value));e.autogrow===!0&&Ee(te)}),ne(()=>e.autogrow,B=>{B===!0?Ee(te):f.value!==null&&n.rows>0&&(f.value.style.height="auto")}),ne(()=>e.dense,()=>{e.autogrow===!0&&Ee(te)});function A(){Kt(()=>{const B=document.activeElement;f.value!==null&&f.value!==B&&(B===null||B.id!==E.targetUid.value)&&f.value.focus({preventScroll:!0})})}function h(){f.value!==null&&f.value.select()}function j(B){if(T.value===!0&&e.reverseFillMask!==!0){const oe=B.target;F(oe,oe.selectionStart,oe.selectionEnd)}t("paste",B)}function k(B){if(!B||!B.target)return;if(e.type==="file"){t("update:modelValue",B.target.files);return}const oe=B.target.value;if(B.target.qComposing===!0){a.value=oe;return}if(T.value===!0)L(oe,!1,B.inputType);else if(P(oe),p.value===!0&&B.target===document.activeElement){const{selectionStart:Z,selectionEnd:Ce}=B.target;Z!==void 0&&Ce!==void 0&&Ee(()=>{B.target===document.activeElement&&oe.indexOf(B.target.value)===0&&B.target.setSelectionRange(Z,Ce)})}e.autogrow===!0&&te()}function H(B){t("animationend",B),te()}function P(B,oe){c=()=>{d=null,e.type!=="number"&&a.hasOwnProperty("value")===!0&&delete a.value,e.modelValue!==B&&l!==B&&(l=B,oe===!0&&(s=!0),t("update:modelValue",B),Ee(()=>{l===B&&(l=NaN)})),c=void 0},e.type==="number"&&(i=!0,a.value=B),e.debounce!==void 0?(d!==null&&clearTimeout(d),a.value=B,d=setTimeout(c,e.debounce)):c()}function te(){requestAnimationFrame(()=>{const B=f.value;if(B!==null){const oe=B.parentNode.style,{overflow:Z}=B.style;r.platform.is.firefox!==!0&&(B.style.overflow="hidden"),oe.marginBottom=B.scrollHeight-1+"px",B.style.height="1px",B.style.height=B.scrollHeight+"px",B.style.overflow=Z,oe.marginBottom=""}})}function x(B){m(B),d!==null&&(clearTimeout(d),d=null),c!==void 0&&c(),t("change",B.target.value)}function R(B){B!==void 0&&Un(B),d!==null&&(clearTimeout(d),d=null),c!==void 0&&c(),i=!1,s=!1,delete a.value,e.type!=="file"&&setTimeout(()=>{f.value!==null&&(f.value.value=y.value!==void 0?y.value:"")})}function Q(){return a.hasOwnProperty("value")===!0?a.value:y.value!==void 0?y.value:""}_e(()=>{R()}),Tt(()=>{e.autogrow===!0&&te()}),Object.assign(E,{innerValue:y,fieldClass:q(()=>`q-${g.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:q(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length>0),inputRef:f,emitValue:P,hasValue:_,floatingLabel:q(()=>_.value===!0||kn(e.displayValue)),getControl:()=>I(g.value===!0?"textarea":"input",{ref:f,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...D.value,...b.value,...e.type!=="file"?{value:Q()}:C.value}),getShadowControl:()=>I("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(g.value===!0?"":" text-no-wrap")},[I("span",{class:"invisible"},Q()),I("span",e.shadowText)])});const U=pa(E);return Object.assign(o,{focus:A,select:h,getNativeElement:()=>f.value}),Ut(o,"nativeEl",()=>f.value),U}});function Pa(){const e=new Map;return{getCache:function(t,n){return e[t]===void 0?e[t]=n:e[t]},getCacheWithFn:function(t,n){return e[t]===void 0?e[t]=n():e[t]}}}const Ge=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ba(e,t,n){return Object.prototype.toString.call(e)==="[object Date]"&&(n=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),Fa(In(e,t,n))}function ao(e,t,n){return zo(Ia(e,t,n))}function _a(e){return qa(e)===0}function $t(e,t){return t<=6?31:t<=11||_a(e)?30:29}function qa(e){const t=Ge.length;let n=Ge[0],o,r,a,l,i;if(e<n||e>=Ge[t-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<t&&(o=Ge[i],r=o-n,!(e<o));i+=1)n=o;return l=e-n,r-l<6&&(l=l-r+de(r+4,33)*33),a=Te(Te(l+1,33)-1,4),a===-1&&(a=4),a}function Yo(e,t){const n=Ge.length,o=e+621;let r=-14,a=Ge[0],l,i,s,d,c;if(e<a||e>=Ge[n-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<n&&(l=Ge[c],i=l-a,!(e<l));c+=1)r=r+de(i,33)*8+de(Te(i,33),4),a=l;d=e-a,r=r+de(d,33)*8+de(Te(d,33)+3,4),Te(i,33)===4&&i-d===4&&(r+=1);const f=de(o,4)-de((de(o,100)+1)*3,4)-150,S=20+r-f;return t||(i-d<6&&(d=d-i+de(i+4,33)*33),s=Te(Te(d+1,33)-1,4),s===-1&&(s=4)),{leap:s,gy:o,march:S}}function Ia(e,t,n){const o=Yo(e,!0);return In(o.gy,3,o.march)+(t-1)*31-de(t,7)*(t-7)+n-1}function Fa(e){const t=zo(e).gy;let n=t-621,o,r,a;const l=Yo(n,!1),i=In(t,3,l.march);if(a=e-i,a>=0){if(a<=185)return r=1+de(a,31),o=Te(a,31)+1,{jy:n,jm:r,jd:o};a-=186}else n-=1,a+=179,l.leap===1&&(a+=1);return r=7+de(a,30),o=Te(a,30)+1,{jy:n,jm:r,jd:o}}function In(e,t,n){let o=de((e+de(t-8,6)+100100)*1461,4)+de(153*Te(t+9,12)+2,5)+n-34840408;return o=o-de(de(e+100100+de(t-8,6),100)*3,4)+752,o}function zo(e){let t=4*e+139361631;t=t+de(de(4*e+183187720,146097)*3,4)*4-3908;const n=de(Te(t,1461),4)*5+308,o=de(Te(n,153),5)+1,r=Te(de(n,153),12)+1;return{gy:de(t,1461)-100100+de(8-r,6),gm:r,gd:o}}function de(e,t){return~~(e/t)}function Te(e,t){return e-~~(e/t)*t}function ue(e,t=2,n="0"){if(e==null)return e;const o=""+e;return o.length>=t?o:new Array(t-o.length+1).join(n)+o}const La=["gregorian","persian"],Ra={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>La.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Oa=["update:modelValue"];function Ue(e){return e.year+"/"+ue(e.month)+"/"+ue(e.day)}function Va(e,t){const n=q(()=>e.disable!==!0&&e.readonly!==!0),o=q(()=>n.value===!0?0:-1),r=q(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function a(){return e.locale!==void 0?{...t.lang.date,...e.locale}:t.lang.date}function l(i){const s=new Date,d=i===!0?null:0;if(e.calendar==="persian"){const c=Ba(s);return{year:c.jy,month:c.jm,day:c.jd}}return{year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate(),hour:d,minute:d,second:d,millisecond:d}}return{editable:n,tabindex:o,headerClass:r,getLocale:a,getCurrentDate:l}}const Uo=864e5,Ha=36e5,Mn=6e4,Ko="YYYY-MM-DDTHH:mm:ss.SSSZ",$a=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Na=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,sn={};function ja(e,t){const n="("+t.days.join("|")+")",o=e+n;if(sn[o]!==void 0)return sn[o];const r="("+t.daysShort.join("|")+")",a="("+t.months.join("|")+")",l="("+t.monthsShort.join("|")+")",i={};let s=0;const d=e.replace(Na,f=>{switch(s++,f){case"YY":return i.YY=s,"(-?\\d{1,2})";case"YYYY":return i.YYYY=s,"(-?\\d{1,4})";case"M":return i.M=s,"(\\d{1,2})";case"MM":return i.M=s,"(\\d{2})";case"MMM":return i.MMM=s,l;case"MMMM":return i.MMMM=s,a;case"D":return i.D=s,"(\\d{1,2})";case"Do":return i.D=s++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=s,"(\\d{2})";case"H":return i.H=s,"(\\d{1,2})";case"HH":return i.H=s,"(\\d{2})";case"h":return i.h=s,"(\\d{1,2})";case"hh":return i.h=s,"(\\d{2})";case"m":return i.m=s,"(\\d{1,2})";case"mm":return i.m=s,"(\\d{2})";case"s":return i.s=s,"(\\d{1,2})";case"ss":return i.s=s,"(\\d{2})";case"S":return i.S=s,"(\\d{1})";case"SS":return i.S=s,"(\\d{2})";case"SSS":return i.S=s,"(\\d{3})";case"A":return i.A=s,"(AM|PM)";case"a":return i.a=s,"(am|pm)";case"aa":return i.aa=s,"(a\\.m\\.|p\\.m\\.)";case"ddd":return r;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return i.Z=s,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=s,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=s,"(-?\\d+)";case"x":return i.x=s,"(-?\\d{4,})";default:return s--,f[0]==="["&&(f=f.substring(1,f.length-1)),f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:i,regex:new RegExp("^"+d)};return sn[o]=c,c}function Zo(e,t){return e!==void 0?e:t!==void 0?t.date:Or.date}function lo(e,t=""){const n=e>0?"-":"+",o=Math.abs(e),r=Math.floor(o/60),a=o%60;return n+ue(r)+t+ue(a)}function Ya(e,t,n,o,r){const a={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(a,r),e==null||e===""||typeof e!="string")return a;t===void 0&&(t=Ko);const l=Zo(n,Lo.props),i=l.months,s=l.monthsShort,{regex:d,map:c}=ja(t,l),f=e.match(d);if(f===null)return a;let S="";if(c.X!==void 0||c.x!==void 0){const y=parseInt(f[c.X!==void 0?c.X:c.x],10);if(isNaN(y)===!0||y<0)return a;const T=new Date(y*(c.X!==void 0?1e3:1));a.year=T.getFullYear(),a.month=T.getMonth()+1,a.day=T.getDate(),a.hour=T.getHours(),a.minute=T.getMinutes(),a.second=T.getSeconds(),a.millisecond=T.getMilliseconds()}else{if(c.YYYY!==void 0)a.year=parseInt(f[c.YYYY],10);else if(c.YY!==void 0){const y=parseInt(f[c.YY],10);a.year=y<0?y:2e3+y}if(c.M!==void 0){if(a.month=parseInt(f[c.M],10),a.month<1||a.month>12)return a}else c.MMM!==void 0?a.month=s.indexOf(f[c.MMM])+1:c.MMMM!==void 0&&(a.month=i.indexOf(f[c.MMMM])+1);if(c.D!==void 0){if(a.day=parseInt(f[c.D],10),a.year===null||a.month===null||a.day<1)return a;const y=o!=="persian"?new Date(a.year,a.month,0).getDate():$t(a.year,a.month);if(a.day>y)return a}c.H!==void 0?a.hour=parseInt(f[c.H],10)%24:c.h!==void 0&&(a.hour=parseInt(f[c.h],10)%12,(c.A&&f[c.A]==="PM"||c.a&&f[c.a]==="pm"||c.aa&&f[c.aa]==="p.m.")&&(a.hour+=12),a.hour=a.hour%24),c.m!==void 0&&(a.minute=parseInt(f[c.m],10)%60),c.s!==void 0&&(a.second=parseInt(f[c.s],10)%60),c.S!==void 0&&(a.millisecond=parseInt(f[c.S],10)*10**(3-f[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(S=c.Z!==void 0?f[c.Z].replace(":",""):f[c.ZZ],a.timezoneOffset=(S[0]==="+"?-1:1)*(60*S.slice(1,3)+1*S.slice(3,5)))}return a.dateHash=ue(a.year,6)+"/"+ue(a.month)+"/"+ue(a.day),a.timeHash=ue(a.hour)+":"+ue(a.minute)+":"+ue(a.second)+S,a}function io(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const o=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-o);const r=(t-n)/(Uo*7);return 1+Math.floor(r)}function He(e,t,n){const o=new Date(e),r=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":o[`${r}Month`](0);case"month":case"months":o[`${r}Date`](1);case"day":case"days":case"date":o[`${r}Hours`](0);case"hour":case"hours":o[`${r}Minutes`](0);case"minute":case"minutes":o[`${r}Seconds`](0);case"second":case"seconds":o[`${r}Milliseconds`](0)}return o}function qt(e,t,n){return(e.getTime()-e.getTimezoneOffset()*Mn-(t.getTime()-t.getTimezoneOffset()*Mn))/n}function Wo(e,t,n="days"){const o=new Date(e),r=new Date(t);switch(n){case"years":case"year":return o.getFullYear()-r.getFullYear();case"months":case"month":return(o.getFullYear()-r.getFullYear())*12+o.getMonth()-r.getMonth();case"days":case"day":case"date":return qt(He(o,"day"),He(r,"day"),Uo);case"hours":case"hour":return qt(He(o,"hour"),He(r,"hour"),Ha);case"minutes":case"minute":return qt(He(o,"minute"),He(r,"minute"),Mn);case"seconds":case"second":return qt(He(o,"second"),He(r,"second"),1e3)}}function so(e){return Wo(e,He(e,"year"),"days")+1}function uo(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const co={YY(e,t,n){const o=this.YYYY(e,t,n)%100;return o>=0?ue(o):"-"+ue(Math.abs(o))},YYYY(e,t,n){return n!=null?n:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return ue(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return uo(this.Q(e))},D(e){return e.getDate()},Do(e){return uo(e.getDate())},DD(e){return ue(e.getDate())},DDD(e){return so(e)},DDDD(e){return ue(so(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return io(e)},ww(e){return ue(io(e))},H(e){return e.getHours()},HH(e){return ue(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return ue(this.h(e))},m(e){return e.getMinutes()},mm(e){return ue(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return ue(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return ue(Math.floor(e.getMilliseconds()/10))},SSS(e){return ue(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,n,o){const r=o==null?e.getTimezoneOffset():o;return lo(r,":")},ZZ(e,t,n,o){const r=o==null?e.getTimezoneOffset():o;return lo(r)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function za(e,t,n,o,r){if(e!==0&&!e||e===1/0||e===-1/0)return;const a=new Date(e);if(isNaN(a))return;t===void 0&&(t=Ko);const l=Zo(n,Lo.props);return t.replace($a,(i,s)=>i in co?co[i](a,l,o,r):s===void 0?i:s.split("\\]").join("]"))}const et=20,Ua=["Calendar","Years","Months"],fo=e=>Ua.includes(e),un=e=>/^-?[\d]+\/[0-1]\d$/.test(e),vt=" \u2014 ";function Ke(e){return e.year+"/"+ue(e.month)}var Ka=bt({name:"QDate",props:{...Ra,...jo,..._n,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:un},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:un},navigationMaxYearMonth:{type:String,validator:un},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:fo}},emits:[...Oa,"rangeStart","rangeEnd","navigation"],setup(e,{slots:t,emit:n}){const{proxy:o}=Me(),{$q:r}=o,a=qn(e,r),{getCache:l}=Pa(),{tabindex:i,headerClass:s,getLocale:d,getCurrentDate:c}=Va(e,r);let f;const S=xa(e),y=Ca(S),T=ee(null),F=ee(Vn()),L=ee(d()),M=q(()=>Vn()),C=q(()=>d()),_=q(()=>c()),m=ee(Hn(F.value,L.value)),E=ee(e.defaultView),g=r.lang.rtl===!0?"right":"left",p=ee(g.value),b=ee(g.value),D=m.value.year,A=ee(D-D%et-(D<0?et:0)),h=ee(null),j=q(()=>{const u=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${u} q-date--${u}-${e.minimal===!0?"minimal":"standard"}`+(a.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),k=q(()=>e.color||"primary"),H=q(()=>e.textColor||"white"),P=q(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),te=q(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),x=q(()=>te.value.filter(u=>typeof u=="string").map(u=>Qt(u,F.value,L.value)).filter(u=>u.dateHash!==null&&u.day!==null&&u.month!==null&&u.year!==null)),R=q(()=>{const u=v=>Qt(v,F.value,L.value);return te.value.filter(v=>Vr(v)===!0&&v.from!==void 0&&v.to!==void 0).map(v=>({from:u(v.from),to:u(v.to)})).filter(v=>v.from.dateHash!==null&&v.to.dateHash!==null&&v.from.dateHash<v.to.dateHash)}),Q=q(()=>e.calendar!=="persian"?u=>new Date(u.year,u.month-1,u.day):u=>{const v=ao(u.year,u.month,u.day);return new Date(v.gy,v.gm-1,v.gd)}),U=q(()=>e.calendar==="persian"?Ue:(u,v,w)=>za(new Date(u.year,u.month-1,u.day,u.hour,u.minute,u.second,u.millisecond),v===void 0?F.value:v,w===void 0?L.value:w,u.year,u.timezoneOffset)),B=q(()=>x.value.length+R.value.reduce((u,v)=>u+1+Wo(Q.value(v.to),Q.value(v.from)),0)),oe=q(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(h.value!==null){const w=h.value.init,$=Q.value(w);return L.value.daysShort[$.getDay()]+", "+L.value.monthsShort[w.month-1]+" "+w.day+vt+"?"}if(B.value===0)return vt;if(B.value>1)return`${B.value} ${L.value.pluralDay}`;const u=x.value[0],v=Q.value(u);return isNaN(v.valueOf())===!0?vt:L.value.headerTitle!==void 0?L.value.headerTitle(v,u):L.value.daysShort[v.getDay()]+", "+L.value.monthsShort[u.month-1]+" "+u.day}),Z=q(()=>x.value.concat(R.value.map(v=>v.from)).sort((v,w)=>v.year-w.year||v.month-w.month)[0]),Ce=q(()=>x.value.concat(R.value.map(v=>v.to)).sort((v,w)=>w.year-v.year||w.month-v.month)[0]),K=q(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(B.value===0)return vt;if(B.value>1){const u=Z.value,v=Ce.value,w=L.value.monthsShort;return w[u.month-1]+(u.year!==v.year?" "+u.year+vt+w[v.month-1]+" ":u.month!==v.month?vt+w[v.month-1]:"")+" "+v.year}return x.value[0].year}),se=q(()=>{const u=[r.iconSet.datetime.arrowLeft,r.iconSet.datetime.arrowRight];return r.lang.rtl===!0?u.reverse():u}),we=q(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):L.value.firstDayOfWeek),Ye=q(()=>{const u=L.value.daysShort,v=we.value;return v>0?u.slice(v,7).concat(u.slice(0,v)):u}),z=q(()=>{const u=m.value;return e.calendar!=="persian"?new Date(u.year,u.month,0).getDate():$t(u.year,u.month)}),Je=q(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),V=q(()=>{if(e.navigationMinYearMonth===void 0)return null;const u=e.navigationMinYearMonth.split("/");return{year:parseInt(u[0],10),month:parseInt(u[1],10)}}),N=q(()=>{if(e.navigationMaxYearMonth===void 0)return null;const u=e.navigationMaxYearMonth.split("/");return{year:parseInt(u[0],10),month:parseInt(u[1],10)}}),W=q(()=>{const u={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return V.value!==null&&V.value.year>=m.value.year&&(u.year.prev=!1,V.value.year===m.value.year&&V.value.month>=m.value.month&&(u.month.prev=!1)),N.value!==null&&N.value.year<=m.value.year&&(u.year.next=!1,N.value.year===m.value.year&&N.value.month<=m.value.month&&(u.month.next=!1)),u}),G=q(()=>{const u={};return x.value.forEach(v=>{const w=Ke(v);u[w]===void 0&&(u[w]=[]),u[w].push(v.day)}),u}),ve=q(()=>{const u={};return R.value.forEach(v=>{const w=Ke(v.from),$=Ke(v.to);if(u[w]===void 0&&(u[w]=[]),u[w].push({from:v.from.day,to:w===$?v.to.day:void 0,range:v}),w<$){let O;const{year:le,month:Y}=v.from,X=Y<12?{year:le,month:Y+1}:{year:le+1,month:1};for(;(O=Ke(X))<=$;)u[O]===void 0&&(u[O]=[]),u[O].push({from:void 0,to:O===$?v.to.day:void 0,range:v}),X.month++,X.month>12&&(X.year++,X.month=1)}}),u}),re=q(()=>{if(h.value===null)return;const{init:u,initHash:v,final:w,finalHash:$}=h.value,[O,le]=v<=$?[u,w]:[w,u],Y=Ke(O),X=Ke(le);if(Y!==J.value&&X!==J.value)return;const fe={};return Y===J.value?(fe.from=O.day,fe.includeFrom=!0):fe.from=1,X===J.value?(fe.to=le.day,fe.includeTo=!0):fe.to=z.value,fe}),J=q(()=>Ke(m.value)),Se=q(()=>{const u={};if(e.options===void 0){for(let w=1;w<=z.value;w++)u[w]=!0;return u}const v=typeof e.options=="function"?e.options:w=>e.options.includes(w);for(let w=1;w<=z.value;w++){const $=J.value+"/"+ue(w);u[w]=v($)}return u}),pe=q(()=>{const u={};if(e.events===void 0)for(let v=1;v<=z.value;v++)u[v]=!1;else{const v=typeof e.events=="function"?e.events:w=>e.events.includes(w);for(let w=1;w<=z.value;w++){const $=J.value+"/"+ue(w);u[w]=v($)===!0&&Je.value($)}}return u}),ct=q(()=>{let u,v;const{year:w,month:$}=m.value;if(e.calendar!=="persian")u=new Date(w,$-1,1),v=new Date(w,$-1,0).getDate();else{const O=ao(w,$,1);u=new Date(O.gy,O.gm-1,O.gd);let le=$-1,Y=w;le===0&&(le=12,Y--),v=$t(Y,le)}return{days:u.getDay()-we.value-1,endDay:v}}),ze=q(()=>{const u=[],{days:v,endDay:w}=ct.value,$=v<0?v+7:v;if($<6)for(let Y=w-$;Y<=w;Y++)u.push({i:Y,fill:!0});const O=u.length;for(let Y=1;Y<=z.value;Y++){const X={i:Y,event:pe.value[Y],classes:[]};Se.value[Y]===!0&&(X.in=!0,X.flat=!0),u.push(X)}if(G.value[J.value]!==void 0&&G.value[J.value].forEach(Y=>{const X=O+Y-1;Object.assign(u[X],{selected:!0,unelevated:!0,flat:!1,color:k.value,textColor:H.value})}),ve.value[J.value]!==void 0&&ve.value[J.value].forEach(Y=>{if(Y.from!==void 0){const X=O+Y.from-1,fe=O+(Y.to||z.value)-1;for(let rn=X;rn<=fe;rn++)Object.assign(u[rn],{range:Y.range,unelevated:!0,color:k.value,textColor:H.value});Object.assign(u[X],{rangeFrom:!0,flat:!1}),Y.to!==void 0&&Object.assign(u[fe],{rangeTo:!0,flat:!1})}else if(Y.to!==void 0){const X=O+Y.to-1;for(let fe=O;fe<=X;fe++)Object.assign(u[fe],{range:Y.range,unelevated:!0,color:k.value,textColor:H.value});Object.assign(u[X],{flat:!1,rangeTo:!0})}else{const X=O+z.value-1;for(let fe=O;fe<=X;fe++)Object.assign(u[fe],{range:Y.range,unelevated:!0,color:k.value,textColor:H.value})}}),re.value!==void 0){const Y=O+re.value.from-1,X=O+re.value.to-1;for(let fe=Y;fe<=X;fe++)u[fe].color=k.value,u[fe].editRange=!0;re.value.includeFrom===!0&&(u[Y].editRangeFrom=!0),re.value.includeTo===!0&&(u[X].editRangeTo=!0)}m.value.year===_.value.year&&m.value.month===_.value.month&&(u[O+_.value.day-1].today=!0);const le=u.length%7;if(le>0){const Y=7-le;for(let X=1;X<=Y;X++)u.push({i:X,fill:!0})}return u.forEach(Y=>{let X="q-date__calendar-item ";Y.fill===!0?X+="q-date__calendar-item--fill":(X+=`q-date__calendar-item--${Y.in===!0?"in":"out"}`,Y.range!==void 0&&(X+=` q-date__range${Y.rangeTo===!0?"-to":Y.rangeFrom===!0?"-from":""}`),Y.editRange===!0&&(X+=` q-date__edit-range${Y.editRangeFrom===!0?"-from":""}${Y.editRangeTo===!0?"-to":""}`),(Y.range!==void 0||Y.editRange===!0)&&(X+=` text-${Y.color}`)),Y.classes=X}),u}),wt=q(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});ne(()=>e.modelValue,u=>{if(f===u)f=0;else{const{year:v,month:w}=Hn(F.value,L.value);dt(v,w)}}),ne(E,()=>{T.value!==null&&o.$el.contains(document.activeElement)===!0&&T.value.focus()}),ne(()=>m.value.year,u=>{n("navigation",{year:u,month:m.value.month})}),ne(()=>m.value.month,u=>{n("navigation",{year:m.value.year,month:u})}),ne(M,u=>{zn(u,L.value,"mask"),F.value=u}),ne(C,u=>{zn(F.value,u,"locale"),L.value=u});function xt(){const u=_.value,v=G.value[Ke(u)];(v===void 0||v.includes(u.day)===!1)&&tn(u),Jt(u.year,u.month)}function Cr(u){fo(u)===!0&&(E.value=u)}function kr(u,v){["month","year"].includes(u)&&(u==="month"?Nn:en)(v===!0?-1:1)}function Jt(u,v){E.value="Calendar",dt(u,v)}function Mr(u,v){if(e.range===!1||!u){h.value=null;return}const w=Object.assign({...m.value},u),$=v!==void 0?Object.assign({...m.value},v):w;h.value={init:w,initHash:Ue(w),final:$,finalHash:Ue($)},Jt(w.year,w.month)}function Vn(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Qt(u,v,w){return Ya(u,v,w,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Hn(u,v){const w=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(w.length===0)return $n();const $=w[w.length-1],O=Qt($.from!==void 0?$.from:$,u,v);return O.dateHash===null?$n():O}function $n(){let u,v;if(e.defaultYearMonth!==void 0){const w=e.defaultYearMonth.split("/");u=parseInt(w[0],10),v=parseInt(w[1],10)}else{const w=_.value!==void 0?_.value:c();u=w.year,v=w.month}return{year:u,month:v,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:u+"/"+ue(v)+"/01"}}function Nn(u){let v=m.value.year,w=Number(m.value.month)+u;w===13?(w=1,v++):w===0&&(w=12,v--),dt(v,w),P.value===!0&&At("month")}function en(u){const v=Number(m.value.year)+u;dt(v,m.value.month),P.value===!0&&At("year")}function Sr(u){dt(u,m.value.month),E.value=e.defaultView==="Years"?"Months":"Calendar",P.value===!0&&At("year")}function Dr(u){dt(m.value.year,u),E.value="Calendar",P.value===!0&&At("month")}function Er(u,v){const w=G.value[v];(w!==void 0&&w.includes(u.day)===!0?nn:tn)(u)}function Qe(u){return{year:u.year,month:u.month,day:u.day}}function dt(u,v){V.value!==null&&u<=V.value.year&&(u=V.value.year,v<V.value.month&&(v=V.value.month)),N.value!==null&&u>=N.value.year&&(u=N.value.year,v>N.value.month&&(v=N.value.month));const w=u+"/"+ue(v)+"/01";w!==m.value.dateHash&&(p.value=m.value.dateHash<w==(r.lang.rtl!==!0)?"left":"right",u!==m.value.year&&(b.value=p.value),Ee(()=>{A.value=u-u%et-(u<0?et:0),Object.assign(m.value,{year:u,month:v,day:1,dateHash:w})}))}function jn(u,v,w){const $=u!==null&&u.length===1&&e.multiple===!1?u[0]:u;f=$;const{reason:O,details:le}=Yn(v,w);n("update:modelValue",$,O,le)}function At(u){const v=x.value[0]!==void 0&&x.value[0].dateHash!==null?{...x.value[0]}:{...m.value};Ee(()=>{v.year=m.value.year,v.month=m.value.month;const w=e.calendar!=="persian"?new Date(v.year,v.month,0).getDate():$t(v.year,v.month);v.day=Math.min(Math.max(1,v.day),w);const $=ft(v);f=$;const{details:O}=Yn("",v);n("update:modelValue",$,u,O)})}function Yn(u,v){return v.from!==void 0?{reason:`${u}-range`,details:{...Qe(v.target),from:Qe(v.from),to:Qe(v.to)}}:{reason:`${u}-day`,details:Qe(v)}}function ft(u,v,w){return u.from!==void 0?{from:U.value(u.from,v,w),to:U.value(u.to,v,w)}:U.value(u,v,w)}function tn(u){let v;if(e.multiple===!0)if(u.from!==void 0){const w=Ue(u.from),$=Ue(u.to),O=x.value.filter(Y=>Y.dateHash<w||Y.dateHash>$),le=R.value.filter(({from:Y,to:X})=>X.dateHash<w||Y.dateHash>$);v=O.concat(le).concat(u).map(Y=>ft(Y))}else{const w=te.value.slice();w.push(ft(u)),v=w}else v=ft(u);jn(v,"add",u)}function nn(u){if(e.noUnset===!0)return;let v=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const w=ft(u);u.from!==void 0?v=e.modelValue.filter($=>$.from!==void 0?$.from!==w.from&&$.to!==w.to:!0):v=e.modelValue.filter($=>$!==w),v.length===0&&(v=null)}jn(v,"remove",u)}function zn(u,v,w){const $=x.value.concat(R.value).map(O=>ft(O,u,v)).filter(O=>O.from!==void 0?O.from.dateHash!==null&&O.to.dateHash!==null:O.dateHash!==null);n("update:modelValue",(e.multiple===!0?$:$[0])||null,w)}function Tr(){if(e.minimal!==!0)return I("div",{class:"q-date__header "+s.value},[I("div",{class:"relative-position"},[I(je,{name:"q-transition--fade"},()=>I("div",{key:"h-yr-"+K.value,class:"q-date__header-subtitle q-date__header-link "+(E.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...l("vY",{onClick(){E.value="Years"},onKeyup(u){u.keyCode===13&&(E.value="Years")}})},[K.value]))]),I("div",{class:"q-date__header-title relative-position flex no-wrap"},[I("div",{class:"relative-position col"},[I(je,{name:"q-transition--fade"},()=>I("div",{key:"h-sub"+oe.value,class:"q-date__header-title-label q-date__header-link "+(E.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...l("vC",{onClick(){E.value="Calendar"},onKeyup(u){u.keyCode===13&&(E.value="Calendar")}})},[oe.value]))]),e.todayBtn===!0?I(Be,{class:"q-date__header-today self-start",icon:r.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:xt}):null])])}function on({label:u,type:v,key:w,dir:$,goTo:O,boundaries:le,cls:Y}){return[I("div",{class:"row items-center q-date__arrow"},[I(Be,{round:!0,dense:!0,size:"sm",flat:!0,icon:se.value[0],tabindex:i.value,disable:le.prev===!1,...l("go-#"+v,{onClick(){O(-1)}})})]),I("div",{class:"relative-position overflow-hidden flex flex-center"+Y},[I(je,{name:"q-transition--jump-"+$},()=>I("div",{key:w},[I(Be,{flat:!0,dense:!0,noCaps:!0,label:u,tabindex:i.value,...l("view#"+v,{onClick:()=>{E.value=v}})})]))]),I("div",{class:"row items-center q-date__arrow"},[I(Be,{round:!0,dense:!0,size:"sm",flat:!0,icon:se.value[1],tabindex:i.value,disable:le.next===!1,...l("go+#"+v,{onClick(){O(1)}})})])]}const Ar={Calendar:()=>[I("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[I("div",{class:"q-date__navigation row items-center no-wrap"},on({label:L.value.months[m.value.month-1],type:"Months",key:m.value.month,dir:p.value,goTo:Nn,boundaries:W.value.month,cls:" col"}).concat(on({label:m.value.year,type:"Years",key:m.value.year,dir:b.value,goTo:en,boundaries:W.value.year,cls:""}))),I("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ye.value.map(u=>I("div",{class:"q-date__calendar-item"},[I("div",u)]))),I("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[I(je,{name:"q-transition--slide-"+p.value},()=>I("div",{key:J.value,class:"q-date__calendar-days fit"},ze.value.map(u=>I("div",{class:u.classes},[u.in===!0?I(Be,{class:u.today===!0?"q-date__today":"",dense:!0,flat:u.flat,unelevated:u.unelevated,color:u.color,textColor:u.textColor,label:u.i,tabindex:i.value,...l("day#"+u.i,{onClick:()=>{Pr(u.i)},onMouseover:()=>{Br(u.i)}})},u.event!==!1?()=>I("div",{class:"q-date__event bg-"+u.event}):null):I("div",""+u.i)]))))])])],Months(){const u=m.value.year===_.value.year,v=$=>V.value!==null&&m.value.year===V.value.year&&V.value.month>$||N.value!==null&&m.value.year===N.value.year&&N.value.month<$,w=L.value.monthsShort.map(($,O)=>{const le=m.value.month===O+1;return I("div",{class:"q-date__months-item flex flex-center"},[I(Be,{class:u===!0&&_.value.month===O+1?"q-date__today":null,flat:le!==!0,label:$,unelevated:le,color:le===!0?k.value:null,textColor:le===!0?H.value:null,tabindex:i.value,disable:v(O+1),...l("month#"+O,{onClick:()=>{Dr(O+1)}})})])});return e.yearsInMonthView===!0&&w.unshift(I("div",{class:"row no-wrap full-width"},[on({label:m.value.year,type:"Years",key:m.value.year,dir:b.value,goTo:en,boundaries:W.value.year,cls:" col"})])),I("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},w)},Years(){const u=A.value,v=u+et,w=[],$=O=>V.value!==null&&V.value.year>O||N.value!==null&&N.value.year<O;for(let O=u;O<=v;O++){const le=m.value.year===O;w.push(I("div",{class:"q-date__years-item flex flex-center"},[I(Be,{key:"yr"+O,class:_.value.year===O?"q-date__today":null,flat:!le,label:O,dense:!0,unelevated:le,color:le===!0?k.value:null,textColor:le===!0?H.value:null,tabindex:i.value,disable:$(O),...l("yr#"+O,{onClick:()=>{Sr(O)}})})]))}return I("div",{class:"q-date__view q-date__years flex flex-center"},[I("div",{class:"col-auto"},[I(Be,{round:!0,dense:!0,flat:!0,icon:se.value[0],tabindex:i.value,disable:$(u),...l("y-",{onClick:()=>{A.value-=et}})})]),I("div",{class:"q-date__years-content col self-stretch row items-center"},w),I("div",{class:"col-auto"},[I(Be,{round:!0,dense:!0,flat:!0,icon:se.value[1],tabindex:i.value,disable:$(v),...l("y+",{onClick:()=>{A.value+=et}})})])])}};function Pr(u){const v={...m.value,day:u};if(e.range===!1){Er(v,J.value);return}if(h.value===null){const w=ze.value.find(O=>O.fill!==!0&&O.i===u);if(e.noUnset!==!0&&w.range!==void 0){nn({target:v,from:w.range.from,to:w.range.to});return}if(w.selected===!0){nn(v);return}const $=Ue(v);h.value={init:v,initHash:$,final:v,finalHash:$},n("rangeStart",Qe(v))}else{const w=h.value.initHash,$=Ue(v),O=w<=$?{from:h.value.init,to:v}:{from:v,to:h.value.init};h.value=null,tn(w===$?v:{target:v,...O}),n("rangeEnd",{from:Qe(O.from),to:Qe(O.to)})}}function Br(u){if(h.value!==null){const v={...m.value,day:u};Object.assign(h.value,{final:v,finalHash:Ue(v)})}}return Object.assign(o,{setToday:xt,setView:Cr,offsetCalendar:kr,setCalendarTo:Jt,setEditingRange:Mr}),()=>{const u=[I("div",{class:"q-date__content col relative-position"},[I(je,{name:"q-transition--fade"},Ar[E.value])])],v=We(t.default);return v!==void 0&&u.push(I("div",{class:"q-date__actions"},v)),e.name!==void 0&&e.disable!==!0&&y(u,"push"),I("div",{class:j.value,...wt.value},[Tr(),I("div",{ref:T,class:"q-date__main col column",tabindex:-1},u)])}}});function Za(e,t,n){let o;function r(){o!==void 0&&(Kn.remove(o),o=void 0)}return _e(()=>{e.value===!0&&r()}),{removeFromHistory:r,addToHistory(){o={condition:()=>n.value===!0,handler:t},Kn.add(o)}}}function Go(){let e=null;const t=Me();function n(){e!==null&&(clearTimeout(e),e=null)}return Pn(n),_e(n),{removeTimeout:n,registerTimeout(o,r){n(),Vo(t)===!1&&(e=setTimeout(o,r))}}}function Xo(){let e;const t=Me();function n(){e=void 0}return Pn(n),_e(n),{removeTick:n,registerTick(o){e=o,Ee(()=>{e===o&&(Vo(t)===!1&&e(),e=void 0)})}}}const Jo={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Qo=["beforeShow","show","beforeHide","hide"];function er({showing:e,canShow:t,hideOnRouteChange:n,handleShow:o,handleHide:r,processOnMount:a}){const l=Me(),{props:i,emit:s,proxy:d}=l;let c;function f(C){e.value===!0?T(C):S(C)}function S(C){if(i.disable===!0||C!==void 0&&C.qAnchorHandled===!0||t!==void 0&&t(C)!==!0)return;const _=i["onUpdate:modelValue"]!==void 0;_===!0&&(s("update:modelValue",!0),c=C,Ee(()=>{c===C&&(c=void 0)})),(i.modelValue===null||_===!1)&&y(C)}function y(C){e.value!==!0&&(e.value=!0,s("beforeShow",C),o!==void 0?o(C):s("show",C))}function T(C){if(i.disable===!0)return;const _=i["onUpdate:modelValue"]!==void 0;_===!0&&(s("update:modelValue",!1),c=C,Ee(()=>{c===C&&(c=void 0)})),(i.modelValue===null||_===!1)&&F(C)}function F(C){e.value!==!1&&(e.value=!1,s("beforeHide",C),r!==void 0?r(C):s("hide",C))}function L(C){i.disable===!0&&C===!0?i["onUpdate:modelValue"]!==void 0&&s("update:modelValue",!1):C===!0!==e.value&&(C===!0?y:F)(c)}ne(()=>i.modelValue,L),n!==void 0&&Jr(l)===!0&&ne(()=>d.$route.fullPath,()=>{n.value===!0&&e.value===!0&&T()}),a===!0&&Tt(()=>{L(i.modelValue)});const M={show:S,hide:T,toggle:f};return Object.assign(d,M),M}const tr={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function nr(e,t=()=>{},n=()=>{}){return{transitionProps:q(()=>{const o=`q-transition--${e.transitionShow||t()}`,r=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${o}-enter-from`,enterActiveClass:`${o}-enter-active`,enterToClass:`${o}-enter-to`,leaveFromClass:`${r}-leave-from`,leaveActiveClass:`${r}-leave-active`,leaveToClass:`${r}-leave-to`}}),transitionStyle:q(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}let Wa=1,Ga=document.body;function Xa(e,t){const n=document.createElement("div");if(n.id=t!==void 0?`q-portal--${t}--${Wa++}`:e,Zn.globalNodes!==void 0){const o=Zn.globalNodes.class;o!==void 0&&(n.className=o)}return Ga.appendChild(n),n}function Ja(e){e.remove()}const mt=[];function Qa(e){return mt.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function or(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return Ht(e)}else if(e.__qPortal===!0){const n=Ht(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=Ht(e)}while(e!=null)}function el(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=or(e,t);continue}e.hide(t)}e=Ht(e)}}function tl(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function rr(e,t,n,o){const r=ee(!1),a=ee(!1);let l=null;const i={},s=o==="dialog"&&tl(e);function d(f){if(f===!0){no(i),a.value=!0;return}a.value=!1,r.value===!1&&(s===!1&&l===null&&(l=Xa(!1,o)),r.value=!0,mt.push(e.proxy),fa(i))}function c(f){if(a.value=!1,f!==!0)return;no(i),r.value=!1;const S=mt.indexOf(e.proxy);S!==-1&&mt.splice(S,1),l!==null&&(Ja(l),l=null)}return Hr(()=>{c(!0)}),e.proxy.__qPortal=!0,Ut(e.proxy,"contentEl",()=>t.value),{showPortal:d,hidePortal:c,portalIsActive:r,portalIsAccessible:a,renderPortal:()=>s===!0?n():r.value===!0?[I($r,{to:l},n())]:void 0}}let kt=0,cn,dn,St,fn=!1,ho,vo,go,tt=null;function nl(e){ol(e)&&An(e)}function ol(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Nr(e),n=e.shiftKey&&!e.deltaX,o=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),r=n||o?e.deltaY:e.deltaX;for(let a=0;a<t.length;a++){const l=t[a];if(na(l,o))return o?r<0&&l.scrollTop===0?!0:r>0&&l.scrollTop+l.clientHeight===l.scrollHeight:r<0&&l.scrollLeft===0?!0:r>0&&l.scrollLeft+l.clientWidth===l.scrollWidth}return!0}function mo(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function It(e){fn!==!0&&(fn=!0,requestAnimationFrame(()=>{fn=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:o}=document.scrollingElement;(St===void 0||t!==window.innerHeight)&&(St=n-t,document.scrollingElement.scrollTop=o),o>St&&(document.scrollingElement.scrollTop-=Math.ceil((o-St)/8))}))}function po(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:o,overflowX:r}=window.getComputedStyle(t);cn=ea(window),dn=ta(window),ho=t.style.left,vo=t.style.top,go=window.location.href,t.style.left=`-${cn}px`,t.style.top=`-${dn}px`,r!=="hidden"&&(r==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),o!=="hidden"&&(o==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,Re.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",It,Ie.passiveCapture),window.visualViewport.addEventListener("scroll",It,Ie.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",mo,Ie.passiveCapture))}Re.is.desktop===!0&&Re.is.mac===!0&&window[`${e}EventListener`]("wheel",nl,Ie.notPassive),e==="remove"&&(Re.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",It,Ie.passiveCapture),window.visualViewport.removeEventListener("scroll",It,Ie.passiveCapture)):window.removeEventListener("scroll",mo,Ie.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=ho,t.style.top=vo,window.location.href===go&&window.scrollTo(cn,dn),St=void 0)}function rl(e){let t="add";if(e===!0){if(kt++,tt!==null){clearTimeout(tt),tt=null;return}if(kt>1)return}else{if(kt===0||(kt--,kt>0))return;if(t="remove",Re.is.ios===!0&&Re.is.nativeMobile===!0){tt!==null&&clearTimeout(tt),tt=setTimeout(()=>{po(t),tt=null},100);return}}po(t)}function al(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,rl(t))}}}const at=[];let pt;function ll(e){pt=e.keyCode===27}function il(){pt===!0&&(pt=!1)}function sl(e){pt===!0&&(pt=!1,Bn(e,27)===!0&&at[at.length-1](e))}function ar(e){window[e]("keydown",ll),window[e]("blur",il),window[e]("keyup",sl),pt=!1}function lr(e){Re.is.desktop===!0&&(at.push(e),at.length===1&&ar("addEventListener"))}function jt(e){const t=at.indexOf(e);t>-1&&(at.splice(t,1),at.length===0&&ar("removeEventListener"))}const lt=[];function ir(e){lt[lt.length-1](e)}function sr(e){Re.is.desktop===!0&&(lt.push(e),lt.length===1&&document.body.addEventListener("focusin",ir))}function Sn(e){const t=lt.indexOf(e);t>-1&&(lt.splice(t,1),lt.length===0&&document.body.removeEventListener("focusin",ir))}let Ft=0;const ul={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},yo={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var cl=bt({name:"QDialog",inheritAttrs:!1,props:{...Jo,...tr,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...Qo,"shake","click","escapeKey"],setup(e,{slots:t,emit:n,attrs:o}){const r=Me(),a=ee(null),l=ee(!1),i=ee(!1);let s=null,d=null,c,f;const S=q(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:y}=al(),{registerTimeout:T}=Go(),{registerTick:F,removeTick:L}=Xo(),{transitionProps:M,transitionStyle:C}=nr(e,()=>yo[e.position][0],()=>yo[e.position][1]),{showPortal:_,hidePortal:m,portalIsAccessible:E,renderPortal:g}=rr(r,a,Ce,"dialog"),{hide:p}=er({showing:l,hideOnRouteChange:S,handleShow:H,handleHide:P,processOnMount:!0}),{addToHistory:b,removeFromHistory:D}=Za(l,p,S),A=q(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${ul[e.position]}`+(i.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),h=q(()=>l.value===!0&&e.seamless!==!0),j=q(()=>e.autoClose===!0?{onClick:B}:{}),k=q(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${h.value===!0?"modal":"seamless"}`,o.class]);ne(()=>e.maximized,K=>{l.value===!0&&U(K)}),ne(h,K=>{y(K),K===!0?(sr(Z),lr(R)):(Sn(Z),jt(R))});function H(K){b(),d=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,U(e.maximized),_(),i.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),F(te)):L(),T(()=>{if(r.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:se,bottom:we}=document.activeElement.getBoundingClientRect(),{innerHeight:Ye}=window,z=window.visualViewport!==void 0?window.visualViewport.height:Ye;se>0&&we>z/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-z,we>=Ye?1/0:Math.ceil(document.scrollingElement.scrollTop+we-z/2))),document.activeElement.scrollIntoView()}f=!0,a.value.click(),f=!1}_(!0),i.value=!1,n("show",K)},e.transitionDuration)}function P(K){L(),D(),Q(!0),i.value=!0,m(),d!==null&&(((K&&K.type.indexOf("key")===0?d.closest('[tabindex]:not([tabindex^="-"])'):void 0)||d).focus(),d=null),T(()=>{m(!0),i.value=!1,n("hide",K)},e.transitionDuration)}function te(K){Kt(()=>{let se=a.value;se===null||se.contains(document.activeElement)===!0||(se=(K!==""?se.querySelector(K):null)||se.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||se.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||se.querySelector("[autofocus], [data-autofocus]")||se,se.focus({preventScroll:!0}))})}function x(K){K&&typeof K.focus=="function"?K.focus({preventScroll:!0}):te(),n("shake");const se=a.value;se!==null&&(se.classList.remove("q-animate--scale"),se.classList.add("q-animate--scale"),s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,a.value!==null&&(se.classList.remove("q-animate--scale"),te())},170))}function R(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&x():(n("escapeKey"),p()))}function Q(K){s!==null&&(clearTimeout(s),s=null),(K===!0||l.value===!0)&&(U(!1),e.seamless!==!0&&(y(!1),Sn(Z),jt(R))),K!==!0&&(d=null)}function U(K){K===!0?c!==!0&&(Ft<1&&document.body.classList.add("q-body--dialog"),Ft++,c=!0):c===!0&&(Ft<2&&document.body.classList.remove("q-body--dialog"),Ft--,c=!1)}function B(K){f!==!0&&(p(K),n("click",K))}function oe(K){e.persistent!==!0&&e.noBackdropDismiss!==!0?p(K):e.noShake!==!0&&x()}function Z(K){e.allowFocusOutside!==!0&&E.value===!0&&Ho(a.value,K.target)!==!0&&te('[tabindex]:not([tabindex="-1"])')}Object.assign(r.proxy,{focus:te,shake:x,__updateRefocusTarget(K){d=K||null}}),_e(Q);function Ce(){return I("div",{role:"dialog","aria-modal":h.value===!0?"true":"false",...o,class:k.value},[I(je,{name:"q-transition--fade",appear:!0},()=>h.value===!0?I("div",{class:"q-dialog__backdrop fixed-full",style:C.value,"aria-hidden":"true",tabindex:-1,onClick:oe}):null),I(je,M.value,()=>l.value===!0?I("div",{ref:a,class:A.value,style:C.value,tabindex:-1,...j.value},We(t.default)):null)])}return g}});function dl(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),jr.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const ur={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function cr({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:o,proxy:r,emit:a}=Me(),l=ee(null);let i=null;function s(y){return l.value===null?!1:y===void 0||y.touches===void 0||y.touches.length<=1}const d={};n===void 0&&(Object.assign(d,{hide(y){r.hide(y)},toggle(y){r.toggle(y),y.qAnchorHandled=!0},toggleKey(y){Bn(y,13)===!0&&d.toggle(y)},contextClick(y){r.hide(y),nt(y),Ee(()=>{r.show(y),y.qAnchorHandled=!0})},prevent:nt,mobileTouch(y){if(d.mobileCleanup(y),s(y)!==!0)return;r.hide(y),l.value.classList.add("non-selectable");const T=y.target;Wn(d,"anchor",[[T,"touchmove","mobileCleanup","passive"],[T,"touchend","mobileCleanup","passive"],[T,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","prevent","notPassive"]]),i=setTimeout(()=>{i=null,r.show(y),y.qAnchorHandled=!0},300)},mobileCleanup(y){l.value.classList.remove("non-selectable"),i!==null&&(clearTimeout(i),i=null),e.value===!0&&y!==void 0&&dl()}}),n=function(y=o.contextMenu){if(o.noParentEvent===!0||l.value===null)return;let T;y===!0?r.$q.platform.is.mobile===!0?T=[[l.value,"touchstart","mobileTouch","passive"]]:T=[[l.value,"mousedown","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:T=[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],Wn(d,"anchor",T)});function c(){Yr(d,"anchor")}function f(y){for(l.value=y;l.value.classList.contains("q-anchor--skip");)l.value=l.value.parentNode;n()}function S(){if(o.target===!1||o.target===""||r.$el.parentNode===null)l.value=null;else if(o.target===!0)f(r.$el.parentNode);else{let y=o.target;if(typeof o.target=="string")try{y=document.querySelector(o.target)}catch{y=void 0}y!=null?(l.value=y.$el||y,n()):(l.value=null,console.error(`Anchor: target "${o.target}" not found`))}}return ne(()=>o.contextMenu,y=>{l.value!==null&&(c(),n(y))}),ne(()=>o.target,()=>{l.value!==null&&c(),S()}),ne(()=>o.noParentEvent,y=>{l.value!==null&&(y===!0?c():n())}),Tt(()=>{S(),t!==!0&&o.modelValue===!0&&l.value===null&&a("update:modelValue",!1)}),_e(()=>{i!==null&&clearTimeout(i),c()}),{anchorEl:l,canShow:s,anchorEvents:d}}function fl(e,t){const n=ee(null);let o;function r(i,s){const d=`${s!==void 0?"add":"remove"}EventListener`,c=s!==void 0?s:o;i!==window&&i[d]("scroll",c,Ie.passive),window[d]("scroll",c,Ie.passive),o=s}function a(){n.value!==null&&(r(n.value),n.value=null)}const l=ne(()=>e.noParentEvent,()=>{n.value!==null&&(a(),t())});return _e(l),{localScrollTarget:n,unconfigureScrollTarget:a,changeScrollEvent:r}}const{notPassiveCapture:Yt}=Ie,it=[];function zt(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=mt.length-1;for(;n>=0;){const o=mt[n].$;if(o.type.name!=="QDialog")break;if(o.props.seamless!==!0)return;n--}for(let o=it.length-1;o>=0;o--){const r=it[o];if((r.anchorEl.value===null||r.anchorEl.value.contains(t)===!1)&&(t===document.body||r.innerRef.value!==null&&r.innerRef.value.contains(t)===!1))e.qClickOutside=!0,r.onClickOutside(e);else return}}function hl(e){it.push(e),it.length===1&&(document.addEventListener("mousedown",zt,Yt),document.addEventListener("touchstart",zt,Yt))}function bo(e){const t=it.findIndex(n=>n===e);t>-1&&(it.splice(t,1),it.length===0&&(document.removeEventListener("mousedown",zt,Yt),document.removeEventListener("touchstart",zt,Yt)))}let wo,xo;function Co(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function vl(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Dn={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Dn[`${e}#ltr`]=e,Dn[`${e}#rtl`]=e});function ko(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:Dn[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function gl(e,t){let{top:n,left:o,right:r,bottom:a,width:l,height:i}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],o-=t[0],a+=t[1],r+=t[0],l+=t[0],i+=t[1]),{top:n,bottom:a,height:i,left:o,right:r,width:l,middle:o+(r-o)/2,center:n+(a-n)/2}}function ml(e,t,n){let{top:o,left:r}=e.getBoundingClientRect();return o+=t.top,r+=t.left,n!==void 0&&(o+=n[1],r+=n[0]),{top:o,bottom:o+1,height:1,left:r,right:r+1,width:1,middle:r,center:o}}function pl(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function Mo(e,t,n){return{top:e[n.anchorOrigin.vertical]-t[n.selfOrigin.vertical],left:e[n.anchorOrigin.horizontal]-t[n.selfOrigin.horizontal]}}function yl(e){if(Re.is.ios===!0&&window.visualViewport!==void 0){const i=document.body.style,{offsetLeft:s,offsetTop:d}=window.visualViewport;s!==wo&&(i.setProperty("--q-pe-left",s+"px"),wo=s),d!==xo&&(i.setProperty("--q-pe-top",d+"px"),xo=d)}const{scrollLeft:t,scrollTop:n}=e.el,o=e.absoluteOffset===void 0?gl(e.anchorEl,e.cover===!0?[0,0]:e.offset):ml(e.anchorEl,e.absoluteOffset,e.offset);let r={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(r.minWidth=o.width+"px",e.cover===!0&&(r.minHeight=o.height+"px")),Object.assign(e.el.style,r);const a=pl(e.el);let l=Mo(o,a,e);if(e.absoluteOffset===void 0||e.offset===void 0)hn(l,o,a,e.anchorOrigin,e.selfOrigin);else{const{top:i,left:s}=l;hn(l,o,a,e.anchorOrigin,e.selfOrigin);let d=!1;if(l.top!==i){d=!0;const c=2*e.offset[1];o.center=o.top-=c,o.bottom-=c+2}if(l.left!==s){d=!0;const c=2*e.offset[0];o.middle=o.left-=c,o.right-=c+2}d===!0&&(l=Mo(o,a,e),hn(l,o,a,e.anchorOrigin,e.selfOrigin))}r={top:l.top+"px",left:l.left+"px"},l.maxHeight!==void 0&&(r.maxHeight=l.maxHeight+"px",o.height>l.maxHeight&&(r.minHeight=r.maxHeight)),l.maxWidth!==void 0&&(r.maxWidth=l.maxWidth+"px",o.width>l.maxWidth&&(r.minWidth=r.maxWidth)),Object.assign(e.el.style,r),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==t&&(e.el.scrollLeft=t)}function hn(e,t,n,o,r){const a=n.bottom,l=n.right,i=oa(),s=window.innerHeight-i,d=document.body.clientWidth;if(e.top<0||e.top+a>s)if(r.vertical==="center")e.top=t[o.vertical]>s/2?Math.max(0,s-a):0,e.maxHeight=Math.min(a,s);else if(t[o.vertical]>s/2){const c=Math.min(s,o.vertical==="center"?t.center:o.vertical===r.vertical?t.bottom:t.top);e.maxHeight=Math.min(a,c),e.top=Math.max(0,c-a)}else e.top=Math.max(0,o.vertical==="center"?t.center:o.vertical===r.vertical?t.top:t.bottom),e.maxHeight=Math.min(a,s-e.top);if(e.left<0||e.left+l>d)if(e.maxWidth=Math.min(l,d),r.horizontal==="middle")e.left=t[o.horizontal]>d/2?Math.max(0,d-l):0;else if(t[o.horizontal]>d/2){const c=Math.min(d,o.horizontal==="middle"?t.middle:o.horizontal===r.horizontal?t.right:t.left);e.maxWidth=Math.min(l,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,o.horizontal==="middle"?t.middle:o.horizontal===r.horizontal?t.left:t.right),e.maxWidth=Math.min(l,d-e.left)}var bl=bt({name:"QMenu",inheritAttrs:!1,props:{...ur,...Jo,..._n,...tr,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Co},self:{type:String,validator:Co},offset:{type:Array,validator:vl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Qo,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:o}){let r=null,a,l,i;const s=Me(),{proxy:d}=s,{$q:c}=d,f=ee(null),S=ee(!1),y=q(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),T=qn(e,c),{registerTick:F,removeTick:L}=Xo(),{registerTimeout:M}=Go(),{transitionProps:C,transitionStyle:_}=nr(e),{localScrollTarget:m,changeScrollEvent:E,unconfigureScrollTarget:g}=fl(e,Z),{anchorEl:p,canShow:b}=cr({showing:S}),{hide:D}=er({showing:S,canShow:b,handleShow:U,handleHide:B,hideOnRouteChange:y,processOnMount:!0}),{showPortal:A,hidePortal:h,renderPortal:j}=rr(s,f,Ye,"menu"),k={anchorEl:p,innerRef:f,onClickOutside(z){if(e.persistent!==!0&&S.value===!0)return D(z),(z.type==="touchstart"||z.target.classList.contains("q-dialog__backdrop"))&&An(z),!0}},H=q(()=>ko(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),P=q(()=>e.cover===!0?H.value:ko(e.self||"top start",c.lang.rtl)),te=q(()=>(e.square===!0?" q-menu--square":"")+(T.value===!0?" q-menu--dark q-dark":"")),x=q(()=>e.autoClose===!0?{onClick:Ce}:{}),R=q(()=>S.value===!0&&e.persistent!==!0);ne(R,z=>{z===!0?(lr(se),hl(k)):(jt(se),bo(k))});function Q(){Kt(()=>{let z=f.value;z&&z.contains(document.activeElement)!==!0&&(z=z.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||z.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||z.querySelector("[autofocus], [data-autofocus]")||z,z.focus({preventScroll:!0}))})}function U(z){if(r=e.noRefocus===!1?document.activeElement:null,sr(K),A(),Z(),a=void 0,z!==void 0&&(e.touchPosition||e.contextMenu)){const Je=zr(z);if(Je.left!==void 0){const{top:V,left:N}=p.value.getBoundingClientRect();a={left:Je.left-N,top:Je.top-V}}}l===void 0&&(l=ne(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,we)),e.noFocus!==!0&&document.activeElement.blur(),F(()=>{we(),e.noFocus!==!0&&Q()}),M(()=>{c.platform.is.ios===!0&&(i=e.autoClose,f.value.click()),we(),A(!0),n("show",z)},e.transitionDuration)}function B(z){L(),h(),oe(!0),r!==null&&(z===void 0||z.qClickOutside!==!0)&&(((z&&z.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),M(()=>{h(!0),n("hide",z)},e.transitionDuration)}function oe(z){a=void 0,l!==void 0&&(l(),l=void 0),(z===!0||S.value===!0)&&(Sn(K),g(),bo(k),jt(se)),z!==!0&&(r=null)}function Z(){(p.value!==null||e.scrollTarget!==void 0)&&(m.value=ra(p.value,e.scrollTarget),E(m.value,we))}function Ce(z){i!==!0?(or(d,z),n("click",z)):i=!1}function K(z){R.value===!0&&e.noFocus!==!0&&Ho(f.value,z.target)!==!0&&Q()}function se(z){n("escapeKey"),D(z)}function we(){const z=f.value;z===null||p.value===null||yl({el:z,offset:e.offset,anchorEl:p.value,anchorOrigin:H.value,selfOrigin:P.value,absoluteOffset:a,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Ye(){return I(je,C.value,()=>S.value===!0?I("div",{role:"menu",...o,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+te.value,o.class],style:[o.style,_.value],...x.value},We(t.default)):null)}return _e(oe),Object.assign(d,{focus:Q,updatePosition:we}),j}}),wl=bt({name:"QPopupProxy",props:{...ur,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:n,attrs:o}){const{proxy:r}=Me(),{$q:a}=r,l=ee(!1),i=ee(null),s=q(()=>parseInt(e.breakpoint,10)),{canShow:d}=cr({showing:l});function c(){return a.screen.width<s.value||a.screen.height<s.value?"dialog":"menu"}const f=ee(c()),S=q(()=>f.value==="menu"?{maxHeight:"99vh"}:{});ne(()=>c(),F=>{l.value!==!0&&(f.value=F)});function y(F){l.value=!0,n("show",F)}function T(F){l.value=!1,f.value=c(),n("hide",F)}return Object.assign(r,{show(F){d(F)===!0&&i.value.show(F)},hide(F){i.value.hide(F)},toggle(F){i.value.toggle(F)}}),Ut(r,"currentComponent",()=>({type:f.value,ref:i.value})),()=>{const F={ref:i,...S.value,...o,onShow:y,onHide:T};let L;return f.value==="dialog"?L=cl:(L=bl,Object.assign(F,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),I(L,F,t.default)}}}),xl=bt({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Me(),o=bn(Ur,ht);if(o===ht)return console.error("QPage needs to be a deep child of QLayout"),ht;if(bn(Kr,ht)===ht)return console.error("QPage needs to be child of QPageContainer"),ht;const a=q(()=>{const i=(o.header.space===!0?o.header.size:0)+(o.footer.space===!0?o.footer.size:0);if(typeof e.styleFn=="function"){const s=o.isContainer.value===!0?o.containerHeight.value:n.screen.height;return e.styleFn(i,s)}return{minHeight:o.isContainer.value===!0?o.containerHeight.value-i+"px":n.screen.height===0?i!==0?`calc(100vh - ${i}px)`:"100vh":n.screen.height-i+"px"}}),l=q(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>I("main",{class:l.value,style:a.value},We(t.default))}});function So(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Cl=Qr({name:"close-popup",beforeMount(e,{value:t}){const n={depth:So(t),handler(o){n.depth!==0&&setTimeout(()=>{const r=Qa(e);r!==void 0&&el(r,o,n.depth)})},handlerKey(o){Bn(o,13)===!0&&n.handler(o)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=So(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});function vn(e){return e===""?e:e==="true"||e=="1"}function kl(e,t){return new Promise((n,o)=>{var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var a=new FileReader;a.onloadend=function(){n(a.result)},a.readAsArrayBuffer(r.response)},r.open("GET",e),r.send()})}function qe(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Do(e,t){for(var n="",o=0,r=-1,a=0,l,i=0;i<=e.length;++i){if(i<e.length)l=e.charCodeAt(i);else{if(l===47)break;l=47}if(l===47){if(!(r===i-1||a===1))if(r!==i-1&&a===2){if(n.length<2||o!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var s=n.lastIndexOf("/");if(s!==n.length-1){s===-1?(n="",o=0):(n=n.slice(0,s),o=n.length-1-n.lastIndexOf("/")),r=i,a=0;continue}}else if(n.length===2||n.length===1){n="",o=0,r=i,a=0;continue}}t&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+e.slice(r+1,i):n=e.slice(r+1,i),o=i-r-1;r=i,a=0}else l===46&&a!==-1?++a:a=-1}return n}function Ml(e,t){var n=t.dir||t.root,o=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+o:n+e+o:o}var st={resolve:function(){for(var t="",n=!1,o,r=arguments.length-1;r>=-1&&!n;r--){var a;r>=0?a=arguments[r]:(o===void 0&&(o=process.cwd()),a=o),qe(a),a.length!==0&&(t=a+"/"+t,n=a.charCodeAt(0)===47)}return t=Do(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(qe(t),t.length===0)return".";var n=t.charCodeAt(0)===47,o=t.charCodeAt(t.length-1)===47;return t=Do(t,!n),t.length===0&&!n&&(t="."),t.length>0&&o&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return qe(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var o=arguments[n];qe(o),o.length>0&&(t===void 0?t=o:t+="/"+o)}return t===void 0?".":st.normalize(t)},relative:function(t,n){if(qe(t),qe(n),t===n||(t=st.resolve(t),n=st.resolve(n),t===n))return"";for(var o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var r=t.length,a=r-o,l=1;l<n.length&&n.charCodeAt(l)===47;++l);for(var i=n.length,s=i-l,d=a<s?a:s,c=-1,f=0;f<=d;++f){if(f===d){if(s>d){if(n.charCodeAt(l+f)===47)return n.slice(l+f+1);if(f===0)return n.slice(l+f)}else a>d&&(t.charCodeAt(o+f)===47?c=f:f===0&&(c=0));break}var S=t.charCodeAt(o+f),y=n.charCodeAt(l+f);if(S!==y)break;S===47&&(c=f)}var T="";for(f=o+c+1;f<=r;++f)(f===r||t.charCodeAt(f)===47)&&(T.length===0?T+="..":T+="/..");return T.length>0?T+n.slice(l+c):(l+=c,n.charCodeAt(l)===47&&++l,n.slice(l))},_makeLong:function(t){return t},dirname:function(t){if(qe(t),t.length===0)return".";for(var n=t.charCodeAt(0),o=n===47,r=-1,a=!0,l=t.length-1;l>=1;--l)if(n=t.charCodeAt(l),n===47){if(!a){r=l;break}}else a=!1;return r===-1?o?"/":".":o&&r===1?"//":t.slice(0,r)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');qe(t);var o=0,r=-1,a=!0,l;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var i=n.length-1,s=-1;for(l=t.length-1;l>=0;--l){var d=t.charCodeAt(l);if(d===47){if(!a){o=l+1;break}}else s===-1&&(a=!1,s=l+1),i>=0&&(d===n.charCodeAt(i)?--i===-1&&(r=l):(i=-1,r=s))}return o===r?r=s:r===-1&&(r=t.length),t.slice(o,r)}else{for(l=t.length-1;l>=0;--l)if(t.charCodeAt(l)===47){if(!a){o=l+1;break}}else r===-1&&(a=!1,r=l+1);return r===-1?"":t.slice(o,r)}},extname:function(t){qe(t);for(var n=-1,o=0,r=-1,a=!0,l=0,i=t.length-1;i>=0;--i){var s=t.charCodeAt(i);if(s===47){if(!a){o=i+1;break}continue}r===-1&&(a=!1,r=i+1),s===46?n===-1?n=i:l!==1&&(l=1):n!==-1&&(l=-1)}return n===-1||r===-1||l===0||l===1&&n===r-1&&n===o+1?"":t.slice(n,r)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return Ml("/",t)},parse:function(t){qe(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var o=t.charCodeAt(0),r=o===47,a;r?(n.root="/",a=1):a=0;for(var l=-1,i=0,s=-1,d=!0,c=t.length-1,f=0;c>=a;--c){if(o=t.charCodeAt(c),o===47){if(!d){i=c+1;break}continue}s===-1&&(d=!1,s=c+1),o===46?l===-1?l=c:f!==1&&(f=1):l!==-1&&(f=-1)}return l===-1||s===-1||f===0||f===1&&l===s-1&&l===i+1?s!==-1&&(i===0&&r?n.base=n.name=t.slice(1,s):n.base=n.name=t.slice(i,s)):(i===0&&r?(n.name=t.slice(1,l),n.base=t.slice(1,s)):(n.name=t.slice(i,l),n.base=t.slice(i,s)),n.ext=t.slice(l,s)),i>0?n.dir=t.slice(0,i-1):r&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};st.posix=st;const Sl=st.extname,dr=st.basename;class Dl{constructor(){let t=(()=>typeof global=="undefined")(),n="image/png",o="image/jpeg",r="image/jpeg",a="image/webp",l="application/pdf",i="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:t?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:t?{png:n,jpg:o,jpeg:r,webp:a}:{png:n,jpg:o,jpeg:r,pdf:l,svg:i},mimes:t?{[n]:"png",[o]:"jpg",[a]:"webp"}:{[n]:"png",[o]:"jpg",[l]:"pdf",[i]:"svg"}})}toMime(t){return this.formats[(t||"").replace(/^\./,"").toLowerCase()]}fromMime(t){return this.mimes[t]}}function El(e,{filename:t="",extension:n="",format:F,page:r,quality:a,matte:l,density:i,outline:s,archive:y}={}){var{fromMime:c,toMime:f,expected:S}=new Dl,y=y||"canvas",T=F||n.replace(/@\d+x$/i,"")||Sl(t),F=c(f(T)||T),L=f(F),M=e.length;if(!T)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!F)throw new Error(`Unsupported file format "${T}" (expected ${S})`);if(!M)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let C,_,m=t.replace(/{(\d*)}/g,(g,p)=>(_=!0,p=parseInt(p,10),C=isFinite(p)?p:isFinite(C)?C:-1,"{}")),E=r>0?r-1:r<0?M+r:void 0;if(isFinite(E)&&E<0||E>=M)throw new RangeError(M==1?`Canvas only has a \u2018page 1\u2019 (${E} is out of bounds)`:`Canvas has pages 1\u2013${M} (${E} is out of bounds)`);if(e=isFinite(E)?[e[E]]:_||F=="pdf"?e:e.slice(-1),a===void 0)a=.92;else if(typeof a!="number"||!isFinite(a)||a<0||a>1)throw new TypeError("The quality option must be an number in the 0.0\u20131.0 range");if(i===void 0){let g=(n||dr(t,T)).match(/@(\d+)x$/i);i=g?parseInt(g[1],10):1}else if(typeof i!="number"||!Number.isInteger(i)||i<1)throw new TypeError("The density option must be a non-negative integer");return s===void 0?s=!0:F=="svg"&&(s=!!s),{filename:t,pattern:m,format:F,mime:L,pages:e,padding:C,quality:a,matte:l,density:i,outline:s,archive:y}}class Zt{static for(t){return new Zt().append(t).get()}constructor(){this.crc=-1}get(){return~this.crc}append(t){for(var n=this.crc|0,o=this.table,r=0,a=t.length|0;r<a;r++)n=n>>>8^o[(n^t[r])&255];return this.crc=n,this}}Zt.prototype.table=(()=>{var e,t,n,o=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)n=n&1?n>>>1^3988292384:n>>>1;o[e]=n}return o})();function gn(e){let t=new Uint8Array(e),n=new DataView(t.buffer),o={array:t,view:n,size:e,set8(r,a){return n.setUint8(r,a),o},set16(r,a){return n.setUint16(r,a,!0),o},set32(r,a){return n.setUint32(r,a,!0),o},bytes(r,a){return t.set(a,r),o}};return o}class Wt{constructor(t){let n=new Date;Object.assign(this,{directory:t,offset:0,files:[],time:(n.getHours()<<6|n.getMinutes())<<5|n.getSeconds()/2,date:(n.getFullYear()-1980<<4|n.getMonth()+1)<<5|n.getDate()}),this.add(t)}async add(t,n){let o=!n,r=Wt.encoder.encode(`${this.directory}/${o?"":t}`),a=new Uint8Array(o?0:await n.arrayBuffer()),l=30+r.length,i=l+a.length,s=16,{offset:d}=this,c=gn(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,Zt.for(a)).set32(14,a.length).set32(18,a.length).set16(22,r.length);d+=l;let f=gn(l+a.length+s).set32(0,67324752).bytes(4,c.array).bytes(30,r).bytes(l,a);d+=a.length,f.set32(i,134695760).bytes(i+4,c.array.slice(10,22)),d+=s,this.files.push({offset:d,folder:o,name:r,header:c,payload:f}),this.offset=d}toBuffer(){let t=this.files.reduce((f,{name:S})=>46+S.length+f,0),n=gn(t+22),o=0;for(var{offset:r,name:a,header:l,folder:i}of this.files)n.set32(o,33639248).set16(o+4,20).bytes(o+6,l.array).set8(o+38,i?16:0).set32(o+42,r).bytes(o+46,a),o+=46+a.length;n.set32(o,101010256).set16(o+8,this.files.length).set16(o+10,this.files.length).set32(o+12,t).set32(o+16,this.offset);let s=new Uint8Array(this.offset+n.size),d=0;for(var{payload:c}of this.files)s.set(c.array,d),d+=c.size;return s.set(n.array,d),s}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}Wt.encoder=new TextEncoder;const Fn=(e,t,n,o)=>{if(o){let{width:r,height:a}=e,l=Object.assign(document.createElement("canvas"),{width:r,height:a}),i=l.getContext("2d");i.fillStyle=o,i.fillRect(0,0,r,a),i.drawImage(e,0,0),e=l}return new Promise((r,a)=>e.toBlob(r,t,n))},Tl=(...e)=>Fn(...e).then(t=>t.arrayBuffer()),Al=async(e,t,n,o,r)=>{fr(r,await Fn(e,t,n,o))},Pl=async(e,t,n,o,r,a,l)=>{let i=c=>a.replace("{}",String(c+1).padStart(l,"0")),s=dr(r,".zip")||"archive",d=new Wt(s);await Promise.all(e.map(async(c,f)=>{let S=i(f);await d.add(S,await Fn(c,t,n,o))})),fr(`${s}.zip`,d.blob)},fr=(e,t)=>{const n=window.URL.createObjectURL(t),o=document.createElement("a");o.style.display="none",o.href=n,o.setAttribute("download",e),typeof o.download=="undefined"&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>window.URL.revokeObjectURL(n),100)},Bl=(e,t,n)=>e.map(o=>{if(t==1&&!n)return o.canvas;let r=document.createElement("canvas"),a=r.getContext("2d"),l=o.canvas?o.canvas:o;return r.width=l.width*t,r.height=l.height*t,n&&(a.fillStyle=n,a.fillRect(0,0,r.width,r.height)),a.scale(t,t),a.drawImage(l,0,0),r}),_l={asBuffer:Tl,asDownload:Al,asZipDownload:Pl,atScale:Bl,options:El},{asBuffer:mn,asDownload:ql,asZipDownload:Il,atScale:pn,options:yn}=_l,Eo=Symbol.for("toDataURL"),Fl=e=>new Promise((t,n)=>Object.assign(new hr,{crossOrigin:"Anonymous",onload:t,onerror:n,src:e}));class Ll{constructor(t,n){let o=document.createElement("canvas"),r=[];Object.defineProperty(o,"async",{value:!0,writable:!1,enumerable:!0});for(var[a,l]of Object.entries({png:()=>mn(o,"image/png"),jpg:()=>mn(o,"image/jpeg"),pages:()=>r.concat(o).map(i=>i.getContext("2d"))}))Object.defineProperty(o,a,{get:l});return Object.assign(o,{width:t,height:n,newPage(...i){var{width:d,height:c}=o,s=Object.assign(document.createElement("canvas"),{width:d,height:c});s.getContext("2d").drawImage(o,0,0),r.push(s);var[d,c]=i.length?i:[d,c];return Object.assign(o,{width:d,height:c}).getContext("2d")},saveAs(i,s){s=typeof s=="number"?{quality:s}:s;let d=yn(this.pages,{filename:i,...s}),{pattern:c,padding:f,mime:S,quality:y,matte:T,density:F,archive:L}=d,M=pn(d.pages,F);return f==null?ql(M[0],S,y,T,i):Il(M,S,y,T,L,c,f)},toBuffer(i="png",s={}){s=typeof s=="number"?{quality:s}:s;let d=yn(this.pages,{extension:i,...s}),{mime:c,quality:f,matte:S,pages:y,density:T}=d,F=pn(y,T,S)[0];return mn(F,c,f,S)},[Eo]:o.toDataURL.bind(o),toDataURL(i="png",s={}){s=typeof s=="number"?{quality:s}:s;let d=yn(this.pages,{extension:i,...s}),{mime:c,quality:f,matte:S,pages:y,density:T}=d,F=pn(y,T,S)[0],L=F[F===o?Eo:"toDataURL"](c,f);return Promise.resolve(L)}})}}const{CanvasRenderingContext2D:Rl,CanvasGradient:Ol,CanvasPattern:Vl,Image:hr,ImageData:Hl,Path2D:$l,DOMMatrix:Nl,DOMRect:jl,DOMPoint:Yl}=window,zl={Canvas:Ll,loadImage:Fl,CanvasRenderingContext2D:Rl,CanvasGradient:Ol,CanvasPattern:Vl,Image:hr,ImageData:Hl,Path2D:$l,DOMMatrix:Nl,DOMRect:jl,DOMPoint:Yl},Dt=(e,t,n={},o=n)=>{if(Array.isArray(t))t.forEach(r=>Dt(e,r,n,o));else if(typeof t=="function")t(e,n,o,Dt);else{const r=Object.keys(t)[0];Array.isArray(t[r])?(o[r]={},Dt(e,t[r],n,o[r])):o[r]=t[r](e,n,o,Dt)}return n},ut=(e,t)=>(n,o,r,a)=>{t(n,o,r)&&a(n,e,o,r)},Ul=(e,t)=>(n,o,r,a)=>{const l=[];let i=n.pos;for(;t(n,o,r);){const s={};if(a(n,e,o,s),n.pos===i)break;i=n.pos,l.push(s)}return l},Kl=e=>({data:e,pos:0}),Pe=()=>e=>e.data[e.pos++],vr=(e=0)=>t=>t.data[t.pos+e],Oe=e=>t=>t.data.subarray(t.pos,t.pos+=e),Gt=e=>t=>t.data.subarray(t.pos,t.pos+e),En=e=>t=>Array.from(Oe(e)(t)).map(n=>String.fromCharCode(n)).join(""),rt=e=>t=>{const n=Oe(2)(t);return e?(n[1]<<8)+n[0]:(n[0]<<8)+n[1]},gr=(e,t)=>(n,o,r)=>{const a=typeof t=="function"?t(n,o,r):t,l=Oe(e),i=new Array(a);for(var s=0;s<a;s++)i[s]=l(n);return i},Zl=(e,t,n)=>{for(var o=0,r=0;r<n;r++)o+=e[t+r]&&2**(n-r-1);return o},Ln=e=>t=>{const n=Pe()(t),o=new Array(8);for(var r=0;r<8;r++)o[7-r]=!!(n&1<<r);return Object.keys(e).reduce((a,l)=>{const i=e[l];return i.length?a[l]=Zl(o,i.index,i.length):a[l]=o[i.index],a},{})};var Xt={blocks:e=>{const n=[],o=e.data.length;for(var r=0,a=Pe()(e);a!==0&&a;a=Pe()(e)){if(e.pos+a>=o){const d=o-e.pos;n.push(Oe(d)(e)),r+=d;break}n.push(Oe(a)(e)),r+=a}const l=new Uint8Array(r);for(var i=0,s=0;s<n.length;s++)l.set(n[s],i),i+=n[s].length;return l}};const Wl=ut({gce:[{codes:Oe(2)},{byteSize:Pe()},{extras:Ln({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:rt(!0)},{transparentColorIndex:Pe()},{terminator:Pe()}]},e=>{var t=Gt(2)(e);return t[0]===33&&t[1]===249}),Gl=ut({image:[{code:Pe()},{descriptor:[{left:rt(!0)},{top:rt(!0)},{width:rt(!0)},{height:rt(!0)},{lct:Ln({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},ut({lct:gr(3,(e,t,n)=>Math.pow(2,n.descriptor.lct.size+1))},(e,t,n)=>n.descriptor.lct.exists),{data:[{minCodeSize:Pe()},Xt]}]},e=>vr()(e)===44),Xl=ut({text:[{codes:Oe(2)},{blockSize:Pe()},{preData:(e,t,n)=>Oe(n.text.blockSize)(e)},Xt]},e=>{var t=Gt(2)(e);return t[0]===33&&t[1]===1}),Jl=ut({application:[{codes:Oe(2)},{blockSize:Pe()},{id:(e,t,n)=>En(n.blockSize)(e)},Xt]},e=>{var t=Gt(2)(e);return t[0]===33&&t[1]===255}),Ql=ut({comment:[{codes:Oe(2)},Xt]},e=>{var t=Gt(2)(e);return t[0]===33&&t[1]===254}),ei=[{header:[{signature:En(3)},{version:En(3)}]},{lsd:[{width:rt(!0)},{height:rt(!0)},{gct:Ln({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:Pe()},{pixelAspectRatio:Pe()}]},ut({gct:gr(3,(e,t)=>Math.pow(2,t.lsd.gct.size+1))},(e,t)=>t.lsd.gct.exists),{frames:Ul([Wl,Jl,Ql,Gl,Xl],e=>{var t=vr()(e);return t===33||t===44})}],ti=(e,t)=>{const n=new Array(e.length),o=e.length/t,r=function(c,f){const S=e.slice(f*t,(f+1)*t);n.splice.apply(n,[c*t,t].concat(S))},a=[0,4,2,1],l=[8,8,4,2];for(var i=0,s=0;s<4;s++)for(var d=a[s];d<o;d+=l[s])r(d,i),i++;return n},ni=(e,t,n)=>{const a=n;var l,i,s,d,c,f,S,E,y,T,m,F,g,p,D,b;const L=new Array(n),M=new Array(4096),C=new Array(4096),_=new Array(4096+1);for(F=e,i=1<<F,c=i+1,l=i+2,S=-1,d=F+1,s=(1<<d)-1,y=0;y<i;y++)M[y]=0,C[y]=y;var m,E,g,p,b,D;for(m=E=g=p=b=D=0,T=0;T<a;){if(p===0){if(E<d){m+=t[D]<<E,E+=8,D++;continue}if(y=m&s,m>>=d,E-=d,y>l||y==c)break;if(y==i){d=F+1,s=(1<<d)-1,l=i+2,S=-1;continue}if(S==-1){_[p++]=C[y],S=y,g=y;continue}for(f=y,y==l&&(_[p++]=g,y=S);y>i;)_[p++]=C[y],y=M[y];g=C[y]&255,_[p++]=g,l<4096&&(M[l]=S,C[l]=g,l++,(l&s)===0&&l<4096&&(d++,s+=l)),S=f}p--,L[b++]=_[p],T++}for(T=b;T<a;T++)L[T]=0;return L},oi=e=>{const t=new Uint8Array(e);return Dt(Kl(t),ei)},ri=e=>{const t=e.pixels.length,n=new Uint8ClampedArray(t*4);for(var o=0;o<t;o++){const r=o*4,a=e.pixels[o],l=e.colorTable[a];n[r]=l[0],n[r+1]=l[1],n[r+2]=l[2],n[r+3]=a!==e.transparentIndex?255:0}return n},ai=(e,t,n)=>{if(!e.image){console.warn("gif frame does not have associated image.");return}const{image:o}=e,r=o.descriptor.width*o.descriptor.height;var a=ni(o.data.minCodeSize,o.data.blocks,r);o.descriptor.lct.interlaced&&(a=ti(a,o.descriptor.width));const l={pixels:a,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return o.descriptor.lct&&o.descriptor.lct.exists?l.colorTable=o.lct:l.colorTable=t,e.gce&&(l.delay=(e.gce.delay||10)*10,l.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(l.transparentIndex=e.gce.transparentColorIndex)),n&&(l.patch=ri(l)),l},li=(e,t)=>e.frames.filter(n=>n.image).map(n=>ai(n,e.gct,t));function ii(e,t,n){const o=mr(t),r=e-1;let a=0;switch(n){case xe.L:a=Le[r][0];break;case xe.M:a=Le[r][1];break;case xe.Q:a=Le[r][2];break;case xe.H:a=Le[r][3];break}return o<=a}function si(e,t){for(var n=1,o=mr(e),r=0,a=Le.length;r<a;r++){var l=0;switch(t){case xe.L:l=Le[r][0];break;case xe.M:l=Le[r][1];break;case xe.Q:l=Le[r][2];break;case xe.H:l=Le[r][3];break}if(o<=l)break;n++}if(n>Le.length)throw new Error("Too long data");return n}function mr(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=Number(e)?3:0)}class ui{constructor(t){this.mode=De.MODE_8BIT_BYTE,this.parsedData=[],this.data=t;const n=[];for(let o=0,r=this.data.length;o<r;o++){const a=[],l=this.data.charCodeAt(o);l>65536?(a[0]=240|(l&1835008)>>>18,a[1]=128|(l&258048)>>>12,a[2]=128|(l&4032)>>>6,a[3]=128|l&63):l>2048?(a[0]=224|(l&61440)>>>12,a[1]=128|(l&4032)>>>6,a[2]=128|l&63):l>128?(a[0]=192|(l&1984)>>>6,a[1]=128|l&63):a[0]=l,n.push(a)}this.parsedData=Array.prototype.concat.apply([],n),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(t){for(let n=0,o=this.parsedData.length;n<o;n++)t.put(this.parsedData[n],8)}}class Xe{constructor(t=-1,n=xe.L){this.moduleCount=0,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=n,this.moduleCount=0,this.dataList=[]}addData(t){if(this.typeNumber<=0)this.typeNumber=si(t,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!ii(this.typeNumber,t,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const n=new ui(t);this.dataList.push(n),this.dataCache=void 0}isDark(t,n){if(t<0||this.moduleCount<=t||n<0||this.moduleCount<=n)throw new Error(`${t},${n}`);return this.modules[t][n]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,n){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(let r=0;r<this.moduleCount;r++)this.modules[o][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=Xe.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)}setupPositionProbePattern(t,n){for(let o=-1;o<=7;o++)if(!(t+o<=-1||this.moduleCount<=t+o))for(let r=-1;r<=7;r++)n+r<=-1||this.moduleCount<=n+r||(0<=o&&o<=6&&(r==0||r==6)||0<=r&&r<=6&&(o==0||o==6)||2<=o&&o<=4&&2<=r&&r<=4?this.modules[t+o][n+r]=!0:this.modules[t+o][n+r]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values($e).includes(this.maskPattern))return this.maskPattern;let t=0,n=0;for(let o=0;o<8;o++){this.makeImpl(!0,o);const r=ie.getLostPoint(this);(o==0||t>r)&&(t=r,n=o)}return n}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){const t=ie.getPatternPosition(this.typeNumber);for(let n=0;n<t.length;n++)for(let o=0;o<t.length;o++){const r=t[n],a=t[o];if(this.modules[r][a]==null)for(let l=-2;l<=2;l++)for(let i=-2;i<=2;i++)l==-2||l==2||i==-2||i==2||l==0&&i==0?this.modules[r+l][a+i]=!0:this.modules[r+l][a+i]=!1}}setupTypeNumber(t){const n=ie.getBCHTypeNumber(this.typeNumber);for(var o=0;o<18;o++){var r=!t&&(n>>o&1)==1;this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=r}for(var o=0;o<18;o++){var r=!t&&(n>>o&1)==1;this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=r}}setupTypeInfo(t,n){const o=this.errorCorrectLevel<<3|n,r=ie.getBCHTypeInfo(o);for(var a=0;a<15;a++){var l=!t&&(r>>a&1)==1;a<6?this.modules[a][8]=l:a<8?this.modules[a+1][8]=l:this.modules[this.moduleCount-15+a][8]=l}for(var a=0;a<15;a++){var l=!t&&(r>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=l:a<9?this.modules[8][15-a-1+1]=l:this.modules[8][15-a-1]=l}this.modules[this.moduleCount-8][8]=!t}mapData(t,n){let o=-1,r=this.moduleCount-1,a=7,l=0;for(let i=this.moduleCount-1;i>0;i-=2)for(i==6&&i--;;){for(let s=0;s<2;s++)if(this.modules[r][i-s]==null){let d=!1;l<t.length&&(d=(t[l]>>>a&1)==1),ie.getMask(n,r,i-s)&&(d=!d),this.modules[r][i-s]=d,a--,a==-1&&(l++,a=7)}if(r+=o,r<0||this.moduleCount<=r){r-=o,o=-o;break}}}static createData(t,n,o){const r=Ne.getRSBlocks(t,n),a=new ci;for(var l=0;l<o.length;l++){const s=o[l];a.put(s.mode,4),a.put(s.getLength(),ie.getLengthInBits(s.mode,t)),s.write(a)}let i=0;for(var l=0;l<r.length;l++)i+=r[l].dataCount;if(a.getLengthInBits()>i*8)throw new Error(`code length overflow. (${a.getLengthInBits()}>${i*8})`);for(a.getLengthInBits()+4<=i*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=i*8||(a.put(Xe.PAD0,8),a.getLengthInBits()>=i*8));)a.put(Xe.PAD1,8);return Xe.createBytes(a,r)}static createBytes(t,n){let o=0,r=0,a=0;const l=new Array(n.length),i=new Array(n.length);for(var s=0;s<n.length;s++){const y=n[s].dataCount,T=n[s].totalCount-y;r=Math.max(r,y),a=Math.max(a,T),l[s]=new Array(y);for(var d=0;d<l[s].length;d++)l[s][d]=255&t.buffer[d+o];o+=y;const F=ie.getErrorCorrectPolynomial(T),M=new yt(l[s],F.getLength()-1).mod(F);i[s]=new Array(F.getLength()-1);for(var d=0;d<i[s].length;d++){const _=d+M.getLength()-i[s].length;i[s][d]=_>=0?M.get(_):0}}let c=0;for(var d=0;d<n.length;d++)c+=n[d].totalCount;const f=new Array(c);let S=0;for(var d=0;d<r;d++)for(var s=0;s<n.length;s++)d<l[s].length&&(f[S++]=l[s][d]);for(var d=0;d<a;d++)for(var s=0;s<n.length;s++)d<i[s].length&&(f[S++]=i[s][d]);return f}}Xe.PAD0=236;Xe.PAD1=17;const xe={L:1,M:0,Q:3,H:2},De={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},$e={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class ie{static getBCHTypeInfo(t){let n=t<<10;for(;ie.getBCHDigit(n)-ie.getBCHDigit(ie.G15)>=0;)n^=ie.G15<<ie.getBCHDigit(n)-ie.getBCHDigit(ie.G15);return(t<<10|n)^ie.G15_MASK}static getBCHTypeNumber(t){let n=t<<12;for(;ie.getBCHDigit(n)-ie.getBCHDigit(ie.G18)>=0;)n^=ie.G18<<ie.getBCHDigit(n)-ie.getBCHDigit(ie.G18);return t<<12|n}static getBCHDigit(t){let n=0;for(;t!=0;)n++,t>>>=1;return n}static getPatternPosition(t){return ie.PATTERN_POSITION_TABLE[t-1]}static getMask(t,n,o){switch(t){case $e.PATTERN000:return(n+o)%2==0;case $e.PATTERN001:return n%2==0;case $e.PATTERN010:return o%3==0;case $e.PATTERN011:return(n+o)%3==0;case $e.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2==0;case $e.PATTERN101:return n*o%2+n*o%3==0;case $e.PATTERN110:return(n*o%2+n*o%3)%2==0;case $e.PATTERN111:return(n*o%3+(n+o)%2)%2==0;default:throw new Error(`bad maskPattern:${t}`)}}static getErrorCorrectPolynomial(t){let n=new yt([1],0);for(let o=0;o<t;o++)n=n.multiply(new yt([1,he.gexp(o)],0));return n}static getLengthInBits(t,n){if(1<=n&&n<10)switch(t){case De.MODE_NUMBER:return 10;case De.MODE_ALPHA_NUM:return 9;case De.MODE_8BIT_BYTE:return 8;case De.MODE_KANJI:return 8;default:throw new Error(`mode:${t}`)}else if(n<27)switch(t){case De.MODE_NUMBER:return 12;case De.MODE_ALPHA_NUM:return 11;case De.MODE_8BIT_BYTE:return 16;case De.MODE_KANJI:return 10;default:throw new Error(`mode:${t}`)}else if(n<41)switch(t){case De.MODE_NUMBER:return 14;case De.MODE_ALPHA_NUM:return 13;case De.MODE_8BIT_BYTE:return 16;case De.MODE_KANJI:return 12;default:throw new Error(`mode:${t}`)}else throw new Error(`type:${n}`)}static getLostPoint(t){const n=t.getModuleCount();let o=0;for(var r=0;r<n;r++)for(var a=0;a<n;a++){let s=0;const d=t.isDark(r,a);for(let c=-1;c<=1;c++)if(!(r+c<0||n<=r+c))for(let f=-1;f<=1;f++)a+f<0||n<=a+f||c==0&&f==0||d==t.isDark(r+c,a+f)&&s++;s>5&&(o+=3+s-5)}for(var r=0;r<n-1;r++)for(var a=0;a<n-1;a++){let c=0;t.isDark(r,a)&&c++,t.isDark(r+1,a)&&c++,t.isDark(r,a+1)&&c++,t.isDark(r+1,a+1)&&c++,(c==0||c==4)&&(o+=3)}for(var r=0;r<n;r++)for(var a=0;a<n-6;a++)t.isDark(r,a)&&!t.isDark(r,a+1)&&t.isDark(r,a+2)&&t.isDark(r,a+3)&&t.isDark(r,a+4)&&!t.isDark(r,a+5)&&t.isDark(r,a+6)&&(o+=40);for(var a=0;a<n;a++)for(var r=0;r<n-6;r++)t.isDark(r,a)&&!t.isDark(r+1,a)&&t.isDark(r+2,a)&&t.isDark(r+3,a)&&t.isDark(r+4,a)&&!t.isDark(r+5,a)&&t.isDark(r+6,a)&&(o+=40);let l=0;for(var a=0;a<n;a++)for(var r=0;r<n;r++)t.isDark(r,a)&&l++;return o+=Math.abs(100*l/n/n-50)/5*10,o}}ie.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];ie.G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;ie.G18=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;ie.G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1;class he{static glog(t){if(t<1)throw new Error(`glog(${t})`);return he.LOG_TABLE[t]}static gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return he.EXP_TABLE[t]}}he.EXP_TABLE=new Array(256);he.LOG_TABLE=new Array(256);he._constructor=function(){for(var e=0;e<8;e++)he.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)he.EXP_TABLE[e]=he.EXP_TABLE[e-4]^he.EXP_TABLE[e-5]^he.EXP_TABLE[e-6]^he.EXP_TABLE[e-8];for(var e=0;e<255;e++)he.LOG_TABLE[he.EXP_TABLE[e]]=e}();class yt{constructor(t,n){if(t.length==null)throw new Error(`${t.length}/${n}`);let o=0;for(;o<t.length&&t[o]==0;)o++;this.num=new Array(t.length-o+n);for(let r=0;r<t.length-o;r++)this.num[r]=t[r+o]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){const n=new Array(this.getLength()+t.getLength()-1);for(let o=0;o<this.getLength();o++)for(let r=0;r<t.getLength();r++)n[o+r]^=he.gexp(he.glog(this.get(o))+he.glog(t.get(r)));return new yt(n,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;const n=he.glog(this.get(0))-he.glog(t.get(0)),o=new Array(this.getLength());for(var r=0;r<this.getLength();r++)o[r]=this.get(r);for(var r=0;r<t.getLength();r++)o[r]^=he.gexp(he.glog(t.get(r))+n);return new yt(o,0).mod(t)}}class Ne{constructor(t,n){this.totalCount=t,this.dataCount=n}static getRSBlocks(t,n){const o=Ne.getRsBlockTable(t,n);if(o==null)throw new Error(`bad rs block @ typeNumber:${t}/errorCorrectLevel:${n}`);const r=o.length/3,a=[];for(let l=0;l<r;l++){const i=o[l*3+0],s=o[l*3+1],d=o[l*3+2];for(let c=0;c<i;c++)a.push(new Ne(s,d))}return a}static getRsBlockTable(t,n){switch(n){case xe.L:return Ne.RS_BLOCK_TABLE[(t-1)*4+0];case xe.M:return Ne.RS_BLOCK_TABLE[(t-1)*4+1];case xe.Q:return Ne.RS_BLOCK_TABLE[(t-1)*4+2];case xe.H:return Ne.RS_BLOCK_TABLE[(t-1)*4+3];default:return}}}Ne.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class ci{constructor(){this.buffer=[],this.length=0}get(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)==1}put(t,n){for(let o=0;o<n;o++)this.putBit((t>>>n-o-1&1)==1)}getLengthInBits(){return this.length}putBit(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}}const Le=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var di=100,me=256,To=me-1,Ze=4,pr=16,Rn=1<<pr,yr=10,On=10,fi=Rn>>On,hi=Rn<<yr-On,vi=me>>3,Tn=6,gi=1<<Tn,mi=vi*gi,pi=30,br=10,Lt=1<<br,wr=8,Ao=1<<wr,yi=br+wr,gt=1<<yi,Po=499,Bo=491,_o=487,xr=503,bi=3*xr;function wi(e,t){var n,o,r,a,l;function i(){n=[],o=new Int32Array(256),r=new Int32Array(me),a=new Int32Array(me),l=new Int32Array(me>>3);var M,C;for(M=0;M<me;M++)C=(M<<Ze+8)/me,n[M]=new Float64Array([C,C,C,0]),a[M]=Rn/me,r[M]=0}function s(){for(var M=0;M<me;M++)n[M][0]>>=Ze,n[M][1]>>=Ze,n[M][2]>>=Ze,n[M][3]=M}function d(M,C,_,m,E){n[C][0]-=M*(n[C][0]-_)/Lt,n[C][1]-=M*(n[C][1]-m)/Lt,n[C][2]-=M*(n[C][2]-E)/Lt}function c(M,C,_,m,E){for(var g=Math.abs(C-M),p=Math.min(C+M,me),b=C+1,D=C-1,A=1,h,j;b<p||D>g;)j=l[A++],b<p&&(h=n[b++],h[0]-=j*(h[0]-_)/gt,h[1]-=j*(h[1]-m)/gt,h[2]-=j*(h[2]-E)/gt),D>g&&(h=n[D--],h[0]-=j*(h[0]-_)/gt,h[1]-=j*(h[1]-m)/gt,h[2]-=j*(h[2]-E)/gt)}function f(M,C,_){var m=2147483647,E=m,g=-1,p=g,b,D,A,h,j;for(b=0;b<me;b++)D=n[b],A=Math.abs(D[0]-M)+Math.abs(D[1]-C)+Math.abs(D[2]-_),A<m&&(m=A,g=b),h=A-(r[b]>>pr-Ze),h<E&&(E=h,p=b),j=a[b]>>On,a[b]-=j,r[b]+=j<<yr;return a[g]+=fi,r[g]-=hi,p}function S(){var M,C,_,m,E,g,p=0,b=0;for(M=0;M<me;M++){for(_=n[M],E=M,g=_[1],C=M+1;C<me;C++)m=n[C],m[1]<g&&(E=C,g=m[1]);if(m=n[E],M!=E&&(C=m[0],m[0]=_[0],_[0]=C,C=m[1],m[1]=_[1],_[1]=C,C=m[2],m[2]=_[2],_[2]=C,C=m[3],m[3]=_[3],_[3]=C),g!=p){for(o[p]=b+M>>1,C=p+1;C<g;C++)o[C]=M;p=g,b=M}}for(o[p]=b+To>>1,C=p+1;C<256;C++)o[C]=To}function y(M,C,_){for(var m,E,g,p=1e3,b=-1,D=o[C],A=D-1;D<me||A>=0;)D<me&&(E=n[D],g=E[1]-C,g>=p?D=me:(D++,g<0&&(g=-g),m=E[0]-M,m<0&&(m=-m),g+=m,g<p&&(m=E[2]-_,m<0&&(m=-m),g+=m,g<p&&(p=g,b=E[3])))),A>=0&&(E=n[A],g=C-E[1],g>=p?A=-1:(A--,g<0&&(g=-g),m=E[0]-M,m<0&&(m=-m),g+=m,g<p&&(m=E[2]-_,m<0&&(m=-m),g+=m,g<p&&(p=g,b=E[3]))));return b}function T(){var M,C=e.length,_=30+(t-1)/3,m=C/(3*t),E=~~(m/di),g=Lt,p=mi,b=p>>Tn;for(b<=1&&(b=0),M=0;M<b;M++)l[M]=g*((b*b-M*M)*Ao/(b*b));var D;C<bi?(t=1,D=3):C%Po!==0?D=3*Po:C%Bo!==0?D=3*Bo:C%_o!==0?D=3*_o:D=3*xr;var A,h,j,k,H=0;for(M=0;M<m;)if(A=(e[H]&255)<<Ze,h=(e[H+1]&255)<<Ze,j=(e[H+2]&255)<<Ze,k=f(A,h,j),d(g,k,A,h,j),b!==0&&c(b,k,A,h,j),H+=D,H>=C&&(H-=C),M++,E===0&&(E=1),M%E===0)for(g-=g/_,p-=p/pi,b=p>>Tn,b<=1&&(b=0),k=0;k<b;k++)l[k]=g*((b*b-k*k)*Ao/(b*b))}function F(){i(),T(),s(),S()}this.buildColormap=F;function L(){for(var M=[],C=[],_=0;_<me;_++)C[n[_][3]]=_;for(var m=0,E=0;E<me;E++){var g=C[E];M[m++]=n[g][0],M[m++]=n[g][1],M[m++]=n[g][2]}return M}this.getColormap=L,this.lookupRGB=y}var qo=-1,Rt=12,Mt=5003,xi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function Ci(e,t,n,o){var r=Math.max(2,o),a=new Uint8Array(256),l=new Int32Array(Mt),i=new Int32Array(Mt),s,d=0,c,f=0,S,y=!1,T,F,L,M,C,_;function m(k,H){a[c++]=k,c>=254&&D(H)}function E(k){g(Mt),f=F+2,y=!0,j(F,k)}function g(k){for(var H=0;H<k;++H)l[H]=-1}function p(k,H){var P,te,x,R,Q,U,B;for(T=k,y=!1,_=T,S=A(_),F=1<<k-1,L=F+1,f=F+2,c=0,R=h(),B=0,P=Mt;P<65536;P*=2)++B;B=8-B,U=Mt,g(U),j(F,H);e:for(;(te=h())!=qo;){if(P=(te<<Rt)+R,x=te<<B^R,l[x]===P){R=i[x];continue}else if(l[x]>=0){Q=U-x,x===0&&(Q=1);do if((x-=Q)<0&&(x+=U),l[x]===P){R=i[x];continue e}while(l[x]>=0)}j(R,H),R=te,f<1<<Rt?(i[x]=f++,l[x]=P):E(H)}j(R,H),j(L,H)}function b(k){k.writeByte(r),M=e*t,C=0,p(r+1,k),k.writeByte(0)}function D(k){c>0&&(k.writeByte(c),k.writeBytes(a,0,c),c=0)}function A(k){return(1<<k)-1}function h(){if(M===0)return qo;--M;var k=n[C++];return k&255}function j(k,H){for(s&=xi[d],d>0?s|=k<<d:s=k,d+=_;d>=8;)m(s&255,H),s>>=8,d-=8;if((f>S||y)&&(y?(S=A(_=T),y=!1):(++_,_==Rt?S=1<<Rt:S=A(_))),k==L){for(;d>0;)m(s&255,H),s>>=8,d-=8;D(H)}}this.encode=b}function ke(){this.page=-1,this.pages=[],this.newPage()}ke.pageSize=4096;ke.charMap={};for(var Ot=0;Ot<256;Ot++)ke.charMap[Ot]=String.fromCharCode(Ot);ke.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ke.pageSize),this.cursor=0};ke.prototype.getData=function(){for(var e="",t=0;t<this.pages.length;t++)for(var n=0;n<ke.pageSize;n++)e+=ke.charMap[this.pages[t][n]];return e};ke.prototype.toFlattenUint8Array=function(){const e=[];for(var t=0;t<this.pages.length;t++)if(t===this.pages.length-1){const o=Uint8Array.from(this.pages[t].slice(0,this.cursor));e.push(o)}else e.push(this.pages[t]);const n=new Uint8Array(e.reduce((o,r)=>o+r.length,0));return e.reduce((o,r)=>(n.set(r,o),o+r.length),0),n};ke.prototype.writeByte=function(e){this.cursor>=ke.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=e};ke.prototype.writeUTFBytes=function(e){for(var t=e.length,n=0;n<t;n++)this.writeByte(e.charCodeAt(n))};ke.prototype.writeBytes=function(e,t,n){for(var o=n||e.length,r=t||0;r<o;r++)this.writeByte(e[r])};function ce(e,t){this.width=~~e,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new ke}ce.prototype.setDelay=function(e){this.delay=Math.round(e/10)};ce.prototype.setFrameRate=function(e){this.delay=Math.round(100/e)};ce.prototype.setDispose=function(e){e>=0&&(this.dispose=e)};ce.prototype.setRepeat=function(e){this.repeat=e};ce.prototype.setTransparent=function(e){this.transparent=e};ce.prototype.addFrame=function(e){this.image=e,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};ce.prototype.finish=function(){this.out.writeByte(59)};ce.prototype.setQuality=function(e){e<1&&(e=1),this.sample=e};ce.prototype.setDither=function(e){e===!0&&(e="FloydSteinberg"),this.dither=e};ce.prototype.setGlobalPalette=function(e){this.globalPalette=e};ce.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};ce.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};ce.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new wi(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};ce.prototype.indexPixels=function(e){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var n=0,o=0;o<t;o++){var r=this.findClosestRGB(this.pixels[n++]&255,this.pixels[n++]&255,this.pixels[n++]&255);this.usedEntry[r]=!0,this.indexedPixels[o]=r}};ce.prototype.ditherPixels=function(e,t){var n={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!e||!n[e])throw"Unknown dithering kernel: "+e;var o=n[e],r=0,a=this.height,l=this.width,i=this.pixels,s=t?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var d=0;d<a;d++){t&&(s=s*-1);for(var c=s==1?0:l-1,f=s==1?l:0;c!==f;c+=s){r=d*l+c;var S=r*3,y=i[S],T=i[S+1],F=i[S+2];S=this.findClosestRGB(y,T,F),this.usedEntry[S]=!0,this.indexedPixels[r]=S,S*=3;for(var L=this.colorTab[S],M=this.colorTab[S+1],C=this.colorTab[S+2],_=y-L,m=T-M,E=F-C,g=s==1?0:o.length-1,p=s==1?o.length:0;g!==p;g+=s){var b=o[g][1],D=o[g][2];if(b+c>=0&&b+c<l&&D+d>=0&&D+d<a){var A=o[g][0];S=r+b+D*l,S*=3,i[S]=Math.max(0,Math.min(255,i[S]+_*A)),i[S+1]=Math.max(0,Math.min(255,i[S+1]+m*A)),i[S+2]=Math.max(0,Math.min(255,i[S+2]+E*A))}}}}};ce.prototype.findClosest=function(e,t){return this.findClosestRGB((e&16711680)>>16,(e&65280)>>8,e&255,t)};ce.prototype.findClosestRGB=function(e,t,n,o){if(this.colorTab===null)return-1;if(this.neuQuant&&!o)return this.neuQuant.lookupRGB(e,t,n);for(var r=0,a=256*256*256,l=this.colorTab.length,i=0,s=0;i<l;s++){var d=e-(this.colorTab[i++]&255),c=t-(this.colorTab[i++]&255),f=n-(this.colorTab[i++]&255),S=d*d+c*c+f*f;(!o||this.usedEntry[s])&&S<a&&(a=S,r=s)}return r};ce.prototype.getImagePixels=function(){var e=this.width,t=this.height;this.pixels=new Uint8Array(e*t*3);for(var n=this.image,o=0,r=0,a=0;a<t;a++)for(var l=0;l<e;l++)this.pixels[r++]=n[o++],this.pixels[r++]=n[o++],this.pixels[r++]=n[o++],o++};ce.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var e,t;this.transparent===null?(e=0,t=0):(e=1,t=2),this.dispose>=0&&(t=this.dispose&7),t<<=2,this.out.writeByte(0|t|0|e),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};ce.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};ce.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};ce.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};ce.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var e=3*256-this.colorTab.length,t=0;t<e;t++)this.out.writeByte(0)};ce.prototype.writeShort=function(e){this.out.writeByte(e&255),this.out.writeByte(e>>8&255)};ce.prototype.writePixels=function(){var e=new Ci(this.width,this.height,this.indexedPixels,this.colorDepth);e.encode(this.out)};ce.prototype.stream=function(){return this.out};var ki=globalThis&&globalThis.__awaiter||function(e,t,n,o){function r(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function i(c){try{d(o.next(c))}catch(f){l(f)}}function s(c){try{d(o.throw(c))}catch(f){l(f)}}function d(c){c.done?a(c.value):r(c.value).then(i,s)}d((o=o.apply(e,t||[])).next())})};const{Canvas:Ve}=zl,Vt=.4;function Io(e){if(!e)return;function t(n){n.onload=null,n.onerror=null}return new Promise(function(n,o){if(e.slice(0,4)=="data"){let a=new Image;a.onload=function(){n(a),t(a)},a.onerror=function(){o("Image load error"),t(a)},a.src=e;return}let r=new Image;r.setAttribute("crossOrigin","Anonymous"),r.onload=function(){n(r)},r.onerror=function(){o("Image load error")},r.src=e})}class ae{constructor(t){const n=Object.assign({},t);if(Object.keys(ae.defaultOptions).forEach(o=>{o in n||Object.defineProperty(n,o,{value:ae.defaultOptions[o],enumerable:!0,writable:!0})}),n.components?typeof n.components=="object"&&Object.keys(ae.defaultComponentOptions).forEach(o=>{o in n.components?Object.defineProperty(n.components,o,{value:Object.assign(Object.assign({},ae.defaultComponentOptions[o]),n.components[o]),enumerable:!0,writable:!0}):Object.defineProperty(n.components,o,{value:ae.defaultComponentOptions[o],enumerable:!0,writable:!0})}):n.components=ae.defaultComponentOptions,n.dotScale!==null&&n.dotScale!==void 0){if(n.dotScale<=0||n.dotScale>1)throw new Error("dotScale should be in range (0, 1].");n.components.data.scale=n.dotScale,n.components.timing.scale=n.dotScale,n.components.alignment.scale=n.dotScale}this.options=n,this.canvas=new Ve(t.size,t.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new Xe(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(t=>this._draw().then(t))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(t,n,o,r,a,l){t.beginPath(),t.moveTo(n,o),t.arcTo(n+r,o,n+r,o+a,l),t.arcTo(n+r,o+a,n,o+a,l),t.arcTo(n,o+a,n,o,l),t.arcTo(n,o,n+r,o,l),t.closePath()}static _getAverageRGB(t){const o={r:0,g:0,b:0};let r,a,l=-4;const i={r:0,g:0,b:0};let s=0;a=t.naturalHeight||t.height,r=t.naturalWidth||t.width;const c=new Ve(r,a).getContext("2d");if(!c)return o;c.drawImage(t,0,0);let f;try{f=c.getImageData(0,0,r,a)}catch{return o}for(;(l+=5*4)<f.data.length;)f.data[l]>200||f.data[l+1]>200||f.data[l+2]>200||(++s,i.r+=f.data[l],i.g+=f.data[l+1],i.b+=f.data[l+2]);return i.r=~~(i.r/s),i.g=~~(i.g/s),i.b=~~(i.b/s),i}static _drawDot(t,n,o,r,a=0,l=1){t.fillRect((n+a)*r,(o+a)*r,l*r,l*r)}static _drawAlignProtector(t,n,o,r){t.clearRect((n-2)*r,(o-2)*r,5*r,5*r),t.fillRect((n-2)*r,(o-2)*r,5*r,5*r)}static _drawAlign(t,n,o,r,a=0,l=1,i,s){const d=t.fillStyle;t.fillStyle=i,new Array(4).fill(0).map((c,f)=>{ae._drawDot(t,n-2+f,o-2,r,a,l),ae._drawDot(t,n+2,o-2+f,r,a,l),ae._drawDot(t,n+2-f,o+2,r,a,l),ae._drawDot(t,n-2,o+2-f,r,a,l)}),ae._drawDot(t,n,o,r,a,l),s||(t.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((c,f)=>{ae._drawDot(t,n-1+f,o-1,r,a,l),ae._drawDot(t,n+1,o-1+f,r,a,l),ae._drawDot(t,n+1-f,o+1,r,a,l),ae._drawDot(t,n-1,o+1-f,r,a,l)})),t.fillStyle=d}_draw(){var t,n,o,r,a,l,i,s,d,c,f,S,y,T,F,L,M,C,_;return ki(this,void 0,void 0,function*(){const m=(t=this.qrCode)===null||t===void 0?void 0:t.moduleCount,E=this.options.size;let g=this.options.margin;(g<0||g*2>=E)&&(g=0);const p=Math.ceil(g),b=E-2*g,D=this.options.whiteMargin,A=this.options.backgroundDimming,h=Math.ceil(b/m),j=h*m,k=j+2*p,H=new Ve(k,k),P=H.getContext("2d");this._clear(),P.save(),P.translate(p,p);const te=new Ve(k,k),x=te.getContext("2d");let R=null,Q=[];if(this.options.gifBackground){const V=oi(this.options.gifBackground);if(R=V,Q=li(V,!0),this.options.autoColor){let N=0,W=0,G=0,ve=0;for(let re=0;re<Q[0].colorTable.length;re++){const J=Q[0].colorTable[re];J[0]>200||J[1]>200||J[2]>200||J[0]===0&&J[1]===0&&J[2]===0||(ve++,N+=J[0],W+=J[1],G+=J[2])}N=~~(N/ve),W=~~(W/ve),G=~~(G/ve),this.options.colorDark=`rgb(${N},${W},${G})`}}else if(this.options.backgroundImage){const V=yield Io(this.options.backgroundImage);if(this.options.autoColor){const N=ae._getAverageRGB(V);this.options.colorDark=`rgb(${N.r},${N.g},${N.b})`}x.drawImage(V,0,0,V.width,V.height,0,0,k,k),x.rect(0,0,k,k),x.fillStyle=A,x.fill()}else x.rect(0,0,k,k),x.fillStyle=this.options.colorLight,x.fill();const U=ie.getPatternPosition(this.qrCode.typeNumber),B=((o=(n=this.options.components)===null||n===void 0?void 0:n.data)===null||o===void 0?void 0:o.scale)||Vt,oe=(1-B)*.5;for(let V=0;V<m;V++)for(let N=0;N<m;N++){const W=this.qrCode.isDark(V,N),G=N<8&&(V<8||V>=m-8)||N>=m-8&&V<8,ve=V==6&&N>=8&&N<=m-8||N==6&&V>=8&&V<=m-8;let re=G||ve;for(let pe=1;pe<U.length-1;pe++)re=re||V>=U[pe]-2&&V<=U[pe]+2&&N>=U[pe]-2&&N<=U[pe]+2;const J=N*h+(re?0:oe*h),Se=V*h+(re?0:oe*h);if(P.strokeStyle=W?this.options.colorDark:this.options.colorLight,P.lineWidth=.5,P.fillStyle=W?this.options.colorDark:this.options.colorLight,U.length===0)re||P.fillRect(J,Se,(re?1:B)*h,(re?1:B)*h);else{const pe=N<m-4&&N>=m-4-5&&V<m-4&&V>=m-4-5;!re&&!pe&&P.fillRect(J,Se,(re?1:B)*h,(re?1:B)*h)}}const Z=U[U.length-1],Ce=this.options.colorLight;if(P.fillStyle=Ce,P.fillRect(0,0,8*h,8*h),P.fillRect(0,(m-8)*h,8*h,8*h),P.fillRect((m-8)*h,0,8*h,8*h),!((a=(r=this.options.components)===null||r===void 0?void 0:r.timing)===null||a===void 0)&&a.protectors&&(P.fillRect(8*h,6*h,(m-8-8)*h,h),P.fillRect(6*h,8*h,h,(m-8-8)*h)),!((i=(l=this.options.components)===null||l===void 0?void 0:l.cornerAlignment)===null||i===void 0)&&i.protectors&&ae._drawAlignProtector(P,Z,Z,h),!((d=(s=this.options.components)===null||s===void 0?void 0:s.alignment)===null||d===void 0)&&d.protectors)for(let V=0;V<U.length;V++)for(let N=0;N<U.length;N++){const W=U[N],G=U[V];if(!(W===6&&(G===6||G===Z))){if(G===6&&(W===6||W===Z))continue;if(W===Z&&G===Z)continue;ae._drawAlignProtector(P,W,G,h)}}P.fillStyle=this.options.colorDark,P.fillRect(0,0,7*h,h),P.fillRect((m-7)*h,0,7*h,h),P.fillRect(0,6*h,7*h,h),P.fillRect((m-7)*h,6*h,7*h,h),P.fillRect(0,(m-7)*h,7*h,h),P.fillRect(0,(m-7+6)*h,7*h,h),P.fillRect(0,0,h,7*h),P.fillRect(6*h,0,h,7*h),P.fillRect((m-7)*h,0,h,7*h),P.fillRect((m-7+6)*h,0,h,7*h),P.fillRect(0,(m-7)*h,h,7*h),P.fillRect(6*h,(m-7)*h,h,7*h),P.fillRect(2*h,2*h,3*h,3*h),P.fillRect((m-7+2)*h,2*h,3*h,3*h),P.fillRect(2*h,(m-7+2)*h,3*h,3*h);const K=((f=(c=this.options.components)===null||c===void 0?void 0:c.timing)===null||f===void 0?void 0:f.scale)||Vt,se=(1-K)*.5;for(let V=0;V<m-8;V+=2)ae._drawDot(P,8+V,6,h,se,K),ae._drawDot(P,6,8+V,h,se,K);const we=((y=(S=this.options.components)===null||S===void 0?void 0:S.cornerAlignment)===null||y===void 0?void 0:y.scale)||Vt,Ye=(1-we)*.5;ae._drawAlign(P,Z,Z,h,Ye,we,this.options.colorDark,((F=(T=this.options.components)===null||T===void 0?void 0:T.cornerAlignment)===null||F===void 0?void 0:F.protectors)||!1);const z=((M=(L=this.options.components)===null||L===void 0?void 0:L.alignment)===null||M===void 0?void 0:M.scale)||Vt,Je=(1-z)*.5;for(let V=0;V<U.length;V++)for(let N=0;N<U.length;N++){const W=U[N],G=U[V];if(!(W===6&&(G===6||G===Z))){if(G===6&&(W===6||W===Z))continue;if(W===Z&&G===Z)continue;ae._drawAlign(P,W,G,h,Je,z,this.options.colorDark,((_=(C=this.options.components)===null||C===void 0?void 0:C.alignment)===null||_===void 0?void 0:_.protectors)||!1)}}if(D&&(P.fillStyle=this.options.backgroundColor,P.fillRect(-p,-p,k,p),P.fillRect(-p,j,k,p),P.fillRect(j,-p,p,k),P.fillRect(-p,-p,p,k)),this.options.logoImage){const V=yield Io(this.options.logoImage);let N=this.options.logoScale,W=this.options.logoMargin,G=this.options.logoCornerRadius;(N<=0||N>=1)&&(N=.2),W<0&&(W=0),G<0&&(G=0);const ve=j*N,re=.5*(k-ve),J=re;P.restore(),P.fillStyle=this.options.logoBackgroundColor,P.save(),ae._prepareRoundedCornerClip(P,re-W,J-W,ve+2*W,ve+2*W,G+W),P.clip();const Se=P.globalCompositeOperation;P.globalCompositeOperation="destination-out",P.fill(),P.globalCompositeOperation=Se,P.restore(),P.save(),ae._prepareRoundedCornerClip(P,re,J,ve,ve,G),P.clip(),P.drawImage(V,re,J,ve,ve),P.restore(),P.save(),P.translate(p,p)}if(R){let V,N,W,G,ve,re;if(Q.forEach(function(J){V||(V=new ce(E,E),V.setDelay(J.delay),V.setRepeat(0));const{width:Se,height:pe}=J.dims;N||(N=new Ve(Se,pe),W=N.getContext("2d"),W.rect(0,0,N.width,N.height),W.fillStyle="#ffffff",W.fill()),(!G||!re||Se!==G.width||pe!==G.height)&&(G=new Ve(Se,pe),ve=G.getContext("2d"),re=ve.createImageData(Se,pe)),re.data.set(J.patch),ve.putImageData(re,0,0),W.drawImage(G.getContext("2d").canvas,J.dims.left,J.dims.top);const ct=new Ve(k,k),ze=ct.getContext("2d");ze.drawImage(N.getContext("2d").canvas,0,0,k,k),ze.rect(0,0,k,k),ze.fillStyle=A,ze.fill(),ze.drawImage(H.getContext("2d").canvas,0,0,k,k);const wt=new Ve(E,E),xt=wt.getContext("2d");xt.drawImage(ct.getContext("2d").canvas,0,0,E,E),V.addFrame(xt.getImageData(0,0,wt.width,wt.height).data)}),!V)throw new Error("No frames.");if(V.finish(),Fo(this.canvas)){const Se=V.stream().toFlattenUint8Array().reduce((pe,ct)=>pe+String.fromCharCode(ct),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(Se)}`)}return Promise.resolve(Buffer.from(V.stream().toFlattenUint8Array()))}else{x.drawImage(H.getContext("2d").canvas,0,0,k,k),P.drawImage(te.getContext("2d").canvas,-p,-p,k,k);const V=new Ve(E,E);V.getContext("2d").drawImage(H.getContext("2d").canvas,0,0,E,E),this.canvas=V;const W=this.options.gifBackground?"gif":"png";return Fo(this.canvas)?Promise.resolve(this.canvas.toDataURL(W)):Promise.resolve(this.canvas.toBuffer(W))}})}}ae.CorrectLevel=xe;ae.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};ae.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:xe.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:ae.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function Fo(e){try{return e instanceof HTMLElement}catch{return typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"}}const Mi={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const n=await kl(this.gifBgSrc),o=this.logoSrc;this.render(void 0,o,n);return}const e=this.bgSrc,t=this.logoSrc;this.render(e,t)},async render(e,t,n){const o=this;new ae({gifBackground:n,text:o.text,size:o.size,margin:o.margin,colorDark:o.colorDark,colorLight:o.colorLight,backgroundColor:o.backgroundColor,backgroundImage:e,backgroundDimming:o.backgroundDimming,logoImage:t,logoScale:o.logoScale,logoBackgroundColor:o.logoBackgroundColor,correctLevel:o.correctLevel,logoMargin:o.logoMargin,logoCornerRadius:o.logoCornerRadius,whiteMargin:vn(o.whiteMargin),dotScale:o.dotScale,autoColor:vn(o.autoColor),binarize:vn(o.binarize),binarizeThreshold:o.binarizeThreshold,components:o.components}).draw().then(r=>{this.imgUrl=r,o.callback&&o.callback(r,o.qid)})}}},Si=["src"];function Di(e,t,n,o,r,a){return n.bindElement?(wn(),Zr("img",{key:0,style:{display:"inline-block"},src:r.imgUrl},null,8,Si)):Oo("",!0)}var Ei=Ro(Mi,[["render",Di]]);const Ti={components:{vueQr:Ei},data:()=>({upn:{prejemnik:null,name:null,naslov:null,prnaslov:null,posta:null,prposta:null,date:null,trr:null,ref:null,znesek:0,koda:"GDSV",namen:null},img:null}),created(){try{const e=JSON.parse(localStorage.getItem("upn"));e&&(this.upn={...this.upn,...e})}catch(e){console.warn(e)}},computed:{qr(){const e=["UPNQR","","","","",(this.upn.name||"").trim(),(this.upn.naslov||"").trim(),(this.upn.posta||"").trim(),String(Math.floor(Number(`${this.upn.znesek}`.replace(",","."))*100)).padStart(11,"0"),"","",(this.upn.koda||"").trim(),(this.upn.namen||"").trim(),(this.upn.date||"").trim(),(this.upn.trr||"").trim(),(this.upn.ref||"").trim(),(this.upn.prejemnik||"").trim(),(this.upn.prnaslov||"").trim(),(this.upn.prposta||"").trim()];return e.push(String(19+e.reduce((t,n)=>t+n.length,0)).padStart(3,"0"),""),e.join(`
`)}},methods:{dataURI(e){this.img=e},save(){const e=document.createElement("a");e.download="qr.png",e.href=this.img,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},watch:{upn:{deep:!0,handler(e){localStorage.setItem("upn",JSON.stringify(e))}}}},Ai={class:"q-pa-sm"},Pi=Fe("div",{class:"q-pa-sm"},[Fe("div",{class:"text-h6"},"UPN QR Generator"),Fe("a",{href:"https://github.com/jeancaffou/upn-qr"},"https://github.com/jeancaffou/upn-qr")],-1),Bi={class:"row q-col-gutter-sm full-width"},_i={class:"col-lg-4 col-xs-12"},qi={class:"col-lg-4 col-xs-12"},Ii={class:"row items-center justify-end"},Fi={class:"col-lg-4 col-xs-12"},Li={class:"column"};function Ri(e,t,n,o,r,a){const l=Gr("vue-qr");return wn(),Gn(xl,{class:"flex flex-center"},{default:Ct(()=>[Fe("div",Ai,[Pi,Fe("div",Bi,[Fe("div",_i,[ye(Ae,{modelValue:e.upn.name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.upn.name=i),label:"Ime pla\u010Dnika",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.naslov,"onUpdate:modelValue":t[1]||(t[1]=i=>e.upn.naslov=i),label:"Naslov pla\u010Dnika",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.posta,"onUpdate:modelValue":t[2]||(t[2]=i=>e.upn.posta=i),label:"Po\u0161ta in kraj pla\u010Dnika",filled:"",clearable:""},null,8,["modelValue"])]),Fe("div",qi,[ye(Ae,{modelValue:e.upn.prejemnik,"onUpdate:modelValue":t[3]||(t[3]=i=>e.upn.prejemnik=i),label:"Ime prejemnika",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.prnaslov,"onUpdate:modelValue":t[4]||(t[4]=i=>e.upn.prnaslov=i),label:"Naslov prejemnika",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.prposta,"onUpdate:modelValue":t[5]||(t[5]=i=>e.upn.prposta=i),label:"Po\u0161ta in kraj prejemnika",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.date,"onUpdate:modelValue":t[7]||(t[7]=i=>e.upn.date=i),label:"Rok pla\u010Dila",filled:"",clearable:""},{append:Ct(()=>[ye(xn,{name:"event",class:"cursor-pointer"},{default:Ct(()=>[ye(wl,{"transition-show":"scale","transition-hide":"scale"},{default:Ct(()=>[ye(Ka,{modelValue:e.upn.date,"onUpdate:modelValue":t[6]||(t[6]=i=>e.upn.date=i),mask:"DD.MM.YYYY"},{default:Ct(()=>[Fe("div",Ii,[Wr(ye(Be,{label:"Zapri",color:"primary",flat:""},null,512),[[Cl]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),Fe("div",Fi,[ye(Ae,{modelValue:e.upn.koda,"onUpdate:modelValue":t[8]||(t[8]=i=>e.upn.koda=i),label:"Koda",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.namen,"onUpdate:modelValue":t[9]||(t[9]=i=>e.upn.namen=i),label:"Namen",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.znesek,"onUpdate:modelValue":t[10]||(t[10]=i=>e.upn.znesek=i),label:"Znesek",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.trr,"onUpdate:modelValue":t[11]||(t[11]=i=>e.upn.trr=i),label:"TRR",filled:"",clearable:""},null,8,["modelValue"]),ye(Ae,{modelValue:e.upn.ref,"onUpdate:modelValue":t[12]||(t[12]=i=>e.upn.ref=i),label:"Referenca",filled:"",clearable:""},null,8,["modelValue"])])])]),Fe("div",Li,[ye(l,{callback:a.dataURI,text:a.qr,size:250},null,8,["callback","text"]),e.img?(wn(),Gn(Be,{key:0,icon:"save",label:"Shrani",onClick:a.save,color:"primary"},null,8,["onClick"])):Oo("",!0)])]),_:1})}var Ni=Ro(Ti,[["render",Ri]]);export{Ni as default};
